"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@aptos-connect";
exports.ids = ["vendor-chunks/@aptos-connect"];
exports.modules = {

/***/ "(ssr)/./node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AptosConnectAccount: () => (/* binding */ AptosConnectAccount),\n/* harmony export */   AptosConnectAppleWallet: () => (/* binding */ AptosConnectAppleWallet),\n/* harmony export */   AptosConnectGenericWallet: () => (/* binding */ AptosConnectGenericWallet),\n/* harmony export */   AptosConnectGoogleWallet: () => (/* binding */ AptosConnectGoogleWallet),\n/* harmony export */   AptosConnectWallet: () => (/* binding */ AptosConnectWallet),\n/* harmony export */   registerAptosConnect: () => (/* binding */ registerAptosConnect)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/wallet-standard */ \"(ssr)/./node_modules/@aptos-labs/wallet-standard/dist/esm/index.mjs\");\n/* harmony import */ var _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-connect/wallet-api */ \"(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @identity-connect/crypto */ \"(ssr)/./node_modules/@identity-connect/crypto/dist/index.mjs\");\n/* harmony import */ var _identity_connect_dapp_sdk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @identity-connect/dapp-sdk */ \"(ssr)/./node_modules/@identity-connect/dapp-sdk/dist/index.mjs\");\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\n\n// src/index.ts\n\n\n// src/AptosConnectAppleWallet.ts\n\n\n// src/AptosConnectWallet.ts\n\n\n\n\n\n\n// src/AptosConnectAccount.ts\n\n\nvar _address, _publicKey;\nvar AptosConnectAccount = class {\n  constructor({ address, ansName, publicKey }) {\n    // region AptosWalletAccount\n    this.chains = _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.APTOS_CHAINS;\n    this.features = [];\n    // endregion\n    // region PetraAccount\n    __privateAdd(this, _address, void 0);\n    __privateAdd(this, _publicKey, void 0);\n    __privateSet(this, _publicKey, publicKey);\n    __privateSet(this, _address, address);\n    this.label = ansName;\n  }\n  get address() {\n    return __privateGet(this, _address).toString();\n  }\n  get publicKey() {\n    return __privateGet(this, _publicKey).toUint8Array();\n  }\n  get signingScheme() {\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Ed25519PublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.SigningScheme.Ed25519;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.MultiEd25519PublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.SigningScheme.MultiEd25519;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AnyPublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.SigningScheme.SingleKey;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.MultiKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.SigningScheme.MultiKey;\n    }\n    throw new Error(\"Unsupported public key type\");\n  }\n  // endregion\n};\n_address = new WeakMap();\n_publicKey = new WeakMap();\n\n// src/helpers.ts\n\n\nfunction customAccountToStandardAccount({\n  address,\n  name,\n  publicKey\n}) {\n  return new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AccountInfo({\n    address,\n    ansName: name,\n    publicKey\n  });\n}\nfunction unwrapUserResponse(response, callback) {\n  if (response.status === \"dismissed\") {\n    return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n  }\n  return { args: callback(response.args), status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED };\n}\nfunction networkToChainId(network) {\n  switch (network) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Network.MAINNET:\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.NetworkToChainId.mainnet;\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Network.TESTNET:\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.NetworkToChainId.testnet;\n    default:\n      return void 0;\n  }\n}\n\n// src/AptosConnectWallet.ts\nvar _AptosConnectWallet = class _AptosConnectWallet {\n  constructor({\n    aptosClientConfig,\n    claimSecretKey,\n    network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Network.MAINNET,\n    preferredWalletName,\n    ...clientConfig\n  }) {\n    // endregion\n    // region AptosWallet\n    this.version = \"1.0.0\";\n    this.chains = _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.APTOS_CHAINS;\n    this.client = new _identity_connect_dapp_sdk__WEBPACK_IMPORTED_MODULE_4__.ACDappClient(clientConfig);\n    if (!_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.NetworkToNodeAPI[network] && network !== _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.name) {\n      throw new Error(\"Network not supported\");\n    }\n    this.network = network;\n    const aptosSettings = network !== _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.name ? { network } : {\n      fullnode: _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.nodeUrl,\n      indexer: _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.indexerUrl,\n      network: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Network.CUSTOM\n    };\n    const aptosConfig = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AptosConfig({\n      ...aptosSettings,\n      ...aptosClientConfig\n    });\n    this.aptosClient = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Aptos(aptosConfig);\n    this.preferredWalletName = preferredWalletName;\n    if (claimSecretKey) {\n      if (network === _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.name) {\n        throw new Error(\"Shelbynet not supported\");\n      }\n      this.claimOptions = {\n        network,\n        secretKey: new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Ed25519PrivateKey(claimSecretKey)\n      };\n    }\n    this.chainIdPromise = this.aptosClient.getChainId();\n    this.chainIdPromise.then((chainId) => {\n      this.chainId = chainId;\n    });\n  }\n  static get connectedAccount() {\n    const serialized = localStorage.getItem(\n      _AptosConnectWallet.connectedAccountStorageKey\n    );\n    if (!serialized) {\n      return void 0;\n    }\n    try {\n      const { address, publicKey } = JSON.parse(\n        serialized\n      );\n      return new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AccountInfo({\n        address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(address),\n        publicKey: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_3__.deserializePublicKeyB64)(publicKey)\n      });\n    } catch (_err) {\n      this.connectedAccount = void 0;\n      return void 0;\n    }\n  }\n  static set connectedAccount(value) {\n    if (value !== void 0) {\n      const serialized = {\n        address: value.address.toString(),\n        publicKey: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_3__.serializePublicKeyB64)(value.publicKey)\n      };\n      localStorage.setItem(\n        _AptosConnectWallet.connectedAccountStorageKey,\n        JSON.stringify(serialized)\n      );\n    } else {\n      localStorage.removeItem(_AptosConnectWallet.connectedAccountStorageKey);\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  get accounts() {\n    const { connectedAccount } = _AptosConnectWallet;\n    return connectedAccount ? [new AptosConnectAccount(connectedAccount)] : [];\n  }\n  async connect() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (connectedAccount !== void 0) {\n      return { args: connectedAccount, status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED };\n    }\n    const response = await this.client.connect({\n      claimOptions: this.claimOptions,\n      preferredWalletName: this.preferredWalletName\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const newConnectedAccount = customAccountToStandardAccount(\n      response.args.account\n    );\n    _AptosConnectWallet.connectedAccount = newConnectedAccount;\n    return {\n      args: newConnectedAccount,\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  async disconnect() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      _AptosConnectWallet.connectedAccount = void 0;\n    }\n  }\n  async signIn(input) {\n    const response = await this.client.signIn({\n      network: this.network,\n      ...input\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const output = response.args;\n    _AptosConnectWallet.connectedAccount = output.account;\n    return { args: output, status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED };\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async getAccount() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount(connectedAccount);\n  }\n  async getNetwork() {\n    const chainId = await this.chainIdPromise;\n    const isShelbynet = this.network === _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.name;\n    return {\n      chainId,\n      name: isShelbynet ? _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Network.CUSTOM : this.network,\n      url: isShelbynet ? _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_1__.shelbynet.nodeUrl : _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.NetworkToNodeAPI[this.network]\n    };\n  }\n  async signMessage(input) {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const chainId = networkToChainId(this.network) ?? this.chainId ?? await this.chainIdPromise;\n    const { message, nonce } = input;\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: connectedAccount.address\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const { fullMessage, signature } = response.args;\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: this.client.dappInfo.domain,\n      chainId,\n      message,\n      nonce,\n      prefix: \"APTOS\"\n    };\n    return {\n      args: {\n        fullMessage,\n        signature,\n        ...extraResponseArgs\n      },\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  async signTransaction(txnOrArgs, _asFeePayer) {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    if (\"bcsToBytes\" in txnOrArgs) {\n      const transaction = txnOrArgs;\n      const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : void 0;\n      const secondarySigners = transaction.secondarySignerAddresses?.map(\n        (address) => ({ address })\n      );\n      const response2 = await this.client.signTransaction({\n        feePayer,\n        network: this.network,\n        secondarySigners,\n        signerAddress: connectedAccount.address,\n        transaction: transaction.rawTransaction\n      });\n      return unwrapUserResponse(response2, (args) => args.authenticator);\n    }\n    const requestArgs = txnOrArgs;\n    const response = await this.client.signTransaction({\n      network: this.network,\n      ...requestArgs,\n      signerAddress: connectedAccount.address\n    });\n    return unwrapUserResponse(response, (responseArgs) => {\n      const { authenticator, rawTransaction } = responseArgs;\n      if (!rawTransaction) {\n        throw new Error(\"Expected raw transaction in response args\");\n      }\n      const secondarySigners = requestArgs.secondarySigners ?? [];\n      let transaction;\n      if (secondarySigners.length > 0) {\n        transaction = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.MultiAgentTransaction(\n          rawTransaction,\n          secondarySigners.map((s) => s.address),\n          requestArgs.feePayer?.address\n        );\n      } else {\n        transaction = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.SimpleTransaction(\n          rawTransaction,\n          requestArgs.feePayer?.address\n        );\n      }\n      return {\n        authenticator,\n        rawTransaction: transaction\n      };\n    });\n  }\n  async signAndSubmitTransaction(args) {\n    const { gasUnitPrice, maxGasAmount, payload } = args;\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const response = await this.client.signAndSubmitTransaction({\n      gasUnitPrice,\n      maxGasAmount,\n      network: this.network,\n      payload,\n      signerAddress: connectedAccount.address\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    return {\n      args: { hash: response.args.txnHash },\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback) {\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback) {\n  }\n  // endregion\n};\n// region connectedAccount\n_AptosConnectWallet.connectedAccountStorageKey = \"@aptos-connect/connectedAccount\";\nvar AptosConnectWallet = _AptosConnectWallet;\n\n// src/config.ts\nvar walletMetadata = {\n  apple: {\n    icon: (\n      // eslint-disable-next-line max-len\n      \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxzdHlsZT4KICAgICAgICBwYXRoIHsKICAgICAgICAgICAgZmlsbDogYmxhY2s7CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7CiAgICAgICAgICAgIHBhdGggewogICAgICAgICAgICAgICAgZmlsbDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgogICAgPHBhdGgKICAgICAgICBkPSJNMjAuMzkzMiA4LjE4MjQyQzIwLjI1NzggOC4yOTA0MyAxNy44NjggOS42NzUzNyAxNy44NjggMTIuNzU0OUMxNy44NjggMTYuMzE2OCAyMC45MDkgMTcuNTc3IDIxIDE3LjYwODJDMjAuOTg2IDE3LjY4NSAyMC41MTY5IDE5LjMzMzkgMTkuMzk2NiAyMS4wMTQxQzE4LjM5NzcgMjIuNDkyNiAxNy4zNTQ1IDIzLjk2ODggMTUuNzY3NSAyMy45Njg4QzE0LjE4MDQgMjMuOTY4OCAxMy43NzIgMjMuMDIwNyAxMS45Mzk5IDIzLjAyMDdDMTAuMTU0NSAyMy4wMjA3IDkuNTE5NzIgMjQgOC4wNjgwNSAyNEM2LjYxNjM5IDI0IDUuNjAzNDkgMjIuNjMxOSA0LjQzODg5IDIwLjk1MTdDMy4wODk5MiAxOC45Nzg3IDIgMTUuOTEzNiAyIDEzLjAwNDVDMiA4LjMzODQzIDQuOTUwMDEgNS44NjM3OSA3Ljg1MzM0IDUuODYzNzlDOS4zOTYwMiA1Ljg2Mzc5IDEwLjY4MiA2LjkwNTQ5IDExLjY1MDUgNi45MDU0OUMxMi41NzI0IDYuOTA1NDkgMTQuMDEwMSA1LjgwMTM4IDE1Ljc2NTEgNS44MDEzOEMxNi40MzAzIDUuODAxMzggMTguODIwMiA1Ljg2Mzc5IDIwLjM5MzIgOC4xODI0MlpNMTQuOTMxOSAzLjgyNTk4QzE1LjY1NzggMi45NDAyOSAxNi4xNzEyIDEuNzExMzcgMTYuMTcxMiAwLjQ4MjQ0OEMxNi4xNzEyIDAuMzEyMDMxIDE2LjE1NzIgMC4xMzkyMTQgMTYuMTI2OSAwQzE0Ljk0NiAwLjA0NTYwNDYgMTMuNTQxIDAuODA4ODgxIDEyLjY5MzggMS44MTkzOEMxMi4wMjg2IDIuNTk3MDYgMTEuNDA3OCAzLjgyNTk4IDExLjQwNzggNS4wNzE3MUMxMS40MDc4IDUuMjU4OTMgMTEuNDM4MiA1LjQ0NjE0IDExLjQ1MjIgNS41MDYxNUMxMS41MjY4IDUuNTIwNTUgMTEuNjQ4MiA1LjUzNzM1IDExLjc2OTYgNS41MzczNUMxMi44MjkxIDUuNTM3MzUgMTQuMTYxOCA0LjgwNzY4IDE0LjkzMTkgMy44MjU5OFoiIC8+Cjwvc3ZnPg==\"\n    ),\n    name: \"Continue with Apple\",\n    url: \"https://web.petra.app\"\n  },\n  generic: {\n    icon: (\n      // eslint-disable-next-line max-len\n      \"data:image/png;base64,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\"\n    ),\n    name: \"Petra Web\",\n    url: \"https://web.petra.app\"\n  },\n  google: {\n    icon: (\n      // eslint-disable-next-line max-len\n      \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaF8yMCB3XzIwIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjU0IDEyLjc2MTNDMjMuNTQgMTEuOTQ1OSAyMy40NjY4IDExLjE2MTggMjMuMzMwOSAxMC40MDkxSDEyLjVWMTQuODU3NUgxOC42ODkxQzE4LjQyMjUgMTYuMjk1IDE3LjYxMjMgMTcuNTEyOSAxNi4zOTQzIDE4LjMyODRWMjEuMjEzOEgyMC4xMTA5QzIyLjI4NTUgMTkuMjExOCAyMy41NCAxNi4yNjM2IDIzLjU0IDEyLjc2MTNaIiBmaWxsPSIjNDI4NUY0Ij48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi40OTk1IDIzLjk5OThDMTUuNjA0NSAyMy45OTk4IDE4LjIwNzcgMjIuOTcgMjAuMTEwNCAyMS4yMTM3TDE2LjM5MzggMTguMzI4MkMxNS4zNjQgMTkuMDE4MiAxNC4wNDY3IDE5LjQyNTkgMTIuNDk5NSAxOS40MjU5QzkuNTA0MjUgMTkuNDI1OSA2Ljk2OTAyIDE3LjQwMyA2LjA2NDcgMTQuNjg0OEgyLjIyMjY2VjE3LjY2NDRDNC4xMTQ5MyAyMS40MjI4IDguMDA0MDIgMjMuOTk5OCAxMi40OTk1IDIzLjk5OThaIiBmaWxsPSIjMzRBODUzIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2NTIzIDE0LjY4NTFDNS44MzUyMyAxMy45OTUxIDUuNzA0NTUgMTMuMjU4MSA1LjcwNDU1IDEyLjUwMDFDNS43MDQ1NSAxMS43NDIyIDUuODM1MjMgMTEuMDA1MSA2LjA2NTIzIDEwLjMxNTFWNy4zMzU1N0gyLjIyMzE4QzEuNDQ0MzIgOC44ODgwNyAxIDEwLjY0NDQgMSAxMi41MDAxQzEgMTQuMzU1OCAxLjQ0NDMyIDE2LjExMjIgMi4yMjMxOCAxNy42NjQ3TDYuMDY1MjMgMTQuNjg1MVoiIGZpbGw9IiNGQkJDMDUiPjwvcGF0aD48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjQ5OTUgNS41NzM4NkMxNC4xODc5IDUuNTczODYgMTUuNzAzOCA2LjE1NDA5IDE2Ljg5NTYgNy4yOTM2NEwyMC4xOTQgMy45OTUyM0MxOC4yMDI0IDIuMTM5NTUgMTUuNTk5MiAxIDEyLjQ5OTUgMUM4LjAwNDAyIDEgNC4xMTQ5MyAzLjU3NzA1IDIuMjIyNjYgNy4zMzU0NUw2LjA2NDcgMTAuMzE1QzYuOTY5MDIgNy41OTY4MiA5LjUwNDI1IDUuNTczODYgMTIuNDk5NSA1LjU3Mzg2WiIgZmlsbD0iI0VBNDMzNSI+PC9wYXRoPjwvc3ZnPg==\"\n    ),\n    name: \"Continue with Google\",\n    url: \"https://web.petra.app\"\n  }\n};\n\n// src/AptosConnectAppleWallet.ts\nvar AptosConnectAppleWallet = class extends AptosConnectWallet {\n  constructor(config) {\n    super({ ...config, provider: \"apple\" });\n    this.name = walletMetadata.apple.name;\n    this.icon = walletMetadata.apple.icon;\n    this.url = walletMetadata.apple.url;\n  }\n  // region AptosWallet\n  get features() {\n    return {\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: \"1.1.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignInNamespace]: {\n        signIn: this.signIn.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: \"1.1.0\"\n      }\n    };\n  }\n  // endregion\n};\n\n// src/AptosConnectGenericWallet.ts\n\nvar AptosConnectGenericWallet = class extends AptosConnectWallet {\n  constructor(config) {\n    super({ ...config, provider: \"generic\" });\n    this.name = walletMetadata.generic.name;\n    this.icon = walletMetadata.generic.icon;\n    this.url = walletMetadata.generic.url;\n  }\n  // region AptosWallet\n  get features() {\n    return {\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: \"1.1.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignInNamespace]: {\n        signIn: this.signIn.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: \"1.1.0\"\n      }\n    };\n  }\n  // endregion\n};\n\n// src/AptosConnectGoogleWallet.ts\n\nvar AptosConnectGoogleWallet = class extends AptosConnectWallet {\n  constructor(config) {\n    super({ ...config, provider: \"google\" });\n    this.name = walletMetadata.google.name;\n    this.icon = walletMetadata.google.icon;\n    this.url = walletMetadata.google.url;\n  }\n  // region AptosWallet\n  get features() {\n    return {\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: \"1.1.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignInNamespace]: {\n        signIn: this.signIn.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: \"1.1.0\"\n      }\n    };\n  }\n  // endregion\n};\n\n// src/index.ts\nfunction registerAptosConnect(config) {\n  const googleWalletPlugin = new AptosConnectGoogleWallet(config);\n  const appleWalletPlugin = new AptosConnectAppleWallet(config);\n  const genericWalletPlugin = new AptosConnectGenericWallet(config);\n  (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.registerWallet)(googleWalletPlugin);\n  (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.registerWallet)(appleWalletPlugin);\n  (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.registerWallet)(genericWalletPlugin);\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFkYXB0ZXItcGx1Z2luL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZEOztBQUU3RDtBQVlxQzs7QUFFckM7QUFHbUM7QUFVUDtBQU9TO0FBSUg7QUFDd0I7O0FBRTFEO0FBTzRCO0FBR1M7QUFDckM7QUFDQTtBQUNBLGdCQUFnQiw2QkFBNkI7QUFDN0M7QUFDQSxrQkFBa0IscUVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0VBQWdCO0FBQ2xFLGFBQWEsNkRBQWE7QUFDMUI7QUFDQSxrREFBa0QscUVBQXFCO0FBQ3ZFLGFBQWEsNkRBQWE7QUFDMUI7QUFDQSxrREFBa0QsNERBQVk7QUFDOUQsYUFBYSw2REFBYTtBQUMxQjtBQUNBLGtEQUFrRCx3REFBUTtBQUMxRCxhQUFhLDZEQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytEO0FBSTFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGFBQWEsb0VBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSwyRUFBa0I7QUFDdkM7QUFDQSxXQUFXLHVDQUF1QywyRUFBa0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1REFBTztBQUNoQixhQUFhLGdFQUFnQjtBQUM3QixTQUFTLHVEQUFPO0FBQ2hCLGFBQWEsZ0VBQWdCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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O0FBQzVCO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsT0FBTyxrRkFBMEI7QUFDakM7QUFDQTtBQUNBLE9BQU87QUFDUCxPQUFPLHNGQUE4QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyRUFBYztBQUNoQixFQUFFLDJFQUFjO0FBQ2hCLEVBQUUsMkVBQWM7QUFDaEI7QUFRRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFzdXNcXERlc2t0b3BcXHByb2pcXHYzXFx2b2ljZXZhdWx0XFxuZXh0XFxub2RlX21vZHVsZXNcXEBhcHRvcy1jb25uZWN0XFx3YWxsZXQtYWRhcHRlci1wbHVnaW5cXGRpc3RcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hY2Nlc3NDaGVjayA9IChvYmosIG1lbWJlciwgbXNnKSA9PiB7XG4gIGlmICghbWVtYmVyLmhhcyhvYmopKVxuICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBcIiArIG1zZyk7XG59O1xudmFyIF9fcHJpdmF0ZUdldCA9IChvYmosIG1lbWJlciwgZ2V0dGVyKSA9PiB7XG4gIF9fYWNjZXNzQ2hlY2sob2JqLCBtZW1iZXIsIFwicmVhZCBmcm9tIHByaXZhdGUgZmllbGRcIik7XG4gIHJldHVybiBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogbWVtYmVyLmdldChvYmopO1xufTtcbnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiB7XG4gIGlmIChtZW1iZXIuaGFzKG9iaikpXG4gICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZVwiKTtcbiAgbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG59O1xudmFyIF9fcHJpdmF0ZVNldCA9IChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcIndyaXRlIHRvIHByaXZhdGUgZmllbGRcIik7XG4gIHNldHRlciA/IHNldHRlci5jYWxsKG9iaiwgdmFsdWUpIDogbWVtYmVyLnNldChvYmosIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQgeyByZWdpc3RlcldhbGxldCB9IGZyb20gXCJAYXB0b3MtbGFicy93YWxsZXQtc3RhbmRhcmRcIjtcblxuLy8gc3JjL0FwdG9zQ29ubmVjdEFwcGxlV2FsbGV0LnRzXG5pbXBvcnQge1xuICBBcHRvc0Nvbm5lY3ROYW1lc3BhY2UsXG4gIEFwdG9zRGlzY29ubmVjdE5hbWVzcGFjZSxcbiAgQXB0b3NHZXRBY2NvdW50TmFtZXNwYWNlLFxuICBBcHRvc0dldE5ldHdvcmtOYW1lc3BhY2UsXG4gIEFwdG9zT25BY2NvdW50Q2hhbmdlTmFtZXNwYWNlLFxuICBBcHRvc09uTmV0d29ya0NoYW5nZU5hbWVzcGFjZSxcbiAgQXB0b3NTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25OYW1lc3BhY2UsXG4gIEFwdG9zU2lnbkluTmFtZXNwYWNlLFxuICBBcHRvc1NpZ25NZXNzYWdlTmFtZXNwYWNlLFxuICBBcHRvc1NpZ25UcmFuc2FjdGlvbk5hbWVzcGFjZVxufSBmcm9tIFwiQGFwdG9zLWxhYnMvd2FsbGV0LXN0YW5kYXJkXCI7XG5cbi8vIHNyYy9BcHRvc0Nvbm5lY3RXYWxsZXQudHNcbmltcG9ydCB7XG4gIHNoZWxieW5ldFxufSBmcm9tIFwiQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFwaVwiO1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3MyLFxuICBBcHRvcyxcbiAgQXB0b3NDb25maWcsXG4gIEVkMjU1MTlQcml2YXRlS2V5LFxuICBNdWx0aUFnZW50VHJhbnNhY3Rpb24sXG4gIE5ldHdvcmsgYXMgTmV0d29yazIsXG4gIE5ldHdvcmtUb05vZGVBUEksXG4gIFNpbXBsZVRyYW5zYWN0aW9uXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7XG4gIEFjY291bnRJbmZvIGFzIEFjY291bnRJbmZvMyxcbiAgQVBUT1NfQ0hBSU5TIGFzIEFQVE9TX0NIQUlOUzIsXG4gIEFwdG9zV2FsbGV0RXJyb3IsXG4gIEFwdG9zV2FsbGV0RXJyb3JDb2RlLFxuICBVc2VyUmVzcG9uc2VTdGF0dXMgYXMgVXNlclJlc3BvbnNlU3RhdHVzMlxufSBmcm9tIFwiQGFwdG9zLWxhYnMvd2FsbGV0LXN0YW5kYXJkXCI7XG5pbXBvcnQge1xuICBkZXNlcmlhbGl6ZVB1YmxpY0tleUI2NCxcbiAgc2VyaWFsaXplUHVibGljS2V5QjY0XG59IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9jcnlwdG9cIjtcbmltcG9ydCB7IEFDRGFwcENsaWVudCB9IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9kYXBwLXNka1wiO1xuXG4vLyBzcmMvQXB0b3NDb25uZWN0QWNjb3VudC50c1xuaW1wb3J0IHtcbiAgQW55UHVibGljS2V5LFxuICBFZDI1NTE5UHVibGljS2V5LFxuICBNdWx0aUVkMjU1MTlQdWJsaWNLZXksXG4gIE11bHRpS2V5LFxuICBTaWduaW5nU2NoZW1lXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7XG4gIEFQVE9TX0NIQUlOU1xufSBmcm9tIFwiQGFwdG9zLWxhYnMvd2FsbGV0LXN0YW5kYXJkXCI7XG52YXIgX2FkZHJlc3MsIF9wdWJsaWNLZXk7XG52YXIgQXB0b3NDb25uZWN0QWNjb3VudCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoeyBhZGRyZXNzLCBhbnNOYW1lLCBwdWJsaWNLZXkgfSkge1xuICAgIC8vIHJlZ2lvbiBBcHRvc1dhbGxldEFjY291bnRcbiAgICB0aGlzLmNoYWlucyA9IEFQVE9TX0NIQUlOUztcbiAgICB0aGlzLmZlYXR1cmVzID0gW107XG4gICAgLy8gZW5kcmVnaW9uXG4gICAgLy8gcmVnaW9uIFBldHJhQWNjb3VudFxuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfYWRkcmVzcywgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3B1YmxpY0tleSwgdm9pZCAwKTtcbiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3B1YmxpY0tleSwgcHVibGljS2V5KTtcbiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2FkZHJlc3MsIGFkZHJlc3MpO1xuICAgIHRoaXMubGFiZWwgPSBhbnNOYW1lO1xuICB9XG4gIGdldCBhZGRyZXNzKCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX2FkZHJlc3MpLnRvU3RyaW5nKCk7XG4gIH1cbiAgZ2V0IHB1YmxpY0tleSgpIHtcbiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9wdWJsaWNLZXkpLnRvVWludDhBcnJheSgpO1xuICB9XG4gIGdldCBzaWduaW5nU2NoZW1lKCkge1xuICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX3B1YmxpY0tleSkgaW5zdGFuY2VvZiBFZDI1NTE5UHVibGljS2V5KSB7XG4gICAgICByZXR1cm4gU2lnbmluZ1NjaGVtZS5FZDI1NTE5O1xuICAgIH1cbiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9wdWJsaWNLZXkpIGluc3RhbmNlb2YgTXVsdGlFZDI1NTE5UHVibGljS2V5KSB7XG4gICAgICByZXR1cm4gU2lnbmluZ1NjaGVtZS5NdWx0aUVkMjU1MTk7XG4gICAgfVxuICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX3B1YmxpY0tleSkgaW5zdGFuY2VvZiBBbnlQdWJsaWNLZXkpIHtcbiAgICAgIHJldHVybiBTaWduaW5nU2NoZW1lLlNpbmdsZUtleTtcbiAgICB9XG4gICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfcHVibGljS2V5KSBpbnN0YW5jZW9mIE11bHRpS2V5KSB7XG4gICAgICByZXR1cm4gU2lnbmluZ1NjaGVtZS5NdWx0aUtleTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgcHVibGljIGtleSB0eXBlXCIpO1xuICB9XG4gIC8vIGVuZHJlZ2lvblxufTtcbl9hZGRyZXNzID0gbmV3IFdlYWtNYXAoKTtcbl9wdWJsaWNLZXkgPSBuZXcgV2Vha01hcCgpO1xuXG4vLyBzcmMvaGVscGVycy50c1xuaW1wb3J0IHsgTmV0d29yaywgTmV0d29ya1RvQ2hhaW5JZCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7XG4gIEFjY291bnRJbmZvIGFzIEFjY291bnRJbmZvMixcbiAgVXNlclJlc3BvbnNlU3RhdHVzXG59IGZyb20gXCJAYXB0b3MtbGFicy93YWxsZXQtc3RhbmRhcmRcIjtcbmZ1bmN0aW9uIGN1c3RvbUFjY291bnRUb1N0YW5kYXJkQWNjb3VudCh7XG4gIGFkZHJlc3MsXG4gIG5hbWUsXG4gIHB1YmxpY0tleVxufSkge1xuICByZXR1cm4gbmV3IEFjY291bnRJbmZvMih7XG4gICAgYWRkcmVzcyxcbiAgICBhbnNOYW1lOiBuYW1lLFxuICAgIHB1YmxpY0tleVxuICB9KTtcbn1cbmZ1bmN0aW9uIHVud3JhcFVzZXJSZXNwb25zZShyZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJkaXNtaXNzZWRcIikge1xuICAgIHJldHVybiB7IHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzLlJFSkVDVEVEIH07XG4gIH1cbiAgcmV0dXJuIHsgYXJnczogY2FsbGJhY2socmVzcG9uc2UuYXJncyksIHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzLkFQUFJPVkVEIH07XG59XG5mdW5jdGlvbiBuZXR3b3JrVG9DaGFpbklkKG5ldHdvcmspIHtcbiAgc3dpdGNoIChuZXR3b3JrKSB7XG4gICAgY2FzZSBOZXR3b3JrLk1BSU5ORVQ6XG4gICAgICByZXR1cm4gTmV0d29ya1RvQ2hhaW5JZC5tYWlubmV0O1xuICAgIGNhc2UgTmV0d29yay5URVNUTkVUOlxuICAgICAgcmV0dXJuIE5ldHdvcmtUb0NoYWluSWQudGVzdG5ldDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxufVxuXG4vLyBzcmMvQXB0b3NDb25uZWN0V2FsbGV0LnRzXG52YXIgX0FwdG9zQ29ubmVjdFdhbGxldCA9IGNsYXNzIF9BcHRvc0Nvbm5lY3RXYWxsZXQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYXB0b3NDbGllbnRDb25maWcsXG4gICAgY2xhaW1TZWNyZXRLZXksXG4gICAgbmV0d29yayA9IE5ldHdvcmsyLk1BSU5ORVQsXG4gICAgcHJlZmVycmVkV2FsbGV0TmFtZSxcbiAgICAuLi5jbGllbnRDb25maWdcbiAgfSkge1xuICAgIC8vIGVuZHJlZ2lvblxuICAgIC8vIHJlZ2lvbiBBcHRvc1dhbGxldFxuICAgIHRoaXMudmVyc2lvbiA9IFwiMS4wLjBcIjtcbiAgICB0aGlzLmNoYWlucyA9IEFQVE9TX0NIQUlOUzI7XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgQUNEYXBwQ2xpZW50KGNsaWVudENvbmZpZyk7XG4gICAgaWYgKCFOZXR3b3JrVG9Ob2RlQVBJW25ldHdvcmtdICYmIG5ldHdvcmsgIT09IHNoZWxieW5ldC5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXR3b3JrIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgfVxuICAgIHRoaXMubmV0d29yayA9IG5ldHdvcms7XG4gICAgY29uc3QgYXB0b3NTZXR0aW5ncyA9IG5ldHdvcmsgIT09IHNoZWxieW5ldC5uYW1lID8geyBuZXR3b3JrIH0gOiB7XG4gICAgICBmdWxsbm9kZTogc2hlbGJ5bmV0Lm5vZGVVcmwsXG4gICAgICBpbmRleGVyOiBzaGVsYnluZXQuaW5kZXhlclVybCxcbiAgICAgIG5ldHdvcms6IE5ldHdvcmsyLkNVU1RPTVxuICAgIH07XG4gICAgY29uc3QgYXB0b3NDb25maWcgPSBuZXcgQXB0b3NDb25maWcoe1xuICAgICAgLi4uYXB0b3NTZXR0aW5ncyxcbiAgICAgIC4uLmFwdG9zQ2xpZW50Q29uZmlnXG4gICAgfSk7XG4gICAgdGhpcy5hcHRvc0NsaWVudCA9IG5ldyBBcHRvcyhhcHRvc0NvbmZpZyk7XG4gICAgdGhpcy5wcmVmZXJyZWRXYWxsZXROYW1lID0gcHJlZmVycmVkV2FsbGV0TmFtZTtcbiAgICBpZiAoY2xhaW1TZWNyZXRLZXkpIHtcbiAgICAgIGlmIChuZXR3b3JrID09PSBzaGVsYnluZXQubmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaGVsYnluZXQgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xhaW1PcHRpb25zID0ge1xuICAgICAgICBuZXR3b3JrLFxuICAgICAgICBzZWNyZXRLZXk6IG5ldyBFZDI1NTE5UHJpdmF0ZUtleShjbGFpbVNlY3JldEtleSlcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuY2hhaW5JZFByb21pc2UgPSB0aGlzLmFwdG9zQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICB0aGlzLmNoYWluSWRQcm9taXNlLnRoZW4oKGNoYWluSWQpID0+IHtcbiAgICAgIHRoaXMuY2hhaW5JZCA9IGNoYWluSWQ7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIGdldCBjb25uZWN0ZWRBY2NvdW50KCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgIF9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXlcbiAgICApO1xuICAgIGlmICghc2VyaWFsaXplZCkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYWRkcmVzcywgcHVibGljS2V5IH0gPSBKU09OLnBhcnNlKFxuICAgICAgICBzZXJpYWxpemVkXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBBY2NvdW50SW5mbzMoe1xuICAgICAgICBhZGRyZXNzOiBBY2NvdW50QWRkcmVzczIuZnJvbShhZGRyZXNzKSxcbiAgICAgICAgcHVibGljS2V5OiBkZXNlcmlhbGl6ZVB1YmxpY0tleUI2NChwdWJsaWNLZXkpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChfZXJyKSB7XG4gICAgICB0aGlzLmNvbm5lY3RlZEFjY291bnQgPSB2b2lkIDA7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgc2V0IGNvbm5lY3RlZEFjY291bnQodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHtcbiAgICAgICAgYWRkcmVzczogdmFsdWUuYWRkcmVzcy50b1N0cmluZygpLFxuICAgICAgICBwdWJsaWNLZXk6IHNlcmlhbGl6ZVB1YmxpY0tleUI2NCh2YWx1ZS5wdWJsaWNLZXkpXG4gICAgICB9O1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIF9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWQpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShfQXB0b3NDb25uZWN0V2FsbGV0LmNvbm5lY3RlZEFjY291bnRTdG9yYWdlS2V5KTtcbiAgICB9XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgZ2V0IGFjY291bnRzKCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICByZXR1cm4gY29ubmVjdGVkQWNjb3VudCA/IFtuZXcgQXB0b3NDb25uZWN0QWNjb3VudChjb25uZWN0ZWRBY2NvdW50KV0gOiBbXTtcbiAgfVxuICBhc3luYyBjb25uZWN0KCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoY29ubmVjdGVkQWNjb3VudCAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4geyBhcmdzOiBjb25uZWN0ZWRBY2NvdW50LCBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuQVBQUk9WRUQgfTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5jb25uZWN0KHtcbiAgICAgIGNsYWltT3B0aW9uczogdGhpcy5jbGFpbU9wdGlvbnMsXG4gICAgICBwcmVmZXJyZWRXYWxsZXROYW1lOiB0aGlzLnByZWZlcnJlZFdhbGxldE5hbWVcbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgY29uc3QgbmV3Q29ubmVjdGVkQWNjb3VudCA9IGN1c3RvbUFjY291bnRUb1N0YW5kYXJkQWNjb3VudChcbiAgICAgIHJlc3BvbnNlLmFyZ3MuYWNjb3VudFxuICAgICk7XG4gICAgX0FwdG9zQ29ubmVjdFdhbGxldC5jb25uZWN0ZWRBY2NvdW50ID0gbmV3Q29ubmVjdGVkQWNjb3VudDtcbiAgICByZXR1cm4ge1xuICAgICAgYXJnczogbmV3Q29ubmVjdGVkQWNjb3VudCxcbiAgICAgIHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzMi5BUFBST1ZFRFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZGlzY29ubmVjdCgpIHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZEFjY291bnQgfSA9IF9BcHRvc0Nvbm5lY3RXYWxsZXQ7XG4gICAgaWYgKGNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmRpc2Nvbm5lY3QoY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzKTtcbiAgICAgIF9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudCA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2lnbkluKGlucHV0KSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zaWduSW4oe1xuICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrLFxuICAgICAgLi4uaW5wdXRcbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2UuYXJncztcbiAgICBfQXB0b3NDb25uZWN0V2FsbGV0LmNvbm5lY3RlZEFjY291bnQgPSBvdXRwdXQuYWNjb3VudDtcbiAgICByZXR1cm4geyBhcmdzOiBvdXRwdXQsIHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzMi5BUFBST1ZFRCB9O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIGFzeW5jIGdldEFjY291bnQoKSB7XG4gICAgY29uc3QgeyBjb25uZWN0ZWRBY2NvdW50IH0gPSBfQXB0b3NDb25uZWN0V2FsbGV0O1xuICAgIGlmICghY29ubmVjdGVkQWNjb3VudCkge1xuICAgICAgdGhyb3cgbmV3IEFwdG9zV2FsbGV0RXJyb3IoQXB0b3NXYWxsZXRFcnJvckNvZGUuVW5hdXRob3JpemVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1c3RvbUFjY291bnRUb1N0YW5kYXJkQWNjb3VudChjb25uZWN0ZWRBY2NvdW50KTtcbiAgfVxuICBhc3luYyBnZXROZXR3b3JrKCkge1xuICAgIGNvbnN0IGNoYWluSWQgPSBhd2FpdCB0aGlzLmNoYWluSWRQcm9taXNlO1xuICAgIGNvbnN0IGlzU2hlbGJ5bmV0ID0gdGhpcy5uZXR3b3JrID09PSBzaGVsYnluZXQubmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhaW5JZCxcbiAgICAgIG5hbWU6IGlzU2hlbGJ5bmV0ID8gTmV0d29yazIuQ1VTVE9NIDogdGhpcy5uZXR3b3JrLFxuICAgICAgdXJsOiBpc1NoZWxieW5ldCA/IHNoZWxieW5ldC5ub2RlVXJsIDogTmV0d29ya1RvTm9kZUFQSVt0aGlzLm5ldHdvcmtdXG4gICAgfTtcbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZShpbnB1dCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yKEFwdG9zV2FsbGV0RXJyb3JDb2RlLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IGNoYWluSWQgPSBuZXR3b3JrVG9DaGFpbklkKHRoaXMubmV0d29yaykgPz8gdGhpcy5jaGFpbklkID8/IGF3YWl0IHRoaXMuY2hhaW5JZFByb21pc2U7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBub25jZSB9ID0gaW5wdXQ7XG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IG1lc3NhZ2VCeXRlcyA9IGVuY29kZXIuZW5jb2RlKG1lc3NhZ2UpO1xuICAgIGNvbnN0IG5vbmNlQnl0ZXMgPSBlbmNvZGVyLmVuY29kZShub25jZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zaWduTWVzc2FnZSh7XG4gICAgICBjaGFpbklkLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZUJ5dGVzLFxuICAgICAgbm9uY2U6IG5vbmNlQnl0ZXMsXG4gICAgICBzaWduZXJBZGRyZXNzOiBjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3NcbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgY29uc3QgeyBmdWxsTWVzc2FnZSwgc2lnbmF0dXJlIH0gPSByZXNwb25zZS5hcmdzO1xuICAgIGNvbnN0IGV4dHJhUmVzcG9uc2VBcmdzID0ge1xuICAgICAgYWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICBhcHBsaWNhdGlvbjogdGhpcy5jbGllbnQuZGFwcEluZm8uZG9tYWluLFxuICAgICAgY2hhaW5JZCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBub25jZSxcbiAgICAgIHByZWZpeDogXCJBUFRPU1wiXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgYXJnczoge1xuICAgICAgICBmdWxsTWVzc2FnZSxcbiAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAuLi5leHRyYVJlc3BvbnNlQXJnc1xuICAgICAgfSxcbiAgICAgIHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzMi5BUFBST1ZFRFxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKHR4bk9yQXJncywgX2FzRmVlUGF5ZXIpIHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZEFjY291bnQgfSA9IF9BcHRvc0Nvbm5lY3RXYWxsZXQ7XG4gICAgaWYgKCFjb25uZWN0ZWRBY2NvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgQXB0b3NXYWxsZXRFcnJvcihBcHRvc1dhbGxldEVycm9yQ29kZS5VbmF1dGhvcml6ZWQpO1xuICAgIH1cbiAgICBpZiAoXCJiY3NUb0J5dGVzXCIgaW4gdHhuT3JBcmdzKSB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHR4bk9yQXJncztcbiAgICAgIGNvbnN0IGZlZVBheWVyID0gdHJhbnNhY3Rpb24uZmVlUGF5ZXJBZGRyZXNzID8geyBhZGRyZXNzOiB0cmFuc2FjdGlvbi5mZWVQYXllckFkZHJlc3MgfSA6IHZvaWQgMDtcbiAgICAgIGNvbnN0IHNlY29uZGFyeVNpZ25lcnMgPSB0cmFuc2FjdGlvbi5zZWNvbmRhcnlTaWduZXJBZGRyZXNzZXM/Lm1hcChcbiAgICAgICAgKGFkZHJlc3MpID0+ICh7IGFkZHJlc3MgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCByZXNwb25zZTIgPSBhd2FpdCB0aGlzLmNsaWVudC5zaWduVHJhbnNhY3Rpb24oe1xuICAgICAgICBmZWVQYXllcixcbiAgICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrLFxuICAgICAgICBzZWNvbmRhcnlTaWduZXJzLFxuICAgICAgICBzaWduZXJBZGRyZXNzOiBjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3MsXG4gICAgICAgIHRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvbi5yYXdUcmFuc2FjdGlvblxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdW53cmFwVXNlclJlc3BvbnNlKHJlc3BvbnNlMiwgKGFyZ3MpID0+IGFyZ3MuYXV0aGVudGljYXRvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3RBcmdzID0gdHhuT3JBcmdzO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnblRyYW5zYWN0aW9uKHtcbiAgICAgIG5ldHdvcms6IHRoaXMubmV0d29yayxcbiAgICAgIC4uLnJlcXVlc3RBcmdzLFxuICAgICAgc2lnbmVyQWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzXG4gICAgfSk7XG4gICAgcmV0dXJuIHVud3JhcFVzZXJSZXNwb25zZShyZXNwb25zZSwgKHJlc3BvbnNlQXJncykgPT4ge1xuICAgICAgY29uc3QgeyBhdXRoZW50aWNhdG9yLCByYXdUcmFuc2FjdGlvbiB9ID0gcmVzcG9uc2VBcmdzO1xuICAgICAgaWYgKCFyYXdUcmFuc2FjdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCByYXcgdHJhbnNhY3Rpb24gaW4gcmVzcG9uc2UgYXJnc1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlY29uZGFyeVNpZ25lcnMgPSByZXF1ZXN0QXJncy5zZWNvbmRhcnlTaWduZXJzID8/IFtdO1xuICAgICAgbGV0IHRyYW5zYWN0aW9uO1xuICAgICAgaWYgKHNlY29uZGFyeVNpZ25lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICB0cmFuc2FjdGlvbiA9IG5ldyBNdWx0aUFnZW50VHJhbnNhY3Rpb24oXG4gICAgICAgICAgcmF3VHJhbnNhY3Rpb24sXG4gICAgICAgICAgc2Vjb25kYXJ5U2lnbmVycy5tYXAoKHMpID0+IHMuYWRkcmVzcyksXG4gICAgICAgICAgcmVxdWVzdEFyZ3MuZmVlUGF5ZXI/LmFkZHJlc3NcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zYWN0aW9uID0gbmV3IFNpbXBsZVRyYW5zYWN0aW9uKFxuICAgICAgICAgIHJhd1RyYW5zYWN0aW9uLFxuICAgICAgICAgIHJlcXVlc3RBcmdzLmZlZVBheWVyPy5hZGRyZXNzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhdXRoZW50aWNhdG9yLFxuICAgICAgICByYXdUcmFuc2FjdGlvbjogdHJhbnNhY3Rpb25cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKGFyZ3MpIHtcbiAgICBjb25zdCB7IGdhc1VuaXRQcmljZSwgbWF4R2FzQW1vdW50LCBwYXlsb2FkIH0gPSBhcmdzO1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yKEFwdG9zV2FsbGV0RXJyb3JDb2RlLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKHtcbiAgICAgIGdhc1VuaXRQcmljZSxcbiAgICAgIG1heEdhc0Ftb3VudCxcbiAgICAgIG5ldHdvcms6IHRoaXMubmV0d29yayxcbiAgICAgIHBheWxvYWQsXG4gICAgICBzaWduZXJBZGRyZXNzOiBjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3NcbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHsgaGFzaDogcmVzcG9uc2UuYXJncy50eG5IYXNoIH0sXG4gICAgICBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1czIuQVBQUk9WRURcbiAgICB9O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIGFzeW5jIG9uQWNjb3VudENoYW5nZShfY2FsbGJhY2spIHtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBhc3luYyBvbk5ldHdvcmtDaGFuZ2UoX2NhbGxiYWNrKSB7XG4gIH1cbiAgLy8gZW5kcmVnaW9uXG59O1xuLy8gcmVnaW9uIGNvbm5lY3RlZEFjY291bnRcbl9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkgPSBcIkBhcHRvcy1jb25uZWN0L2Nvbm5lY3RlZEFjY291bnRcIjtcbnZhciBBcHRvc0Nvbm5lY3RXYWxsZXQgPSBfQXB0b3NDb25uZWN0V2FsbGV0O1xuXG4vLyBzcmMvY29uZmlnLnRzXG52YXIgd2FsbGV0TWV0YWRhdGEgPSB7XG4gIGFwcGxlOiB7XG4gICAgaWNvbjogKFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgIFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTWpRaUlHaGxhV2RvZEQwaU1qUWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0S0lDQWdJRHh6ZEhsc1pUNEtJQ0FnSUNBZ0lDQndZWFJvSUhzS0lDQWdJQ0FnSUNBZ0lDQWdabWxzYkRvZ1lteGhZMnM3Q2lBZ0lDQWdJQ0FnZlFvS0lDQWdJQ0FnSUNCQWJXVmthV0VnS0hCeVpXWmxjbk10WTI5c2IzSXRjMk5vWlcxbE9pQmtZWEpyS1NCN0NpQWdJQ0FnSUNBZ0lDQWdJSEJoZEdnZ2V3b2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1ptbHNiRG9nZDJocGRHVTdDaUFnSUNBZ0lDQWdJQ0FnSUgwS0lDQWdJQ0FnSUNCOUNpQWdJQ0E4TDNOMGVXeGxQZ29nSUNBZ1BIQmhkR2dLSUNBZ0lDQWdJQ0JrUFNKTk1qQXVNemt6TWlBNExqRTRNalF5UXpJd0xqSTFOemdnT0M0eU9UQTBNeUF4Tnk0NE5qZ2dPUzQyTnpVek55QXhOeTQ0TmpnZ01USXVOelUwT1VNeE55NDROamdnTVRZdU16RTJPQ0F5TUM0NU1Ea2dNVGN1TlRjM0lESXhJREUzTGpZd09ESkRNakF1T1RnMklERTNMalk0TlNBeU1DNDFNVFk1SURFNUxqTXpNemtnTVRrdU16azJOaUF5TVM0d01UUXhRekU0TGpNNU56Y2dNakl1TkRreU5pQXhOeTR6TlRRMUlESXpMamsyT0RnZ01UVXVOelkzTlNBeU15NDVOamc0UXpFMExqRTRNRFFnTWpNdU9UWTRPQ0F4TXk0M056SWdNak11TURJd055QXhNUzQ1TXprNUlESXpMakF5TURkRE1UQXVNVFUwTlNBeU15NHdNakEzSURrdU5URTVOeklnTWpRZ09DNHdOamd3TlNBeU5FTTJMall4TmpNNUlESTBJRFV1TmpBek5Ea2dNakl1TmpNeE9TQTBMalF6T0RnNUlESXdMamsxTVRkRE15NHdPRGs1TWlBeE9DNDVOemczSURJZ01UVXVPVEV6TmlBeUlERXpMakF3TkRWRE1pQTRMak16T0RReklEUXVPVFV3TURFZ05TNDROak0zT1NBM0xqZzFNek0wSURVdU9EWXpOemxET1M0ek9UWXdNaUExTGpnMk16YzVJREV3TGpZNE1pQTJMamt3TlRRNUlERXhMalkxTURVZ05pNDVNRFUwT1VNeE1pNDFOekkwSURZdU9UQTFORGtnTVRRdU1ERXdNU0ExTGpnd01UTTRJREUxTGpjMk5URWdOUzQ0TURFek9FTXhOaTQwTXpBeklEVXVPREF4TXpnZ01UZ3VPREl3TWlBMUxqZzJNemM1SURJd0xqTTVNeklnT0M0eE9ESTBNbHBOTVRRdU9UTXhPU0F6TGpneU5UazRRekUxTGpZMU56Z2dNaTQ1TkRBeU9TQXhOaTR4TnpFeUlERXVOekV4TXpjZ01UWXVNVGN4TWlBd0xqUTRNalEwT0VNeE5pNHhOekV5SURBdU16RXlNRE14SURFMkxqRTFOeklnTUM0eE16a3lNVFFnTVRZdU1USTJPU0F3UXpFMExqazBOaUF3TGpBME5UWXdORFlnTVRNdU5UUXhJREF1T0RBNE9EZ3hJREV5TGpZNU16Z2dNUzQ0TVRrek9FTXhNaTR3TWpnMklESXVOVGszTURZZ01URXVOREEzT0NBekxqZ3lOVGs0SURFeExqUXdOemdnTlM0d056RTNNVU14TVM0ME1EYzRJRFV1TWpVNE9UTWdNVEV1TkRNNE1pQTFMalEwTmpFMElERXhMalExTWpJZ05TNDFNRFl4TlVNeE1TNDFNalk0SURVdU5USXdOVFVnTVRFdU5qUTRNaUExTGpVek56TTFJREV4TGpjMk9UWWdOUzQxTXpjek5VTXhNaTQ0TWpreElEVXVOVE0zTXpVZ01UUXVNVFl4T0NBMExqZ3dOelk0SURFMExqa3pNVGtnTXk0NE1qVTVPRm9pSUM4K0Nqd3ZjM1puUGc9PVwiXG4gICAgKSxcbiAgICBuYW1lOiBcIkNvbnRpbnVlIHdpdGggQXBwbGVcIixcbiAgICB1cmw6IFwiaHR0cHM6Ly93ZWIucGV0cmEuYXBwXCJcbiAgfSxcbiAgZ2VuZXJpYzoge1xuICAgIGljb246IChcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBSUFBQUFDQUNBWUFBQUREUG1ITEFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFlTVNVUkJWSGdCN1owOWJGTlhGTWZQdFFLVlVnWlhBb21KR29rRkZsSzFJdzFtS2t5RmxxRU5WS1JUT3lBUk5xUldJa2hVNmdoU2wwNTFwWloyNkVlWXlvWkJqSzF3RjdvZzFlbUVWSVlNRUtrQmNudit0bDlpSE1mMnM5Kzk3OXgzejArSzdEaDJKTC8vLzN6Y2ovZWVvUXlZcjlyeUd0RkpRM1RZV3Fyd1N6UDh2R3o1aDVTc2FQSXhiWktoeGpyUm5WZUlHclc2YWRLRUdCb1RpUDZNSDhqU3V5eDBsWlE4YUxDQzEzY1MxY2MxUTJvRHRLSjluUzRZUXdzYTRYSmdJV3M3REYxSmE0UlVCcGlidFpkVmVPRllXcnh4MTF3WjllMGpHWUNqdnJKbTZWZCtPa05LQ0RSM0dqbzJTallvRFh2RG1WbDc3cG1sKzZUaWh3UUM5djZIVlh0eTJCc0hHZ0FwM3hxcWFjb1BrckxockEwTkI3MXAyeExRK3FDaFJWTENaMEJmME5jQVNCMm1YZk9WZ3NCNnpuOS8xM3k3NWZYZUY5RHdvZVpyMmk4Y0s5d1l2dEhiR0c3cEFiaDV1SzNpRjVMeVdwK3MvcElCT2cxRGhaU2lNak5YdFl2ZEwyeVVnTTVZLzI5U2lnNUt3WDR1QlN2NFpTTUQ4THorWlZKaUFBdDNDOGt2clF5ZzBSOGRHMW1nbFFIV2REVXZOc3IvWVNXWE9pV0F4NGdYU0ltS0VpL2o0OUZvK284WExnT3ZsWjdySWsrMFlCZFhhVjNyZjh6TWxMaitIeVlsVmlwVHZOeGI0ZFdpYU5tOWwralZYVVRUL0xObjc5YS8vL3RvOC9IeEl5b1dIUHhUWk9PWStvWEkrdzRRdmQ3MUE4RWhmQnFXSDdhTjhLRFJmdjVYZzBLbWJPYU8yc0xHLzBGdWJ3L050QjhQT21wMVY1OFEvWDZ2YllTN3R5ZzRDbWVBUlBUanA5Tkg5NlFrWnZpbHRsazZwRk1ZQTd4NWhPakVhWGVSbmhaa2hKOXI4a3RFMEFaQVhVZWt2MzI4ZndNbkFaUUZ5UmtoV0FQTXN1anZ6Y3NWdmhlWUFCbEJHc0VaQUNuKy9YazVxVDROeUFKZkxNaktCc0VZQU9rZUVZK1VIenJmZlVYMDIwOGtnaWtLQUl6WkwxNE5KOTBQNCt6NTlnaEZRa2tRYndCRS9FZm5xWEFnbThIWVgzOUo5UFFKNWNiUVU4UHlBaW4vMDB2RkZEOEJROWZQcnJXL2ExNklOQUJTUFE0TWhuZEZCMWtBM3pVdnhCa2dFUjhISmhid1hUKzVSTGtneWdDSitFVnA5dEtBZVEwTWIzMGp4Z0F4aTUrQXh2Q3RJK1FWRVFaUThUZEJLZkI1SEhJM0FEcmdJbzN4SndYekF6NzdnZHdOa0l5SGxVMHd6WDNDMDR4bnJnWkEwMU9FcVYwWElEQjh6QS9rWmdDa2ZIeEpwVC9UdS93Y24xd01BR2ZuT2ZrUkNzaU9ybnVqWEF3UTBqcCszcmpPQXQ0TkFPRzE3bzhPNWdWYzlnTGVEYUNwUHgzb0JkNXhHREJlRFRBcmVPK2VaRTRVeFFEYTlZOEhzb0NyTFhEZURLRFJQeG11MWdpOEdVQ2pmekptSGUyTjhHSUFqZjdKY1ZVR3ZPd0o5Qlg5T0RXcitaQkVVamt3K2FscVdEUEora3dqNXdhQWEzMUZQODdMd3laTGFTQURIc3BnaFEvblBON0tlRHU1OHhJd0c4Ryt2a0ZrdWQxcm40TlZVK2NHQ1BFTW5xeUErSjluT1BHMVoyLzJzNEpPRGVBei9Vc2pFVC9yVTlSM1ozdzhuUm9nMXZUdlNueVFkUmx3YW9COUVlNzBjU2srQ0tZRUlQVlhJak9BYS9IQmRDZ0dpQzM2ZllqdkFtY0dpS243RDFWODRNd0FzYVQva01VSHpnd1F3MWJ2ME1VSFRnd3d2U3ZzZ3pJS1JSQWZPREZBMFNkLzhoUS82K3NMT2NzQVJTWHZ5SDhjZ2dHS21nRWtwUDNWakM4bm94bGdSS1NJdjV6eGZnYzF3QWhJYWZoY2JIWVJlNUVvS1VqcTl2OVJBL2hGMmxBUE81NnlSZzJ3RFJMSCtab0JQQ0ZSL0QvdXVibWdwQnFnQjZremZDN1NQMUFEZENGVmZFeit1TG9kalJxZ2crUzUvUWNPN3pxaUJpRDVDenU0MllRcm9qZUFkUEdSK2wzZVlDSnFBNFN3cE9zeStrRzBCZ2hCZk5mUkQ2STBRQWppby9OM0hmMGdPZ09Fc3BNSHQ1UHhjWE9wNkF5QUpkWFZIRy9STWdwSS9iNXVReHVkQVJCVlZ4ZmszZ25jVitwUGlMSUhrR29DWkthcm51OHJHTzBvUUtJSmZOWDlicUtlQjVCa0FvaWY5ZFUvUmlINm1VQUpKb0Q0UHV0K043b1dRUG1hSUUveGdScWdReDRteUZ0OG9BYm93cWNKSklnUDFBQTkrRENCRlBHQkdxQVBMazBnU1h5Z0J0Z0dGeWFRSmo1UUF3d2dTeE5JRkIrb0FZYVFoUW1raWcvVUFDTXdpUWtraXcvVUFDTXlqZ21raXcvVUFDbElZNElReEFkcWdKU01Zb0pReEFkcWdERVlaSUtReEFkcWdESHBaNExReEFkbTdxaTFsREhZZUpuSGRRSWhTdGEzVkJrR3JvZUVUYVozYm9VblBuQmlnTmpBRmJ5ZkN0OW91aDFhQWpJZ1ZQRkJ5UkN0a0JJdEpXdlVBQkhUUkFudzNEWXBVakNtYllCbFVxS0V1LzgvTlFORURJdGZMKzBrV2lJbFNwNXo4SmRxZGJQQ0k0RTZLVkhCbWpkK3JKdG1xZlBiVFZLaWdrZC8xL0hZTXNBT29wck9COFRGZWlmcnR3eUFNcEE0UW9tQ0d0SS9ubXhNQlhNemVFMnpRQnlzRzdxU1BOOHdnR2FCU0dEeGsraHYvOXJEbWFQMlBrOFF6SkJTUkpvMzdwajkzUzlzV1ExOFllaVVsb0xpQVUwNTlSL3JmWDJMQVpBZXVCUmNKS1ZRc1BnZmQ2ZitoTDc3QVc3VVRZMjZHZ1VsY0ZqTEgrcG1xZitmQmpCWHRZdThZbkNabEhCaDhUbWdGN2YvOHhET1Z1MUphK2tiYmd6THBBUURhajVLZVN1YkQzN2ZjRDZvMmtySjBtMStXaUVsQkJwYzgwLzFxL205akdTQUJDMEpzdWxFL2ZWQktiL1BaOUtCYk1BZldqU1d6cEVpZ2tUNFZaN05YZUlKdlpTZkhZOVdXU0NxOGorNHdEMkNUaHpsZ0RHdEJaMmJUM2tpTjYzd0cvK0RNZ0JtbU9MWnd4ZHNDRGJGWVl0ZXdXcS9rQldkQ0lmQURUNjJ5MWpMNTJoZkdsZjBidjRINGVtUWgyalR6MXNBQUFBQVNVVk9SSzVDWUlJPVwiXG4gICAgKSxcbiAgICBuYW1lOiBcIlBldHJhIFdlYlwiLFxuICAgIHVybDogXCJodHRwczovL3dlYi5wZXRyYS5hcHBcIlxuICB9LFxuICBnb29nbGU6IHtcbiAgICBpY29uOiAoXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuICAgICAgXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNalFpSUdobGFXZG9kRDBpTWpRaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSWdabWxzYkQwaWJtOXVaU0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JaUJqYkdGemN6MGlhRjh5TUNCM1h6SXdJajQ4Y0dGMGFDQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJR05zYVhBdGNuVnNaVDBpWlhabGJtOWtaQ0lnWkQwaVRUSXpMalUwSURFeUxqYzJNVE5ETWpNdU5UUWdNVEV1T1RRMU9TQXlNeTQwTmpZNElERXhMakUyTVRnZ01qTXVNek13T1NBeE1DNDBNRGt4U0RFeUxqVldNVFF1T0RVM05VZ3hPQzQyT0RreFF6RTRMalF5TWpVZ01UWXVNamsxSURFM0xqWXhNak1nTVRjdU5URXlPU0F4Tmk0ek9UUXpJREU0TGpNeU9EUldNakV1TWpFek9FZ3lNQzR4TVRBNVF6SXlMakk0TlRVZ01Ua3VNakV4T0NBeU15NDFOQ0F4Tmk0eU5qTTJJREl6TGpVMElERXlMamMyTVROYUlpQm1hV3hzUFNJak5ESTROVVkwSWo0OEwzQmhkR2crUEhCaGRHZ2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaUJqYkdsd0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdROUlrMHhNaTQwT1RrMUlESXpMams1T1RoRE1UVXVOakEwTlNBeU15NDVPVGs0SURFNExqSXdOemNnTWpJdU9UY2dNakF1TVRFd05DQXlNUzR5TVRNM1RERTJMak01TXpnZ01UZ3VNekk0TWtNeE5TNHpOalFnTVRrdU1ERTRNaUF4TkM0d05EWTNJREU1TGpReU5Ua2dNVEl1TkRrNU5TQXhPUzQwTWpVNVF6a3VOVEEwTWpVZ01Ua3VOREkxT1NBMkxqazJPVEF5SURFM0xqUXdNeUEyTGpBMk5EY2dNVFF1TmpnME9FZ3lMakl5TWpZMlZqRTNMalkyTkRSRE5DNHhNVFE1TXlBeU1TNDBNakk0SURndU1EQTBNRElnTWpNdU9UazVPQ0F4TWk0ME9UazFJREl6TGprNU9UaGFJaUJtYVd4c1BTSWpNelJCT0RVeklqNDhMM0JoZEdnK1BIQmhkR2dnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCamJHbHdMWEoxYkdVOUltVjJaVzV2WkdRaUlHUTlJazAyTGpBMk5USXpJREUwTGpZNE5URkROUzQ0TXpVeU15QXhNeTQ1T1RVeElEVXVOekEwTlRVZ01UTXVNalU0TVNBMUxqY3dORFUxSURFeUxqVXdNREZETlM0M01EUTFOU0F4TVM0M05ESXlJRFV1T0RNMU1qTWdNVEV1TURBMU1TQTJMakEyTlRJeklERXdMak14TlRGV055NHpNelUxTjBneUxqSXlNekU0UXpFdU5EUTBNeklnT0M0NE9EZ3dOeUF4SURFd0xqWTBORFFnTVNBeE1pNDFNREF4UXpFZ01UUXVNelUxT0NBeExqUTBORE15SURFMkxqRXhNaklnTWk0eU1qTXhPQ0F4Tnk0Mk5qUTNURFl1TURZMU1qTWdNVFF1TmpnMU1Wb2lJR1pwYkd3OUlpTkdRa0pETURVaVBqd3ZjR0YwYUQ0OGNHRjBhQ0JtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdOc2FYQXRjblZzWlQwaVpYWmxibTlrWkNJZ1pEMGlUVEV5TGpRNU9UVWdOUzQxTnpNNE5rTXhOQzR4T0RjNUlEVXVOVGN6T0RZZ01UVXVOekF6T0NBMkxqRTFOREE1SURFMkxqZzVOVFlnTnk0eU9UTTJORXd5TUM0eE9UUWdNeTQ1T1RVeU0wTXhPQzR5TURJMElESXVNVE01TlRVZ01UVXVOVGs1TWlBeElERXlMalE1T1RVZ01VTTRMakF3TkRBeUlERWdOQzR4TVRRNU15QXpMalUzTnpBMUlESXVNakl5TmpZZ055NHpNelUwTlV3MkxqQTJORGNnTVRBdU16RTFRell1T1RZNU1ESWdOeTQxT1RZNE1pQTVMalV3TkRJMUlEVXVOVGN6T0RZZ01USXVORGs1TlNBMUxqVTNNemcyV2lJZ1ptbHNiRDBpSTBWQk5ETXpOU0krUEM5d1lYUm9Qand2YzNablBnPT1cIlxuICAgICksXG4gICAgbmFtZTogXCJDb250aW51ZSB3aXRoIEdvb2dsZVwiLFxuICAgIHVybDogXCJodHRwczovL3dlYi5wZXRyYS5hcHBcIlxuICB9XG59O1xuXG4vLyBzcmMvQXB0b3NDb25uZWN0QXBwbGVXYWxsZXQudHNcbnZhciBBcHRvc0Nvbm5lY3RBcHBsZVdhbGxldCA9IGNsYXNzIGV4dGVuZHMgQXB0b3NDb25uZWN0V2FsbGV0IHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcsIHByb3ZpZGVyOiBcImFwcGxlXCIgfSk7XG4gICAgdGhpcy5uYW1lID0gd2FsbGV0TWV0YWRhdGEuYXBwbGUubmFtZTtcbiAgICB0aGlzLmljb24gPSB3YWxsZXRNZXRhZGF0YS5hcHBsZS5pY29uO1xuICAgIHRoaXMudXJsID0gd2FsbGV0TWV0YWRhdGEuYXBwbGUudXJsO1xuICB9XG4gIC8vIHJlZ2lvbiBBcHRvc1dhbGxldFxuICBnZXQgZmVhdHVyZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtBcHRvc0Nvbm5lY3ROYW1lc3BhY2VdOiB7XG4gICAgICAgIGNvbm5lY3Q6IHRoaXMuY29ubmVjdC5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NEaXNjb25uZWN0TmFtZXNwYWNlXToge1xuICAgICAgICBkaXNjb25uZWN0OiB0aGlzLmRpc2Nvbm5lY3QuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zR2V0QWNjb3VudE5hbWVzcGFjZV06IHtcbiAgICAgICAgYWNjb3VudDogdGhpcy5nZXRBY2NvdW50LmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc0dldE5ldHdvcmtOYW1lc3BhY2VdOiB7XG4gICAgICAgIG5ldHdvcms6IHRoaXMuZ2V0TmV0d29yay5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NPbkFjY291bnRDaGFuZ2VOYW1lc3BhY2VdOiB7XG4gICAgICAgIG9uQWNjb3VudENoYW5nZTogdGhpcy5vbkFjY291bnRDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zT25OZXR3b3JrQ2hhbmdlTmFtZXNwYWNlXToge1xuICAgICAgICBvbk5ldHdvcmtDaGFuZ2U6IHRoaXMub25OZXR3b3JrQ2hhbmdlLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc1NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbk5hbWVzcGFjZV06IHtcbiAgICAgICAgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uOiB0aGlzLnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NTaWduSW5OYW1lc3BhY2VdOiB7XG4gICAgICAgIHNpZ25JbjogdGhpcy5zaWduSW4uYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnbk1lc3NhZ2VOYW1lc3BhY2VdOiB7XG4gICAgICAgIHNpZ25NZXNzYWdlOiB0aGlzLnNpZ25NZXNzYWdlLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc1NpZ25UcmFuc2FjdGlvbk5hbWVzcGFjZV06IHtcbiAgICAgICAgc2lnblRyYW5zYWN0aW9uOiB0aGlzLnNpZ25UcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8vIGVuZHJlZ2lvblxufTtcblxuLy8gc3JjL0FwdG9zQ29ubmVjdEdlbmVyaWNXYWxsZXQudHNcbmltcG9ydCB7XG4gIEFwdG9zQ29ubmVjdE5hbWVzcGFjZSBhcyBBcHRvc0Nvbm5lY3ROYW1lc3BhY2UyLFxuICBBcHRvc0Rpc2Nvbm5lY3ROYW1lc3BhY2UgYXMgQXB0b3NEaXNjb25uZWN0TmFtZXNwYWNlMixcbiAgQXB0b3NHZXRBY2NvdW50TmFtZXNwYWNlIGFzIEFwdG9zR2V0QWNjb3VudE5hbWVzcGFjZTIsXG4gIEFwdG9zR2V0TmV0d29ya05hbWVzcGFjZSBhcyBBcHRvc0dldE5ldHdvcmtOYW1lc3BhY2UyLFxuICBBcHRvc09uQWNjb3VudENoYW5nZU5hbWVzcGFjZSBhcyBBcHRvc09uQWNjb3VudENoYW5nZU5hbWVzcGFjZTIsXG4gIEFwdG9zT25OZXR3b3JrQ2hhbmdlTmFtZXNwYWNlIGFzIEFwdG9zT25OZXR3b3JrQ2hhbmdlTmFtZXNwYWNlMixcbiAgQXB0b3NTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25OYW1lc3BhY2UgYXMgQXB0b3NTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25OYW1lc3BhY2UyLFxuICBBcHRvc1NpZ25Jbk5hbWVzcGFjZSBhcyBBcHRvc1NpZ25Jbk5hbWVzcGFjZTIsXG4gIEFwdG9zU2lnbk1lc3NhZ2VOYW1lc3BhY2UgYXMgQXB0b3NTaWduTWVzc2FnZU5hbWVzcGFjZTIsXG4gIEFwdG9zU2lnblRyYW5zYWN0aW9uTmFtZXNwYWNlIGFzIEFwdG9zU2lnblRyYW5zYWN0aW9uTmFtZXNwYWNlMlxufSBmcm9tIFwiQGFwdG9zLWxhYnMvd2FsbGV0LXN0YW5kYXJkXCI7XG52YXIgQXB0b3NDb25uZWN0R2VuZXJpY1dhbGxldCA9IGNsYXNzIGV4dGVuZHMgQXB0b3NDb25uZWN0V2FsbGV0IHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoeyAuLi5jb25maWcsIHByb3ZpZGVyOiBcImdlbmVyaWNcIiB9KTtcbiAgICB0aGlzLm5hbWUgPSB3YWxsZXRNZXRhZGF0YS5nZW5lcmljLm5hbWU7XG4gICAgdGhpcy5pY29uID0gd2FsbGV0TWV0YWRhdGEuZ2VuZXJpYy5pY29uO1xuICAgIHRoaXMudXJsID0gd2FsbGV0TWV0YWRhdGEuZ2VuZXJpYy51cmw7XG4gIH1cbiAgLy8gcmVnaW9uIEFwdG9zV2FsbGV0XG4gIGdldCBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgW0FwdG9zQ29ubmVjdE5hbWVzcGFjZTJdOiB7XG4gICAgICAgIGNvbm5lY3Q6IHRoaXMuY29ubmVjdC5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NEaXNjb25uZWN0TmFtZXNwYWNlMl06IHtcbiAgICAgICAgZGlzY29ubmVjdDogdGhpcy5kaXNjb25uZWN0LmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc0dldEFjY291bnROYW1lc3BhY2UyXToge1xuICAgICAgICBhY2NvdW50OiB0aGlzLmdldEFjY291bnQuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zR2V0TmV0d29ya05hbWVzcGFjZTJdOiB7XG4gICAgICAgIG5ldHdvcms6IHRoaXMuZ2V0TmV0d29yay5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NPbkFjY291bnRDaGFuZ2VOYW1lc3BhY2UyXToge1xuICAgICAgICBvbkFjY291bnRDaGFuZ2U6IHRoaXMub25BY2NvdW50Q2hhbmdlLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc09uTmV0d29ya0NoYW5nZU5hbWVzcGFjZTJdOiB7XG4gICAgICAgIG9uTmV0d29ya0NoYW5nZTogdGhpcy5vbk5ldHdvcmtDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uTmFtZXNwYWNlMl06IHtcbiAgICAgICAgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uOiB0aGlzLnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NTaWduSW5OYW1lc3BhY2UyXToge1xuICAgICAgICBzaWduSW46IHRoaXMuc2lnbkluLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc1NpZ25NZXNzYWdlTmFtZXNwYWNlMl06IHtcbiAgICAgICAgc2lnbk1lc3NhZ2U6IHRoaXMuc2lnbk1lc3NhZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnblRyYW5zYWN0aW9uTmFtZXNwYWNlMl06IHtcbiAgICAgICAgc2lnblRyYW5zYWN0aW9uOiB0aGlzLnNpZ25UcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8vIGVuZHJlZ2lvblxufTtcblxuLy8gc3JjL0FwdG9zQ29ubmVjdEdvb2dsZVdhbGxldC50c1xuaW1wb3J0IHtcbiAgQXB0b3NDb25uZWN0TmFtZXNwYWNlIGFzIEFwdG9zQ29ubmVjdE5hbWVzcGFjZTMsXG4gIEFwdG9zRGlzY29ubmVjdE5hbWVzcGFjZSBhcyBBcHRvc0Rpc2Nvbm5lY3ROYW1lc3BhY2UzLFxuICBBcHRvc0dldEFjY291bnROYW1lc3BhY2UgYXMgQXB0b3NHZXRBY2NvdW50TmFtZXNwYWNlMyxcbiAgQXB0b3NHZXROZXR3b3JrTmFtZXNwYWNlIGFzIEFwdG9zR2V0TmV0d29ya05hbWVzcGFjZTMsXG4gIEFwdG9zT25BY2NvdW50Q2hhbmdlTmFtZXNwYWNlIGFzIEFwdG9zT25BY2NvdW50Q2hhbmdlTmFtZXNwYWNlMyxcbiAgQXB0b3NPbk5ldHdvcmtDaGFuZ2VOYW1lc3BhY2UgYXMgQXB0b3NPbk5ldHdvcmtDaGFuZ2VOYW1lc3BhY2UzLFxuICBBcHRvc1NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbk5hbWVzcGFjZSBhcyBBcHRvc1NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbk5hbWVzcGFjZTMsXG4gIEFwdG9zU2lnbkluTmFtZXNwYWNlIGFzIEFwdG9zU2lnbkluTmFtZXNwYWNlMyxcbiAgQXB0b3NTaWduTWVzc2FnZU5hbWVzcGFjZSBhcyBBcHRvc1NpZ25NZXNzYWdlTmFtZXNwYWNlMyxcbiAgQXB0b3NTaWduVHJhbnNhY3Rpb25OYW1lc3BhY2UgYXMgQXB0b3NTaWduVHJhbnNhY3Rpb25OYW1lc3BhY2UzXG59IGZyb20gXCJAYXB0b3MtbGFicy93YWxsZXQtc3RhbmRhcmRcIjtcbnZhciBBcHRvc0Nvbm5lY3RHb29nbGVXYWxsZXQgPSBjbGFzcyBleHRlbmRzIEFwdG9zQ29ubmVjdFdhbGxldCB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHN1cGVyKHsgLi4uY29uZmlnLCBwcm92aWRlcjogXCJnb29nbGVcIiB9KTtcbiAgICB0aGlzLm5hbWUgPSB3YWxsZXRNZXRhZGF0YS5nb29nbGUubmFtZTtcbiAgICB0aGlzLmljb24gPSB3YWxsZXRNZXRhZGF0YS5nb29nbGUuaWNvbjtcbiAgICB0aGlzLnVybCA9IHdhbGxldE1ldGFkYXRhLmdvb2dsZS51cmw7XG4gIH1cbiAgLy8gcmVnaW9uIEFwdG9zV2FsbGV0XG4gIGdldCBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgW0FwdG9zQ29ubmVjdE5hbWVzcGFjZTNdOiB7XG4gICAgICAgIGNvbm5lY3Q6IHRoaXMuY29ubmVjdC5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NEaXNjb25uZWN0TmFtZXNwYWNlM106IHtcbiAgICAgICAgZGlzY29ubmVjdDogdGhpcy5kaXNjb25uZWN0LmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc0dldEFjY291bnROYW1lc3BhY2UzXToge1xuICAgICAgICBhY2NvdW50OiB0aGlzLmdldEFjY291bnQuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zR2V0TmV0d29ya05hbWVzcGFjZTNdOiB7XG4gICAgICAgIG5ldHdvcms6IHRoaXMuZ2V0TmV0d29yay5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NPbkFjY291bnRDaGFuZ2VOYW1lc3BhY2UzXToge1xuICAgICAgICBvbkFjY291bnRDaGFuZ2U6IHRoaXMub25BY2NvdW50Q2hhbmdlLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc09uTmV0d29ya0NoYW5nZU5hbWVzcGFjZTNdOiB7XG4gICAgICAgIG9uTmV0d29ya0NoYW5nZTogdGhpcy5vbk5ldHdvcmtDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uTmFtZXNwYWNlM106IHtcbiAgICAgICAgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uOiB0aGlzLnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NTaWduSW5OYW1lc3BhY2UzXToge1xuICAgICAgICBzaWduSW46IHRoaXMuc2lnbkluLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc1NpZ25NZXNzYWdlTmFtZXNwYWNlM106IHtcbiAgICAgICAgc2lnbk1lc3NhZ2U6IHRoaXMuc2lnbk1lc3NhZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnblRyYW5zYWN0aW9uTmFtZXNwYWNlM106IHtcbiAgICAgICAgc2lnblRyYW5zYWN0aW9uOiB0aGlzLnNpZ25UcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMS4wXCJcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8vIGVuZHJlZ2lvblxufTtcblxuLy8gc3JjL2luZGV4LnRzXG5mdW5jdGlvbiByZWdpc3RlckFwdG9zQ29ubmVjdChjb25maWcpIHtcbiAgY29uc3QgZ29vZ2xlV2FsbGV0UGx1Z2luID0gbmV3IEFwdG9zQ29ubmVjdEdvb2dsZVdhbGxldChjb25maWcpO1xuICBjb25zdCBhcHBsZVdhbGxldFBsdWdpbiA9IG5ldyBBcHRvc0Nvbm5lY3RBcHBsZVdhbGxldChjb25maWcpO1xuICBjb25zdCBnZW5lcmljV2FsbGV0UGx1Z2luID0gbmV3IEFwdG9zQ29ubmVjdEdlbmVyaWNXYWxsZXQoY29uZmlnKTtcbiAgcmVnaXN0ZXJXYWxsZXQoZ29vZ2xlV2FsbGV0UGx1Z2luKTtcbiAgcmVnaXN0ZXJXYWxsZXQoYXBwbGVXYWxsZXRQbHVnaW4pO1xuICByZWdpc3RlcldhbGxldChnZW5lcmljV2FsbGV0UGx1Z2luKTtcbn1cbmV4cG9ydCB7XG4gIEFwdG9zQ29ubmVjdEFjY291bnQsXG4gIEFwdG9zQ29ubmVjdEFwcGxlV2FsbGV0LFxuICBBcHRvc0Nvbm5lY3RHZW5lcmljV2FsbGV0LFxuICBBcHRvc0Nvbm5lY3RHb29nbGVXYWxsZXQsXG4gIEFwdG9zQ29ubmVjdFdhbGxldCxcbiAgcmVnaXN0ZXJBcHRvc0Nvbm5lY3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@aptos-connect/wallet-api/dist/index.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConnectRequest: () => (/* binding */ ConnectRequest),\n/* harmony export */   ConnectResponse: () => (/* binding */ ConnectResponse),\n/* harmony export */   DisconnectRequest: () => (/* binding */ DisconnectRequest),\n/* harmony export */   DisconnectResponse: () => (/* binding */ DisconnectResponse),\n/* harmony export */   EntryFunctionArgumentVariant: () => (/* binding */ EntryFunctionArgumentVariant),\n/* harmony export */   GetConnectedAccountsRequest: () => (/* binding */ GetConnectedAccountsRequest),\n/* harmony export */   GetConnectedAccountsResponse: () => (/* binding */ GetConnectedAccountsResponse),\n/* harmony export */   IsConnectedRequest: () => (/* binding */ IsConnectedRequest),\n/* harmony export */   IsConnectedResponse: () => (/* binding */ IsConnectedResponse),\n/* harmony export */   PromptApprovalResponseMessage: () => (/* binding */ PromptApprovalResponseMessage),\n/* harmony export */   PromptConnectionRequestMessage: () => (/* binding */ PromptConnectionRequestMessage),\n/* harmony export */   PromptConnectionResponseMessage: () => (/* binding */ PromptConnectionResponseMessage),\n/* harmony export */   PromptUnauthorizedErrorMessage: () => (/* binding */ PromptUnauthorizedErrorMessage),\n/* harmony export */   SignAndSubmitTransactionRequest: () => (/* binding */ SignAndSubmitTransactionRequest),\n/* harmony export */   SignAndSubmitTransactionResponse: () => (/* binding */ SignAndSubmitTransactionResponse),\n/* harmony export */   SignInRequest: () => (/* binding */ SignInRequest),\n/* harmony export */   SignInResponse: () => (/* binding */ SignInResponse),\n/* harmony export */   SignMessageRequest: () => (/* binding */ SignMessageRequest),\n/* harmony export */   SignMessageResponse: () => (/* binding */ SignMessageResponse),\n/* harmony export */   SignTransactionRequest: () => (/* binding */ SignTransactionRequest),\n/* harmony export */   SignTransactionResponse: () => (/* binding */ SignTransactionResponse),\n/* harmony export */   TransactionPayloadInputVariant: () => (/* binding */ TransactionPayloadInputVariant),\n/* harmony export */   base64ToBytes: () => (/* binding */ base64ToBytes),\n/* harmony export */   base64urlToBytes: () => (/* binding */ base64urlToBytes),\n/* harmony export */   bytesToBase64: () => (/* binding */ bytesToBase64),\n/* harmony export */   bytesToBase64url: () => (/* binding */ bytesToBase64url),\n/* harmony export */   chainIdToNetwork: () => (/* binding */ chainIdToNetwork),\n/* harmony export */   decodePopupWalletRequest: () => (/* binding */ decodePopupWalletRequest),\n/* harmony export */   decodeWalletRequestBody: () => (/* binding */ decodeWalletRequestBody),\n/* harmony export */   deserializeAccountAuthenticatorInput: () => (/* binding */ deserializeAccountAuthenticatorInput),\n/* harmony export */   deserializeAccountInfo: () => (/* binding */ deserializeAccountInfo),\n/* harmony export */   deserializeAccountInput: () => (/* binding */ deserializeAccountInput),\n/* harmony export */   deserializeDappInfo: () => (/* binding */ deserializeDappInfo),\n/* harmony export */   deserializeEntryFunctionArgument: () => (/* binding */ deserializeEntryFunctionArgument),\n/* harmony export */   deserializePublicKey: () => (/* binding */ deserializePublicKey),\n/* harmony export */   deserializeSignature: () => (/* binding */ deserializeSignature),\n/* harmony export */   deserializeTransactionPayloadInput: () => (/* binding */ deserializeTransactionPayloadInput),\n/* harmony export */   deserializeWalletRequest: () => (/* binding */ deserializeWalletRequest),\n/* harmony export */   deserializeWalletRequestWithArgs: () => (/* binding */ deserializeWalletRequestWithArgs),\n/* harmony export */   deserializeWalletResponse: () => (/* binding */ deserializeWalletResponse),\n/* harmony export */   encodePopupWalletRequest: () => (/* binding */ encodePopupWalletRequest),\n/* harmony export */   encodeWalletRequestBody: () => (/* binding */ encodeWalletRequestBody),\n/* harmony export */   isSupportedNetwork: () => (/* binding */ isSupportedNetwork),\n/* harmony export */   isTypedMessage: () => (/* binding */ isTypedMessage),\n/* harmony export */   makePopupWalletRequestChallenge: () => (/* binding */ makePopupWalletRequestChallenge),\n/* harmony export */   makeUserApproval: () => (/* binding */ makeUserApproval),\n/* harmony export */   makeUserResponseDeserializeFn: () => (/* binding */ makeUserResponseDeserializeFn),\n/* harmony export */   makeUserResponseSerializeFn: () => (/* binding */ makeUserResponseSerializeFn),\n/* harmony export */   serializeAccountAuthenticatorInput: () => (/* binding */ serializeAccountAuthenticatorInput),\n/* harmony export */   serializeAccountInfo: () => (/* binding */ serializeAccountInfo),\n/* harmony export */   serializeAccountInput: () => (/* binding */ serializeAccountInput),\n/* harmony export */   serializeDappInfo: () => (/* binding */ serializeDappInfo),\n/* harmony export */   serializeEntryFunctionArgument: () => (/* binding */ serializeEntryFunctionArgument),\n/* harmony export */   serializePublicKey: () => (/* binding */ serializePublicKey),\n/* harmony export */   serializeSignature: () => (/* binding */ serializeSignature),\n/* harmony export */   serializeTransactionPayloadInput: () => (/* binding */ serializeTransactionPayloadInput),\n/* harmony export */   serializeWalletRequest: () => (/* binding */ serializeWalletRequest),\n/* harmony export */   serializeWalletRequestWithArgs: () => (/* binding */ serializeWalletRequestWithArgs),\n/* harmony export */   serializeWalletResponse: () => (/* binding */ serializeWalletResponse),\n/* harmony export */   shelbynet: () => (/* binding */ shelbynet),\n/* harmony export */   urlDecodeWalletRequest: () => (/* binding */ urlDecodeWalletRequest),\n/* harmony export */   urlEncodeWalletRequest: () => (/* binding */ urlEncodeWalletRequest)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-labs/wallet-standard */ \"(ssr)/./node_modules/@aptos-labs/wallet-standard/dist/esm/index.mjs\");\n// src/base64.ts\nfunction base64ToBytes(base64) {\n  const binaryString = atob(base64);\n  return Uint8Array.from(binaryString, (m) => m.charCodeAt(0));\n}\nfunction bytesToBase64(bytes) {\n  const binaryString = String.fromCharCode(...bytes);\n  return btoa(binaryString);\n}\nfunction base64urlToBytes(base64) {\n  return base64ToBytes(base64.replace(/-/g, \"+\").replace(/_/g, \"/\"));\n}\nfunction bytesToBase64url(bytes) {\n  return bytesToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\n\n// src/features/connect/request.ts\n\n\n// src/helpers.ts\n\n\n// src/shared/AccountAuthenticatorInput.ts\n\nfunction serializeAccountAuthenticatorInput(serializer, value) {\n  serializer.serialize(value.address);\n  serializer.serialize(value.authenticator);\n}\nfunction deserializeAccountAuthenticatorInput(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const authenticator = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator);\n  return { address, authenticator };\n}\n\n// src/shared/AccountInfo.ts\n\n\n// src/shared/PublicKey.ts\n\nfunction serializePublicKey(serializer, value) {\n  if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519PublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnyPublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiKey);\n  } else {\n    throw new Error(\"Unexpected public key type\");\n  }\n  serializer.serialize(value);\n}\nfunction deserializePublicKey(deserializer) {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519PublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnyPublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiKey);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n\n// src/shared/AccountInfo.ts\nfunction serializeAccountInfo(serializer, value) {\n  serializer.serialize(value.address);\n  serializePublicKey(serializer, value.publicKey);\n  serializer.serializeStr(value.name ?? \"\");\n}\nfunction deserializeAccountInfo(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const publicKey = deserializePublicKey(deserializer);\n  const name = deserializer.deserializeStr();\n  return {\n    address,\n    publicKey,\n    ...name.length > 0 ? { name } : void 0\n  };\n}\n\n// src/shared/AccountInput.ts\n\nfunction serializeAccountInput(serializer, value) {\n  serializer.serialize(value.address);\n  serializer.serializeBool(value.publicKey !== void 0);\n  if (value.publicKey) {\n    serializePublicKey(serializer, value.publicKey);\n  }\n}\nfunction deserializeAccountInput(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const hasPublicKey = deserializer.deserializeBool();\n  const publicKey = hasPublicKey ? deserializePublicKey(deserializer) : void 0;\n  return { address, publicKey };\n}\n\n// src/shared/DappInfo.ts\nfunction serializeDappInfo(serializer, value) {\n  serializer.serializeStr(value.domain);\n  serializer.serializeStr(value.name);\n  serializer.serializeBool(value.imageURI !== void 0);\n  if (value.imageURI !== void 0) {\n    serializer.serializeStr(value.imageURI);\n  }\n}\nfunction deserializeDappInfo(deserializer) {\n  const domain = deserializer.deserializeStr();\n  const name = deserializer.deserializeStr();\n  const hasImageUri = deserializer.deserializeBool();\n  const imageURI = hasImageUri ? deserializer.deserializeStr() : void 0;\n  return { domain, imageURI, name };\n}\n\n// src/shared/EntryFunctionArgument.ts\n\nvar EntryFunctionArgumentVariant = /* @__PURE__ */ ((EntryFunctionArgumentVariant2) => {\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Undefined\"] = 0] = \"Undefined\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Array\"] = 1] = \"Array\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"String\"] = 2] = \"String\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Uint8Array\"] = 3] = \"Uint8Array\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"AccountAddress\"] = 4] = \"AccountAddress\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"FixedBytes\"] = 5] = \"FixedBytes\";\n  return EntryFunctionArgumentVariant2;\n})(EntryFunctionArgumentVariant || {});\nfunction serializeEntryFunctionArgument(serializer, argument) {\n  if (argument === void 0 || argument === null) {\n    serializer.serializeU32AsUleb128(0 /* Undefined */);\n    return;\n  }\n  if (Array.isArray(argument)) {\n    serializer.serializeU32AsUleb128(1 /* Array */);\n    serializer.serializeU32AsUleb128(argument.length);\n    for (const subArgument of argument) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n  if (typeof argument === \"string\" || typeof argument === \"number\" || typeof argument === \"boolean\" || typeof argument === \"bigint\") {\n    serializer.serializeU32AsUleb128(2 /* String */);\n    serializer.serializeStr(argument.toString());\n    return;\n  }\n  if (argument instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(3 /* Uint8Array */);\n    serializer.serializeBytes(argument);\n    return;\n  }\n  if (argument instanceof ArrayBuffer) {\n    serializer.serializeU32AsUleb128(3 /* Uint8Array */);\n    serializer.serializeBytes(new Uint8Array(argument));\n    return;\n  }\n  if (\"values\" in argument) {\n    serializer.serializeU32AsUleb128(1 /* Array */);\n    serializer.serializeU32AsUleb128(argument.values.length);\n    for (const subArgument of argument.values) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n  if (\"data\" in argument) {\n    serializer.serializeU32AsUleb128(\n      4 /* AccountAddress */\n    );\n    serializer.serialize(argument);\n    return;\n  }\n  if (argument.value === void 0) {\n    serializer.serializeU32AsUleb128(0 /* Undefined */);\n    serializer.serialize(argument);\n    return;\n  }\n  if (argument.value instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(5 /* FixedBytes */);\n    serializer.serializeBytes(argument.value);\n    return;\n  }\n  serializer.serializeU32AsUleb128(2 /* String */);\n  serializer.serializeStr(argument.value.toString());\n}\nfunction deserializeEntryFunctionArgument(deserializer) {\n  const variant = deserializer.deserializeUleb128AsU32();\n  switch (variant) {\n    case 0 /* Undefined */: {\n      return void 0;\n    }\n    case 1 /* Array */: {\n      const length = deserializer.deserializeUleb128AsU32();\n      const args = [];\n      for (let i = 0; i < length; i += 1) {\n        const argument = deserializeEntryFunctionArgument(deserializer);\n        args.push(argument);\n      }\n      return args;\n    }\n    case 3 /* Uint8Array */: {\n      return deserializer.deserializeBytes();\n    }\n    case 4 /* AccountAddress */: {\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n    }\n    case 2 /* String */: {\n      return deserializer.deserializeStr();\n    }\n    case 5 /* FixedBytes */: {\n      const bytes = deserializer.deserializeBytes();\n      return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.FixedBytes(bytes);\n    }\n    default: {\n      throw new Error(\"Unexpected variant\");\n    }\n  }\n}\n\n// src/shared/ExtendedNetwork.ts\nvar devnetBaseUrl = \"https://api.devnet.aptoslabs.com\";\nvar shelbynetBaseUrl = \"https://api.shelbynet.aptoslabs.com\";\nvar shelbynet = {\n  // This is not reliable and might change in future releases, but it's useful to keep around as \"unique id\" for\n  // the frontend\n  chainId: 59,\n  faucetUrl: \"https://faucet.shelbynet.shelby.xyz\",\n  indexerUrl: `${shelbynetBaseUrl}/v1/graphql`,\n  name: \"shelbynet\",\n  nodeUrl: `${shelbynetBaseUrl}/v1`,\n  // Note: using devnet's keyless services, so we don't have to spin up separate ones\n  pepperUrl: `${devnetBaseUrl}/keyless/pepper/v0`,\n  proverUrl: `${devnetBaseUrl}/keyless/prover/v0`\n};\n\n// src/shared/Signature.ts\n\nfunction serializeSignature(serializer, value) {\n  if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519Signature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnySignature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey);\n  } else {\n    throw new Error(\"Unexpected signature type\");\n  }\n  serializer.serialize(value);\n}\nfunction deserializeSignature(deserializer) {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519Signature);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnySignature);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n\n// src/shared/TransactionPayloadInput.ts\n\nvar TransactionPayloadInputVariant = /* @__PURE__ */ ((TransactionPayloadInputVariant2) => {\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"EntryFunction\"] = 0] = \"EntryFunction\";\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"Script\"] = 1] = \"Script\";\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"Multisig\"] = 2] = \"Multisig\";\n  return TransactionPayloadInputVariant2;\n})(TransactionPayloadInputVariant || {});\nfunction serializeTypeArguments(serializer, typeArguments) {\n  serializer.serializeU32AsUleb128(typeArguments.length);\n  for (const typeArgument of typeArguments) {\n    const typeTag = typeof typeArgument === \"string\" ? (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.parseTypeTag)(typeArgument, { allowGenerics: true }) : typeArgument;\n    serializer.serialize(typeTag);\n  }\n}\nfunction deserializeTypeArguments(deserializer) {\n  const typeArguments = [];\n  const typeArgumentsLength = deserializer.deserializeUleb128AsU32();\n  for (let i = 0; i < typeArgumentsLength; i += 1) {\n    const typeTag = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TypeTag);\n    typeArguments.push(typeTag);\n  }\n  return typeArguments;\n}\nfunction serializeEntryFunctionArguments(serializer, functionArguments) {\n  serializer.serializeU32AsUleb128(functionArguments.length);\n  for (const functionArgument of functionArguments) {\n    serializeEntryFunctionArgument(serializer, functionArgument);\n  }\n}\nfunction deserializeEntryFunctionArguments(deserializer) {\n  const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n  const functionArguments = [];\n  for (let i = 0; i < functionArgumentsLength; i += 1) {\n    const functionArgument = deserializeEntryFunctionArgument(deserializer);\n    functionArguments.push(functionArgument);\n  }\n  return functionArguments;\n}\nfunction serializeTransactionPayloadInput(serializer, value) {\n  if (\"multisigAddress\" in value) {\n    serializer.serializeU32AsUleb128(2 /* Multisig */);\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n    const multisigAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(value.multisigAddress);\n    serializer.serialize(multisigAddress);\n  } else if (\"function\" in value) {\n    serializer.serializeU32AsUleb128(\n      0 /* EntryFunction */\n    );\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n  } else {\n    serializer.serializeU32AsUleb128(1 /* Script */);\n    const bytecode = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(value.bytecode);\n    serializer.serializeBytes(bytecode.toUint8Array());\n    serializer.serializeU32AsUleb128(value.functionArguments.length);\n    for (const argument of value.functionArguments) {\n      argument.serializeForScriptFunction(serializer);\n    }\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n  }\n}\nfunction deserializeTransactionPayloadInput(deserializer) {\n  const variant = deserializer.deserializeUleb128AsU32();\n  switch (variant) {\n    case 2 /* Multisig */: {\n      const functionId = deserializer.deserializeStr();\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      const multisigAddress = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n      return {\n        function: functionId,\n        functionArguments,\n        multisigAddress,\n        typeArguments\n      };\n    }\n    case 0 /* EntryFunction */: {\n      const functionId = deserializer.deserializeStr();\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        function: functionId,\n        functionArguments,\n        typeArguments\n      };\n    }\n    case 1 /* Script */: {\n      const bytecode = deserializer.deserializeBytes();\n      const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n      const functionArguments = [];\n      for (let i = 0; i < functionArgumentsLength; i += 1) {\n        const argument = (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.deserializeFromScriptArgument)(deserializer);\n        functionArguments.push(argument);\n      }\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        bytecode,\n        functionArguments,\n        typeArguments\n      };\n    }\n    default: {\n      throw new Error(\"Unexpected variant\");\n    }\n  }\n}\n\n// src/helpers.ts\nfunction chainIdToNetwork(chainId) {\n  if (chainId === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.NetworkToChainId.mainnet) {\n    return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.MAINNET;\n  }\n  if (chainId === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.NetworkToChainId.testnet) {\n    return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.TESTNET;\n  }\n  if (chainId >= 50 && chainId < 100 || chainId >= 100 && chainId < 125) {\n    return shelbynet.name;\n  }\n  return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET;\n}\nfunction isSupportedNetwork(network) {\n  return [\n    _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.MAINNET,\n    _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.TESTNET,\n    _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET,\n    shelbynet.name\n  ].includes(network);\n}\n\n// src/WalletRequest.ts\n\nfunction serializeWalletRequest({\n  dappInfo,\n  name,\n  version\n}) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\nfunction deserializeWalletRequest({\n  data,\n  name,\n  version\n}) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  return { dappInfo, name, version };\n}\nfunction serializeWalletRequestWithArgs({\n  args,\n  dappInfo,\n  name,\n  version\n}, serializeArgsFn) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  serializeArgsFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\nfunction deserializeWalletRequestWithArgs({ data, name, version }, deserializeArgsFn) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  const args = deserializeArgsFn(deserializer);\n  return { args, dappInfo, name, version };\n}\n\n// src/features/connect/request.ts\nvar ConnectRequest;\n((ConnectRequest2) => {\n  ConnectRequest2.name = \"connect\";\n  ConnectRequest2.supportedVersions = [1, 2, 3, 4];\n  ConnectRequest2.currentVersion = 4;\n  function serializeArgs(serializer, value) {\n    serializer.serializeOptionStr(value.dappId);\n    serializer.serializeOptionStr(value.dappEd25519PublicKeyB64);\n    serializer.serializeOptionStr(value.preferredWalletName);\n    serializer.serializeBool(value.claimOptions !== void 0);\n    if (value.claimOptions) {\n      serializer.serialize(value.claimOptions.secretKey);\n      serializer.serializeStr(value.claimOptions.network);\n      serializer.serializeOptionStr(value.claimOptions.asset);\n      if (!isSupportedNetwork(value.claimOptions.network)) {\n        throw new Error(`Unsupported network '${value.claimOptions.network}'`);\n      }\n    }\n  }\n  ConnectRequest2.serializeArgs = serializeArgs;\n  function deserializeArgs(deserializer, version) {\n    if (version === 1) {\n      return {};\n    }\n    const dappId = deserializer.deserializeOption(\"string\");\n    const dappEd25519PublicKeyB64 = deserializer.deserializeOption(\"string\");\n    const preferredWalletName = version >= 3 ? deserializer.deserializeOption(\"string\") : void 0;\n    const hasClaimOptions = version >= 4 ? deserializer.deserializeBool() : false;\n    let claimOptions;\n    if (hasClaimOptions) {\n      const secretKey = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PrivateKey);\n      const network = deserializer.deserializeStr();\n      const asset = deserializer.deserializeOption(\"string\");\n      if (!isSupportedNetwork(network) || network === shelbynet.name) {\n        throw new Error(`Unsupported network '${network}'`);\n      }\n      claimOptions = { asset, network, secretKey };\n    }\n    return {\n      claimOptions,\n      dappEd25519PublicKeyB64,\n      dappId,\n      preferredWalletName\n    };\n  }\n  ConnectRequest2.deserializeArgs = deserializeArgs;\n  function serialize(dappInfo, args = {}) {\n    return serializeWalletRequestWithArgs(\n      { args, dappInfo, name: ConnectRequest2.name, version: ConnectRequest2.currentVersion },\n      serializeArgs\n    );\n  }\n  ConnectRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequestWithArgs(\n      request,\n      (d) => deserializeArgs(d, request.version)\n    );\n  }\n  ConnectRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === ConnectRequest2.name && ConnectRequest2.supportedVersions.includes(request.version);\n  }\n  ConnectRequest2.isSerialized = isSerialized;\n})(ConnectRequest || (ConnectRequest = {}));\n\n// src/UserResponse.ts\nfunction makeUserApproval(args) {\n  return { args, status: \"approved\" };\n}\nfunction makeUserResponseSerializeFn(serializeArgs) {\n  return (serializer, value) => {\n    serializer.serializeBool(value.status === \"approved\");\n    if (value.status === \"approved\") {\n      serializeArgs(serializer, value.args);\n    }\n  };\n}\nfunction makeUserResponseDeserializeFn(deserializeArgs) {\n  return (deserializer) => {\n    const isApproved = deserializer.deserializeBool();\n    return isApproved ? { args: deserializeArgs(deserializer), status: \"approved\" } : { status: \"dismissed\" };\n  };\n}\n\n// src/WalletResponse.ts\n\nfunction serializeWalletResponse(args, serializeFn) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data };\n}\nfunction deserializeWalletResponse({ data }, deserializeFn) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const args = deserializeFn(deserializer);\n  return { args };\n}\n\n// src/features/connect/response.ts\nvar ConnectResponse;\n((ConnectResponse2) => {\n  ConnectResponse2.supportedVersions = [1, 2];\n  ConnectResponse2.currentVersion = 2;\n  function serializeApprovalArgsV1(serializer, value) {\n    serializeAccountInfo(serializer, value.account);\n  }\n  function serializeApprovalArgs(serializer, value) {\n    serializeAccountInfo(serializer, value.account);\n    serializer.serializeOptionStr(\n      value.pairing !== void 0 ? JSON.stringify(value.pairing) : void 0\n    );\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const account = deserializeAccountInfo(deserializer);\n    const serializedPairing = deserializer.deserializeOption(\"string\");\n    const pairing = serializedPairing !== void 0 ? JSON.parse(serializedPairing) : void 0;\n    return { account, pairing };\n  }\n  const serializeArgsV1 = makeUserResponseSerializeFn(serializeApprovalArgsV1);\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(\n    deserializeApprovalArgs\n  );\n  function serialize(args, version = ConnectResponse2.currentVersion) {\n    return serializeWalletResponse(\n      args,\n      version === 1 ? serializeArgsV1 : serializeArgs\n    );\n  }\n  ConnectResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  ConnectResponse2.deserialize = deserialize;\n})(ConnectResponse || (ConnectResponse = {}));\n\n// src/features/disconnect/request.ts\nvar DisconnectRequest;\n((DisconnectRequest2) => {\n  DisconnectRequest2.name = \"disconnect\";\n  DisconnectRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: DisconnectRequest2.name, version: DisconnectRequest2.currentVersion });\n  }\n  DisconnectRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  DisconnectRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === DisconnectRequest2.name && request.version === DisconnectRequest2.currentVersion;\n  }\n  DisconnectRequest2.isSerialized = isSerialized;\n})(DisconnectRequest || (DisconnectRequest = {}));\n\n// src/features/disconnect/response.ts\nvar DisconnectResponse;\n((DisconnectResponse2) => {\n  function serialize(args) {\n    return serializeWalletResponse(args, () => {\n    });\n  }\n  DisconnectResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, () => ({}));\n  }\n  DisconnectResponse2.deserialize = deserialize;\n})(DisconnectResponse || (DisconnectResponse = {}));\n\n// src/features/getConnectedAccounts/request.ts\nvar GetConnectedAccountsRequest;\n((GetConnectedAccountsRequest2) => {\n  GetConnectedAccountsRequest2.name = \"getConnectedAccounts\";\n  GetConnectedAccountsRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: GetConnectedAccountsRequest2.name, version: GetConnectedAccountsRequest2.currentVersion });\n  }\n  GetConnectedAccountsRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  GetConnectedAccountsRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === GetConnectedAccountsRequest2.name && request.version === GetConnectedAccountsRequest2.currentVersion;\n  }\n  GetConnectedAccountsRequest2.isSerialized = isSerialized;\n})(GetConnectedAccountsRequest || (GetConnectedAccountsRequest = {}));\n\n// src/features/getConnectedAccounts/response.ts\nvar GetConnectedAccountsResponse;\n((GetConnectedAccountsResponse2) => {\n  function serializeArgs(serializer, args) {\n    serializer.serializeU32AsUleb128(args.length);\n    for (const account of args) {\n      serializeAccountInfo(serializer, account);\n    }\n  }\n  function deserializeArgs(deserializer) {\n    const length = deserializer.deserializeUleb128AsU32();\n    const accounts = [];\n    for (let i = 0; i < length; i += 1) {\n      accounts.push(deserializeAccountInfo(deserializer));\n    }\n    return accounts;\n  }\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  GetConnectedAccountsResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  GetConnectedAccountsResponse2.deserialize = deserialize;\n})(GetConnectedAccountsResponse || (GetConnectedAccountsResponse = {}));\n\n// src/features/isConnected/request.ts\nvar IsConnectedRequest;\n((IsConnectedRequest2) => {\n  IsConnectedRequest2.name = \"isConnected\";\n  IsConnectedRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: IsConnectedRequest2.name, version: IsConnectedRequest2.currentVersion });\n  }\n  IsConnectedRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  IsConnectedRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === IsConnectedRequest2.name && request.version === IsConnectedRequest2.currentVersion;\n  }\n  IsConnectedRequest2.isSerialized = isSerialized;\n})(IsConnectedRequest || (IsConnectedRequest = {}));\n\n// src/features/isConnected/response.ts\nvar IsConnectedResponse;\n((IsConnectedResponse2) => {\n  function serializeArgs(serializer, value) {\n    serializer.serializeBool(value);\n  }\n  function deserializeArgs(deserializer) {\n    return deserializer.deserializeBool();\n  }\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  IsConnectedResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  IsConnectedResponse2.deserialize = deserialize;\n})(IsConnectedResponse || (IsConnectedResponse = {}));\n\n// src/features/signAndSubmitTransaction/request.ts\n\nvar SignAndSubmitTransactionRequest;\n((SignAndSubmitTransactionRequest2) => {\n  SignAndSubmitTransactionRequest2.name = \"signAndSubmitTransaction\";\n  SignAndSubmitTransactionRequest2.supportedVersions = [1, 2, 3, 4];\n  SignAndSubmitTransactionRequest2.currentVersion = 4;\n  function serializeArgs(serializer, value) {\n    if (value.network !== void 0 && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeOption(value.network);\n    if (\"bcsToBytes\" in value.payload) {\n      serializer.serializeBool(true);\n      serializer.serialize(value.payload);\n    } else {\n      serializer.serializeBool(false);\n      serializeTransactionPayloadInput(serializer, value.payload);\n    }\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n    serializer.serializeU32AsUleb128(value.feePayer ? 1 : 0);\n    if (value.feePayer) {\n      serializeAccountAuthenticatorInput(serializer, value.feePayer);\n    }\n  }\n  SignAndSubmitTransactionRequest2.serializeArgs = serializeArgs;\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOption(\"string\");\n    if (network !== void 0 && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n    const isPayloadBcsSerializable = version === 1 || deserializer.deserializeBool();\n    const payload = isPayloadBcsSerializable ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload) : deserializeTransactionPayloadInput(deserializer);\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeUleb128AsU32();\n    const feePayer = hasFeePayer ? deserializeAccountAuthenticatorInput(deserializer) : void 0;\n    return {\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : void 0,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : void 0,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : void 0,\n      network,\n      payload,\n      signerAddress\n    };\n  }\n  SignAndSubmitTransactionRequest2.deserializeArgs = deserializeArgs;\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignAndSubmitTransactionRequest2.name, version: SignAndSubmitTransactionRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignAndSubmitTransactionRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(\n      serializedRequest,\n      (deserializer) => deserializeArgs(deserializer, serializedRequest.version)\n    );\n  }\n  SignAndSubmitTransactionRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignAndSubmitTransactionRequest2.name && SignAndSubmitTransactionRequest2.supportedVersions.includes(request.version);\n  }\n  SignAndSubmitTransactionRequest2.isSerialized = isSerialized;\n})(SignAndSubmitTransactionRequest || (SignAndSubmitTransactionRequest = {}));\n\n// src/features/signAndSubmitTransaction/response.ts\nvar SignAndSubmitTransactionResponse;\n((SignAndSubmitTransactionResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serializeStr(value.txnHash);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const txnHash = deserializer.deserializeStr();\n    return { txnHash };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(\n    deserializeApprovalArgs\n  );\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignAndSubmitTransactionResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignAndSubmitTransactionResponse2.deserialize = deserialize;\n})(SignAndSubmitTransactionResponse || (SignAndSubmitTransactionResponse = {}));\n\n// src/shared/AptosSignInInput.ts\nfunction serializeAptosSignInInput(serializer, value) {\n  serializer.serializeStr(JSON.stringify(value));\n}\nfunction deserializeAptosSignInInput(deserializer) {\n  return JSON.parse(deserializer.deserializeStr());\n}\n\n// src/features/signIn/request.ts\nvar SignInRequest;\n((SignInRequest2) => {\n  SignInRequest2.name = \"signIn\";\n  SignInRequest2.supportedVersions = [1, 2, 3];\n  SignInRequest2.currentVersion = 3;\n  function serializeArgs(serializer, value) {\n    if (value.network !== void 0 && !isSupportedNetwork(value.network)) {\n      throw new Error(\n        `Unsupported network '${value.network}' in SignInRequest.serializeArgs`\n      );\n    }\n    serializeAptosSignInInput(serializer, value);\n    serializer.serializeStr(value.network);\n  }\n  SignInRequest2.serializeArgs = serializeArgs;\n  function deserializeArgs(deserializer, _) {\n    return {\n      ...deserializeAptosSignInInput(deserializer),\n      network: deserializer.deserializeStr()\n    };\n  }\n  SignInRequest2.deserializeArgs = deserializeArgs;\n  function serialize(dappInfo, args) {\n    return serializeWalletRequestWithArgs(\n      { args, dappInfo, name: SignInRequest2.name, version: SignInRequest2.currentVersion },\n      serializeArgs\n    );\n  }\n  SignInRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequestWithArgs(\n      request,\n      (d) => deserializeArgs(d, request.version)\n    );\n  }\n  SignInRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignInRequest2.name && SignInRequest2.supportedVersions.includes(request.version);\n  }\n  SignInRequest2.isSerialized = isSerialized;\n})(SignInRequest || (SignInRequest = {}));\n\n// src/shared/AptosSignInOutput.ts\n\nfunction serializeAptosSignInOutputV1(serializer, value) {\n  serializeAccountInfo(serializer, value.account);\n  serializer.serializeStr(JSON.stringify(value.input));\n  serializer.serializeStr(value.plainText);\n  serializeSignature(serializer, value.signature);\n  serializer.serializeBytes(value.signingMessage);\n  serializer.serializeStr(value.type);\n}\nfunction deserializeAptosSignInOutputV1(deserializer) {\n  return {\n    account: new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_1__.AccountInfo(deserializeAccountInfo(deserializer)),\n    input: JSON.parse(deserializer.deserializeStr()),\n    plainText: deserializer.deserializeStr(),\n    signature: deserializeSignature(deserializer),\n    signingMessage: deserializer.deserializeBytes(),\n    type: deserializer.deserializeStr()\n  };\n}\nfunction serializeAptosSignInOutput(serializer, value) {\n  serializeAccountInfo(serializer, value.account);\n  serializer.serializeStr(JSON.stringify(value.input));\n  serializeSignature(serializer, value.signature);\n  serializer.serializeStr(value.type);\n}\nfunction deserializeAptosSignInOutput(deserializer) {\n  return {\n    account: new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_1__.AccountInfo(deserializeAccountInfo(deserializer)),\n    input: JSON.parse(deserializer.deserializeStr()),\n    signature: deserializeSignature(deserializer),\n    type: deserializer.deserializeStr()\n  };\n}\n\n// src/features/signIn/response.ts\nvar SignInResponse;\n((SignInResponse2) => {\n  SignInResponse2.supportedVersions = [1, 2];\n  SignInResponse2.currentVersion = 2;\n  function serializeApprovalArgsV1(serializer, value) {\n    serializeAptosSignInOutputV1(serializer, value);\n  }\n  function deserializeApprovalArgsV1(deserializer) {\n    return deserializeAptosSignInOutputV1(deserializer);\n  }\n  function serializeApprovalArgs(serializer, value) {\n    serializeAptosSignInOutput(serializer, value);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    return deserializeAptosSignInOutput(deserializer);\n  }\n  const serializeArgsV1 = makeUserResponseSerializeFn(serializeApprovalArgsV1);\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgsV1 = makeUserResponseDeserializeFn(\n    deserializeApprovalArgsV1\n  );\n  const deserializeArgs = makeUserResponseDeserializeFn(\n    deserializeApprovalArgs\n  );\n  function serialize(args, version = SignInResponse2.currentVersion) {\n    return serializeWalletResponse(\n      args,\n      version === 1 ? serializeArgsV1 : serializeArgs\n    );\n  }\n  SignInResponse2.serialize = serialize;\n  function deserialize(serializedResponse, version = SignInResponse2.currentVersion) {\n    return deserializeWalletResponse(\n      serializedResponse,\n      version === 1 ? deserializeArgsV1 : deserializeArgs\n    );\n  }\n  SignInResponse2.deserialize = deserialize;\n})(SignInResponse || (SignInResponse = {}));\n\n// src/features/signMessage/request.ts\n\nvar SignMessageRequest;\n((SignMessageRequest2) => {\n  SignMessageRequest2.name = \"signMessage\";\n  SignMessageRequest2.supportedVersions = [1, 2];\n  SignMessageRequest2.currentVersion = 2;\n  function serializeArgs(serializer, value) {\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeU8(value.chainId);\n    serializer.serializeBytes(value.nonce);\n    serializer.serializeBytes(value.message);\n  }\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 2 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const chainId = deserializer.deserializeU8();\n    const nonce = deserializer.deserializeBytes();\n    const message = deserializer.deserializeBytes();\n    return { chainId, message, nonce, signerAddress };\n  }\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignMessageRequest2.name, version: SignMessageRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignMessageRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(\n      serializedRequest,\n      (d) => deserializeArgs(d, serializedRequest.version)\n    );\n  }\n  SignMessageRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignMessageRequest2.name && request.version === SignMessageRequest2.currentVersion;\n  }\n  SignMessageRequest2.isSerialized = isSerialized;\n})(SignMessageRequest || (SignMessageRequest = {}));\n\n// src/features/signMessage/response.ts\nvar SignMessageResponse;\n((SignMessageResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serializeStr(value.fullMessage);\n    serializeSignature(serializer, value.signature);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const fullMessage = deserializer.deserializeStr();\n    const signature = deserializeSignature(deserializer);\n    return { fullMessage, signature };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(\n    deserializeApprovalArgs\n  );\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignMessageResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignMessageResponse2.deserialize = deserialize;\n})(SignMessageResponse || (SignMessageResponse = {}));\n\n// src/features/signTransaction/request.ts\n\nvar SignTransactionRequest;\n((SignTransactionRequest2) => {\n  SignTransactionRequest2.name = \"signTransaction\";\n  SignTransactionRequest2.supportedVersions = [1, 2, 3, 4, 5];\n  SignTransactionRequest2.currentVersion = 5;\n  function normalizeArgs(args) {\n    const {\n      feePayer,\n      secondarySigners,\n      senderPublicKey,\n      signerAddress,\n      transaction\n    } = args;\n    const sender = {\n      address: transaction.sender,\n      publicKey: senderPublicKey\n    };\n    const network = chainIdToNetwork(args.transaction.chain_id.chainId);\n    return {\n      expirationTimestamp: Number(transaction.expiration_timestamp_secs),\n      feePayer,\n      gasUnitPrice: Number(transaction.gas_unit_price),\n      maxGasAmount: Number(transaction.max_gas_amount),\n      network,\n      payload: transaction.payload,\n      secondarySigners,\n      sender,\n      signerAddress\n    };\n  }\n  SignTransactionRequest2.normalizeArgs = normalizeArgs;\n  function serializeArgs(serializer, value) {\n    if (value.network !== void 0 && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeOption(value.network);\n    serializer.serializeBool(value.sender !== void 0);\n    if (value.sender !== void 0) {\n      serializeAccountInput(serializer, value.sender);\n    }\n    if (\"bcsToBytes\" in value.payload) {\n      serializer.serializeBool(true);\n      serializer.serialize(value.payload);\n    } else {\n      serializer.serializeBool(false);\n      serializeTransactionPayloadInput(serializer, value.payload);\n    }\n    serializer.serializeU32AsUleb128(value.expirationSecondsFromNow ?? 0);\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n    serializer.serializeBool(value.feePayer !== void 0);\n    if (value.feePayer !== void 0) {\n      serializeAccountInput(serializer, value.feePayer);\n    }\n    const secondarySigners = value.secondarySigners ?? [];\n    serializer.serializeU32AsUleb128(secondarySigners.length);\n    for (const signer of secondarySigners) {\n      serializeAccountInput(serializer, signer);\n    }\n  }\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOption(\"string\");\n    if (network !== void 0 && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n    const hasSender = deserializer.deserializeBool();\n    const sender = hasSender ? deserializeAccountInput(deserializer) : void 0;\n    const isPayloadBcsSerializable = version < 4 || deserializer.deserializeBool();\n    const payload = isPayloadBcsSerializable ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload) : deserializeTransactionPayloadInput(deserializer);\n    const expirationSecondsFromNow = deserializer.deserializeUleb128AsU32();\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeBool();\n    const feePayer = hasFeePayer ? deserializeAccountInput(deserializer) : void 0;\n    const secondarySignersLength = deserializer.deserializeUleb128AsU32();\n    const secondarySigners = [];\n    for (let i = 0; i < secondarySignersLength; i += 1) {\n      secondarySigners.push(deserializeAccountInput(deserializer));\n    }\n    return {\n      expirationSecondsFromNow: expirationSecondsFromNow > 0 ? expirationSecondsFromNow : void 0,\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : void 0,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : void 0,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : void 0,\n      network,\n      payload,\n      secondarySigners,\n      sender,\n      signerAddress\n    };\n  }\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignTransactionRequest2.name, version: SignTransactionRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignTransactionRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(\n      serializedRequest,\n      (deserializer) => deserializeArgs(deserializer, serializedRequest.version)\n    );\n  }\n  SignTransactionRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignTransactionRequest2.name && SignTransactionRequest2.supportedVersions.includes(request.version);\n  }\n  SignTransactionRequest2.isSerialized = isSerialized;\n})(SignTransactionRequest || (SignTransactionRequest = {}));\n\n// src/features/signTransaction/response.ts\n\nvar SignTransactionResponse;\n((SignTransactionResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serialize(value.authenticator);\n    serializer.serializeBool(value.rawTransaction !== void 0);\n    if (value.rawTransaction !== void 0) {\n      serializer.serialize(value.rawTransaction);\n    }\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const authenticator = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator);\n    const hasRawTransaction = deserializer.deserializeBool();\n    const rawTransaction = hasRawTransaction ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransaction) : void 0;\n    return {\n      authenticator,\n      rawTransaction\n    };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(\n    deserializeApprovalArgs\n  );\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignTransactionResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignTransactionResponse2.deserialize = deserialize;\n})(SignTransactionResponse || (SignTransactionResponse = {}));\n\n// src/messages/common.ts\nfunction isTypedMessage(messageCls, message) {\n  return message?.__messageType === messageCls.TYPE;\n}\n\n// src/messages/prompt.ts\n\nvar _PromptConnectionRequestMessage = class _PromptConnectionRequestMessage {\n  constructor() {\n    this.__messageType = _PromptConnectionRequestMessage.TYPE;\n  }\n};\n_PromptConnectionRequestMessage.TYPE = \"PromptConnectionRequest\";\nvar PromptConnectionRequestMessage = _PromptConnectionRequestMessage;\nvar _PromptConnectionResponseMessage = class _PromptConnectionResponseMessage {\n  constructor(serializedRequest) {\n    this.serializedRequest = serializedRequest;\n    this.__messageType = _PromptConnectionResponseMessage.TYPE;\n  }\n};\n_PromptConnectionResponseMessage.TYPE = \"PromptConnectionResponse\";\nvar PromptConnectionResponseMessage = _PromptConnectionResponseMessage;\nvar _PromptApprovalResponseMessage = class _PromptApprovalResponseMessage {\n  constructor(serializedValue) {\n    this.serializedValue = serializedValue;\n    this.__messageType = _PromptApprovalResponseMessage.TYPE;\n  }\n};\n_PromptApprovalResponseMessage.TYPE = \"PromptApprovalResponse\";\nvar PromptApprovalResponseMessage = _PromptApprovalResponseMessage;\nvar _PromptUnauthorizedErrorMessage = class _PromptUnauthorizedErrorMessage {\n  constructor() {\n    this.__messageType = _PromptUnauthorizedErrorMessage.TYPE;\n  }\n};\n_PromptUnauthorizedErrorMessage.TYPE = \"PromptUnauthorizedError\";\nvar PromptUnauthorizedErrorMessage = _PromptUnauthorizedErrorMessage;\nfunction urlEncodeWalletRequest(request) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializer.serializeStr(request.name);\n  serializer.serializeBytes(request.data);\n  serializer.serializeStr(request.version.toString());\n  return bytesToBase64(serializer.toUint8Array());\n}\nfunction urlDecodeWalletRequest(encodedRequest) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(base64ToBytes(encodedRequest));\n  const name = deserializer.deserializeStr();\n  const data = deserializer.deserializeBytes();\n  let version;\n  try {\n    version = Number(deserializer.deserializeStr());\n  } catch {\n    version = 1;\n  }\n  return { data, name, version };\n}\n\n// src/PopupWalletRequest.ts\n\n\n// src/WalletRequestBody.ts\nfunction encodeWalletRequestBody({\n  data,\n  ...rest\n}) {\n  const serialized = JSON.stringify(\n    { data, ...rest },\n    (key, value) => key === \"data\" ? bytesToBase64(value) : value\n  );\n  const utf8Encoded = new TextEncoder().encode(serialized);\n  return bytesToBase64(utf8Encoded);\n}\nfunction decodeWalletRequestBody(encoded) {\n  const utfEncoded = base64ToBytes(encoded);\n  const serialized = new TextDecoder().decode(utfEncoded);\n  return JSON.parse(\n    serialized,\n    (key, value) => key === \"data\" ? base64ToBytes(value) : value\n  );\n}\n\n// src/PopupWalletRequest.ts\nfunction encodePopupWalletRequest(request) {\n  const serialized = JSON.stringify(request, (key, value) => {\n    switch (key) {\n      case \"body\":\n        return encodeWalletRequestBody(value);\n      case \"clientIdentityKey\":\n        return bytesToBase64(value.toUint8Array());\n      case \"signature\":\n        return bytesToBase64(value.toUint8Array());\n      default:\n        return value;\n    }\n  });\n  const utf8Encoded = new TextEncoder().encode(serialized);\n  return bytesToBase64url(utf8Encoded);\n}\nfunction decodePopupWalletRequest(encoded) {\n  const utfEncoded = base64urlToBytes(encoded);\n  const serialized = new TextDecoder().decode(utfEncoded);\n  return JSON.parse(serialized, (key, value) => {\n    switch (key) {\n      case \"body\":\n        return decodeWalletRequestBody(value);\n      case \"clientIdentityKey\":\n        return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey(base64ToBytes(value));\n      case \"signature\":\n        return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature(base64ToBytes(value));\n      default:\n        return value;\n    }\n  });\n}\nfunction makePopupWalletRequestChallenge({\n  accountAddress,\n  body,\n  id,\n  timestamp\n}) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializer.serializeStr(\"SignedPopupWalletRequest\");\n  serializer.serializeStr(id);\n  serializer.serializeU64(timestamp);\n  serializer.serializeBool(accountAddress !== void 0);\n  if (accountAddress !== void 0) {\n    serializer.serialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(accountAddress));\n  }\n  serializer.serializeStr(body.name);\n  serializer.serializeU8(body.version);\n  serializer.serializeBytes(body.data);\n  return serializer.toUint8Array();\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFwaS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRzRCOztBQUU1QjtBQUk0Qjs7QUFFNUI7QUFJNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw4REFBYztBQUN6RCxpREFBaUQsb0VBQW9CO0FBQ3JFLFdBQVc7QUFDWDs7QUFFQTtBQUc0Qjs7QUFFNUI7QUFPNEI7QUFDNUI7QUFDQSx1QkFBdUIsZ0VBQWdCO0FBQ3ZDLHFDQUFxQyw2REFBYTtBQUNsRCxJQUFJLDBCQUEwQixxRUFBcUI7QUFDbkQscUNBQXFDLDZEQUFhO0FBQ2xELElBQUksMEJBQTBCLDREQUFZO0FBQzFDLHFDQUFxQyw2REFBYTtBQUNsRCxJQUFJLDBCQUEwQix3REFBUTtBQUN0QyxxQ0FBcUMsNkRBQWE7QUFDbEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2REFBYTtBQUN0QixzQ0FBc0MsZ0VBQWdCO0FBQ3RELFNBQVMsNkRBQWE7QUFDdEIsc0NBQXNDLHFFQUFxQjtBQUMzRCxTQUFTLDZEQUFhO0FBQ3RCLHNDQUFzQyw0REFBWTtBQUNsRCxTQUFTLDZEQUFhO0FBQ3RCLHNDQUFzQyx3REFBUTtBQUM5QztBQUNBLGlEQUFpRCxjQUFjO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsOERBQWU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7O0FBRUE7QUFHNEI7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QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHlCQUF5QiwwREFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhEQUFlO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdFRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFzdXNcXERlc2t0b3BcXHByb2pcXHYzXFx2b2ljZXZhdWx0XFxuZXh0XFxub2RlX21vZHVsZXNcXEBhcHRvcy1jb25uZWN0XFx3YWxsZXQtYXBpXFxkaXN0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2Jhc2U2NC50c1xuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyhiYXNlNjQpIHtcbiAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICByZXR1cm4gVWludDhBcnJheS5mcm9tKGJpbmFyeVN0cmluZywgKG0pID0+IG0uY2hhckNvZGVBdCgwKSk7XG59XG5mdW5jdGlvbiBieXRlc1RvQmFzZTY0KGJ5dGVzKSB7XG4gIGNvbnN0IGJpbmFyeVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uYnl0ZXMpO1xuICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xufVxuZnVuY3Rpb24gYmFzZTY0dXJsVG9CeXRlcyhiYXNlNjQpIHtcbiAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoYmFzZTY0LnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpKTtcbn1cbmZ1bmN0aW9uIGJ5dGVzVG9CYXNlNjR1cmwoYnl0ZXMpIHtcbiAgcmV0dXJuIGJ5dGVzVG9CYXNlNjQoYnl0ZXMpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89KyQvLCBcIlwiKTtcbn1cblxuLy8gc3JjL2ZlYXR1cmVzL2Nvbm5lY3QvcmVxdWVzdC50c1xuaW1wb3J0IHtcbiAgRWQyNTUxOVByaXZhdGVLZXlcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuXG4vLyBzcmMvaGVscGVycy50c1xuaW1wb3J0IHtcbiAgTmV0d29yayxcbiAgTmV0d29ya1RvQ2hhaW5JZFxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5cbi8vIHNyYy9zaGFyZWQvQWNjb3VudEF1dGhlbnRpY2F0b3JJbnB1dC50c1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MsXG4gIEFjY291bnRBdXRoZW50aWNhdG9yXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmZ1bmN0aW9uIHNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQoc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUuYWRkcmVzcyk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmF1dGhlbnRpY2F0b3IpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVBY2NvdW50QXV0aGVudGljYXRvcklucHV0KGRlc2VyaWFsaXplcikge1xuICBjb25zdCBhZGRyZXNzID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzKTtcbiAgY29uc3QgYXV0aGVudGljYXRvciA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShBY2NvdW50QXV0aGVudGljYXRvcik7XG4gIHJldHVybiB7IGFkZHJlc3MsIGF1dGhlbnRpY2F0b3IgfTtcbn1cblxuLy8gc3JjL3NoYXJlZC9BY2NvdW50SW5mby50c1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3MyXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcblxuLy8gc3JjL3NoYXJlZC9QdWJsaWNLZXkudHNcbmltcG9ydCB7XG4gIEFueVB1YmxpY0tleSxcbiAgRWQyNTUxOVB1YmxpY0tleSxcbiAgTXVsdGlFZDI1NTE5UHVibGljS2V5LFxuICBNdWx0aUtleSxcbiAgU2lnbmluZ1NjaGVtZVxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVQdWJsaWNLZXkoc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRWQyNTUxOVB1YmxpY0tleSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KFNpZ25pbmdTY2hlbWUuRWQyNTUxOSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlQdWJsaWNLZXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lLk11bHRpRWQyNTUxOSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbnlQdWJsaWNLZXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lLlNpbmdsZUtleSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdWx0aUtleSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KFNpZ25pbmdTY2hlbWUuTXVsdGlLZXkpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcHVibGljIGtleSB0eXBlXCIpO1xuICB9XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplUHVibGljS2V5KGRlc2VyaWFsaXplcikge1xuICBjb25zdCBzaWduaW5nU2NoZW1lID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gIHN3aXRjaCAoc2lnbmluZ1NjaGVtZSkge1xuICAgIGNhc2UgU2lnbmluZ1NjaGVtZS5FZDI1NTE5OlxuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShFZDI1NTE5UHVibGljS2V5KTtcbiAgICBjYXNlIFNpZ25pbmdTY2hlbWUuTXVsdGlFZDI1NTE5OlxuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShNdWx0aUVkMjU1MTlQdWJsaWNLZXkpO1xuICAgIGNhc2UgU2lnbmluZ1NjaGVtZS5TaW5nbGVLZXk6XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFueVB1YmxpY0tleSk7XG4gICAgY2FzZSBTaWduaW5nU2NoZW1lLk11bHRpS2V5OlxuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShNdWx0aUtleSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzaWduaW5nIHNjaGVtZTogJHtzaWduaW5nU2NoZW1lfWApO1xuICB9XG59XG5cbi8vIHNyYy9zaGFyZWQvQWNjb3VudEluZm8udHNcbmZ1bmN0aW9uIHNlcmlhbGl6ZUFjY291bnRJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmFkZHJlc3MpO1xuICBzZXJpYWxpemVQdWJsaWNLZXkoc2VyaWFsaXplciwgdmFsdWUucHVibGljS2V5KTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUubmFtZSA/PyBcIlwiKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplQWNjb3VudEluZm8oZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IGFkZHJlc3MgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3MyKTtcbiAgY29uc3QgcHVibGljS2V5ID0gZGVzZXJpYWxpemVQdWJsaWNLZXkoZGVzZXJpYWxpemVyKTtcbiAgY29uc3QgbmFtZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICByZXR1cm4ge1xuICAgIGFkZHJlc3MsXG4gICAgcHVibGljS2V5LFxuICAgIC4uLm5hbWUubGVuZ3RoID4gMCA/IHsgbmFtZSB9IDogdm9pZCAwXG4gIH07XG59XG5cbi8vIHNyYy9zaGFyZWQvQWNjb3VudElucHV0LnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczNcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplQWNjb3VudElucHV0KHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmFkZHJlc3MpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUucHVibGljS2V5ICE9PSB2b2lkIDApO1xuICBpZiAodmFsdWUucHVibGljS2V5KSB7XG4gICAgc2VyaWFsaXplUHVibGljS2V5KHNlcmlhbGl6ZXIsIHZhbHVlLnB1YmxpY0tleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplQWNjb3VudElucHV0KGRlc2VyaWFsaXplcikge1xuICBjb25zdCBhZGRyZXNzID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzMyk7XG4gIGNvbnN0IGhhc1B1YmxpY0tleSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgY29uc3QgcHVibGljS2V5ID0gaGFzUHVibGljS2V5ID8gZGVzZXJpYWxpemVQdWJsaWNLZXkoZGVzZXJpYWxpemVyKSA6IHZvaWQgMDtcbiAgcmV0dXJuIHsgYWRkcmVzcywgcHVibGljS2V5IH07XG59XG5cbi8vIHNyYy9zaGFyZWQvRGFwcEluZm8udHNcbmZ1bmN0aW9uIHNlcmlhbGl6ZURhcHBJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLmRvbWFpbik7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLm5hbWUpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuaW1hZ2VVUkkgIT09IHZvaWQgMCk7XG4gIGlmICh2YWx1ZS5pbWFnZVVSSSAhPT0gdm9pZCAwKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUuaW1hZ2VVUkkpO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZURhcHBJbmZvKGRlc2VyaWFsaXplcikge1xuICBjb25zdCBkb21haW4gPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgY29uc3QgbmFtZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICBjb25zdCBoYXNJbWFnZVVyaSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgY29uc3QgaW1hZ2VVUkkgPSBoYXNJbWFnZVVyaSA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpIDogdm9pZCAwO1xuICByZXR1cm4geyBkb21haW4sIGltYWdlVVJJLCBuYW1lIH07XG59XG5cbi8vIHNyYy9zaGFyZWQvRW50cnlGdW5jdGlvbkFyZ3VtZW50LnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczQsXG4gIEZpeGVkQnl0ZXNcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIEVudHJ5RnVuY3Rpb25Bcmd1bWVudFZhcmlhbnQgPSAvKiBAX19QVVJFX18gKi8gKChFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MikgPT4ge1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIlVuZGVmaW5lZFwiXSA9IDBdID0gXCJVbmRlZmluZWRcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJBcnJheVwiXSA9IDFdID0gXCJBcnJheVwiO1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIlN0cmluZ1wiXSA9IDJdID0gXCJTdHJpbmdcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJVaW50OEFycmF5XCJdID0gM10gPSBcIlVpbnQ4QXJyYXlcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJBY2NvdW50QWRkcmVzc1wiXSA9IDRdID0gXCJBY2NvdW50QWRkcmVzc1wiO1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIkZpeGVkQnl0ZXNcIl0gPSA1XSA9IFwiRml4ZWRCeXRlc1wiO1xuICByZXR1cm4gRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDI7XG59KShFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50IHx8IHt9KTtcbmZ1bmN0aW9uIHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudChzZXJpYWxpemVyLCBhcmd1bWVudCkge1xuICBpZiAoYXJndW1lbnQgPT09IHZvaWQgMCB8fCBhcmd1bWVudCA9PT0gbnVsbCkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDAgLyogVW5kZWZpbmVkICovKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnQpKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoMSAvKiBBcnJheSAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoYXJndW1lbnQubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IHN1YkFyZ3VtZW50IG9mIGFyZ3VtZW50KSB7XG4gICAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoc2VyaWFsaXplciwgc3ViQXJndW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSBcImJvb2xlYW5cIiB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwiYmlnaW50XCIpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgyIC8qIFN0cmluZyAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIoYXJndW1lbnQudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgzIC8qIFVpbnQ4QXJyYXkgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQnl0ZXMoYXJndW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDMgLyogVWludDhBcnJheSAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhuZXcgVWludDhBcnJheShhcmd1bWVudCkpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoXCJ2YWx1ZXNcIiBpbiBhcmd1bWVudCkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDEgLyogQXJyYXkgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KGFyZ3VtZW50LnZhbHVlcy5sZW5ndGgpO1xuICAgIGZvciAoY29uc3Qgc3ViQXJndW1lbnQgb2YgYXJndW1lbnQudmFsdWVzKSB7XG4gICAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoc2VyaWFsaXplciwgc3ViQXJndW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKFwiZGF0YVwiIGluIGFyZ3VtZW50KSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoXG4gICAgICA0IC8qIEFjY291bnRBZGRyZXNzICovXG4gICAgKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZShhcmd1bWVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChhcmd1bWVudC52YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoMCAvKiBVbmRlZmluZWQgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKGFyZ3VtZW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGFyZ3VtZW50LnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDUgLyogRml4ZWRCeXRlcyAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhhcmd1bWVudC52YWx1ZSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDIgLyogU3RyaW5nICovKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIoYXJndW1lbnQudmFsdWUudG9TdHJpbmcoKSk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudChkZXNlcmlhbGl6ZXIpIHtcbiAgY29uc3QgdmFyaWFudCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICBzd2l0Y2ggKHZhcmlhbnQpIHtcbiAgICBjYXNlIDAgLyogVW5kZWZpbmVkICovOiB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjYXNlIDEgLyogQXJyYXkgKi86IHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgICAgY29uc3QgYXJncyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBhcmd1bWVudCA9IGRlc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50KGRlc2VyaWFsaXplcik7XG4gICAgICAgIGFyZ3MucHVzaChhcmd1bWVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJncztcbiAgICB9XG4gICAgY2FzZSAzIC8qIFVpbnQ4QXJyYXkgKi86IHtcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCeXRlcygpO1xuICAgIH1cbiAgICBjYXNlIDQgLyogQWNjb3VudEFkZHJlc3MgKi86IHtcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3M0KTtcbiAgICB9XG4gICAgY2FzZSAyIC8qIFN0cmluZyAqLzoge1xuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICAgIH1cbiAgICBjYXNlIDUgLyogRml4ZWRCeXRlcyAqLzoge1xuICAgICAgY29uc3QgYnl0ZXMgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCeXRlcygpO1xuICAgICAgcmV0dXJuIG5ldyBGaXhlZEJ5dGVzKGJ5dGVzKTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2YXJpYW50XCIpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvc2hhcmVkL0V4dGVuZGVkTmV0d29yay50c1xudmFyIGRldm5ldEJhc2VVcmwgPSBcImh0dHBzOi8vYXBpLmRldm5ldC5hcHRvc2xhYnMuY29tXCI7XG52YXIgc2hlbGJ5bmV0QmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkuc2hlbGJ5bmV0LmFwdG9zbGFicy5jb21cIjtcbnZhciBzaGVsYnluZXQgPSB7XG4gIC8vIFRoaXMgaXMgbm90IHJlbGlhYmxlIGFuZCBtaWdodCBjaGFuZ2UgaW4gZnV0dXJlIHJlbGVhc2VzLCBidXQgaXQncyB1c2VmdWwgdG8ga2VlcCBhcm91bmQgYXMgXCJ1bmlxdWUgaWRcIiBmb3JcbiAgLy8gdGhlIGZyb250ZW5kXG4gIGNoYWluSWQ6IDU5LFxuICBmYXVjZXRVcmw6IFwiaHR0cHM6Ly9mYXVjZXQuc2hlbGJ5bmV0LnNoZWxieS54eXpcIixcbiAgaW5kZXhlclVybDogYCR7c2hlbGJ5bmV0QmFzZVVybH0vdjEvZ3JhcGhxbGAsXG4gIG5hbWU6IFwic2hlbGJ5bmV0XCIsXG4gIG5vZGVVcmw6IGAke3NoZWxieW5ldEJhc2VVcmx9L3YxYCxcbiAgLy8gTm90ZTogdXNpbmcgZGV2bmV0J3Mga2V5bGVzcyBzZXJ2aWNlcywgc28gd2UgZG9uJ3QgaGF2ZSB0byBzcGluIHVwIHNlcGFyYXRlIG9uZXNcbiAgcGVwcGVyVXJsOiBgJHtkZXZuZXRCYXNlVXJsfS9rZXlsZXNzL3BlcHBlci92MGAsXG4gIHByb3ZlclVybDogYCR7ZGV2bmV0QmFzZVVybH0va2V5bGVzcy9wcm92ZXIvdjBgXG59O1xuXG4vLyBzcmMvc2hhcmVkL1NpZ25hdHVyZS50c1xuaW1wb3J0IHtcbiAgQW55U2lnbmF0dXJlLFxuICBFZDI1NTE5U2lnbmF0dXJlLFxuICBNdWx0aUVkMjU1MTlTaWduYXR1cmUsXG4gIFNpZ25pbmdTY2hlbWUgYXMgU2lnbmluZ1NjaGVtZTJcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplU2lnbmF0dXJlKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVkMjU1MTlTaWduYXR1cmUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lMi5FZDI1NTE5KTtcbiAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE11bHRpRWQyNTUxOVNpZ25hdHVyZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KFNpZ25pbmdTY2hlbWUyLk11bHRpRWQyNTUxOSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbnlTaWduYXR1cmUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lMi5TaW5nbGVLZXkpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc2lnbmF0dXJlIHR5cGVcIik7XG4gIH1cbiAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVTaWduYXR1cmUoZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IHNpZ25pbmdTY2hlbWUgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgc3dpdGNoIChzaWduaW5nU2NoZW1lKSB7XG4gICAgY2FzZSBTaWduaW5nU2NoZW1lMi5FZDI1NTE5OlxuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShFZDI1NTE5U2lnbmF0dXJlKTtcbiAgICBjYXNlIFNpZ25pbmdTY2hlbWUyLk11bHRpRWQyNTUxOTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoTXVsdGlFZDI1NTE5U2lnbmF0dXJlKTtcbiAgICBjYXNlIFNpZ25pbmdTY2hlbWUyLlNpbmdsZUtleTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQW55U2lnbmF0dXJlKTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNpZ25pbmcgc2NoZW1lOiAke3NpZ25pbmdTY2hlbWV9YCk7XG4gIH1cbn1cblxuLy8gc3JjL3NoYXJlZC9UcmFuc2FjdGlvblBheWxvYWRJbnB1dC50c1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M1LFxuICBkZXNlcmlhbGl6ZUZyb21TY3JpcHRBcmd1bWVudCxcbiAgSGV4LFxuICBwYXJzZVR5cGVUYWcsXG4gIFR5cGVUYWdcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudCA9IC8qIEBfX1BVUkVfXyAqLyAoKFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDIpID0+IHtcbiAgVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50MltUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQyW1wiRW50cnlGdW5jdGlvblwiXSA9IDBdID0gXCJFbnRyeUZ1bmN0aW9uXCI7XG4gIFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDJbVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50MltcIlNjcmlwdFwiXSA9IDFdID0gXCJTY3JpcHRcIjtcbiAgVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50MltUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQyW1wiTXVsdGlzaWdcIl0gPSAyXSA9IFwiTXVsdGlzaWdcIjtcbiAgcmV0dXJuIFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDI7XG59KShUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQgfHwge30pO1xuZnVuY3Rpb24gc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhzZXJpYWxpemVyLCB0eXBlQXJndW1lbnRzKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHR5cGVBcmd1bWVudHMubGVuZ3RoKTtcbiAgZm9yIChjb25zdCB0eXBlQXJndW1lbnQgb2YgdHlwZUFyZ3VtZW50cykge1xuICAgIGNvbnN0IHR5cGVUYWcgPSB0eXBlb2YgdHlwZUFyZ3VtZW50ID09PSBcInN0cmluZ1wiID8gcGFyc2VUeXBlVGFnKHR5cGVBcmd1bWVudCwgeyBhbGxvd0dlbmVyaWNzOiB0cnVlIH0pIDogdHlwZUFyZ3VtZW50O1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHR5cGVUYWcpO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBbXTtcbiAgY29uc3QgdHlwZUFyZ3VtZW50c0xlbmd0aCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVBcmd1bWVudHNMZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHR5cGVUYWcgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoVHlwZVRhZyk7XG4gICAgdHlwZUFyZ3VtZW50cy5wdXNoKHR5cGVUYWcpO1xuICB9XG4gIHJldHVybiB0eXBlQXJndW1lbnRzO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50cyhzZXJpYWxpemVyLCBmdW5jdGlvbkFyZ3VtZW50cykge1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChmdW5jdGlvbkFyZ3VtZW50cy5sZW5ndGgpO1xuICBmb3IgKGNvbnN0IGZ1bmN0aW9uQXJndW1lbnQgb2YgZnVuY3Rpb25Bcmd1bWVudHMpIHtcbiAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoc2VyaWFsaXplciwgZnVuY3Rpb25Bcmd1bWVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50cyhkZXNlcmlhbGl6ZXIpIHtcbiAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHNMZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmdW5jdGlvbkFyZ3VtZW50c0xlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudCA9IGRlc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50KGRlc2VyaWFsaXplcik7XG4gICAgZnVuY3Rpb25Bcmd1bWVudHMucHVzaChmdW5jdGlvbkFyZ3VtZW50KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb25Bcmd1bWVudHM7XG59XG5mdW5jdGlvbiBzZXJpYWxpemVUcmFuc2FjdGlvblBheWxvYWRJbnB1dChzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBpZiAoXCJtdWx0aXNpZ0FkZHJlc3NcIiBpbiB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDIgLyogTXVsdGlzaWcgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLmZ1bmN0aW9uKTtcbiAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnRzKHNlcmlhbGl6ZXIsIHZhbHVlLmZ1bmN0aW9uQXJndW1lbnRzKTtcbiAgICBzZXJpYWxpemVUeXBlQXJndW1lbnRzKHNlcmlhbGl6ZXIsIHZhbHVlLnR5cGVBcmd1bWVudHMgPz8gW10pO1xuICAgIGNvbnN0IG11bHRpc2lnQWRkcmVzcyA9IEFjY291bnRBZGRyZXNzNS5mcm9tKHZhbHVlLm11bHRpc2lnQWRkcmVzcyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemUobXVsdGlzaWdBZGRyZXNzKTtcbiAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgaW4gdmFsdWUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChcbiAgICAgIDAgLyogRW50cnlGdW5jdGlvbiAqL1xuICAgICk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUuZnVuY3Rpb24pO1xuICAgIHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudHMoc2VyaWFsaXplciwgdmFsdWUuZnVuY3Rpb25Bcmd1bWVudHMpO1xuICAgIHNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoc2VyaWFsaXplciwgdmFsdWUudHlwZUFyZ3VtZW50cyA/PyBbXSk7XG4gIH0gZWxzZSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoMSAvKiBTY3JpcHQgKi8pO1xuICAgIGNvbnN0IGJ5dGVjb2RlID0gSGV4LmZyb21IZXhJbnB1dCh2YWx1ZS5ieXRlY29kZSk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhieXRlY29kZS50b1VpbnQ4QXJyYXkoKSk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgodmFsdWUuZnVuY3Rpb25Bcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IGFyZ3VtZW50IG9mIHZhbHVlLmZ1bmN0aW9uQXJndW1lbnRzKSB7XG4gICAgICBhcmd1bWVudC5zZXJpYWxpemVGb3JTY3JpcHRGdW5jdGlvbihzZXJpYWxpemVyKTtcbiAgICB9XG4gICAgc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhzZXJpYWxpemVyLCB2YWx1ZS50eXBlQXJndW1lbnRzID8/IFtdKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVUcmFuc2FjdGlvblBheWxvYWRJbnB1dChkZXNlcmlhbGl6ZXIpIHtcbiAgY29uc3QgdmFyaWFudCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICBzd2l0Y2ggKHZhcmlhbnQpIHtcbiAgICBjYXNlIDIgLyogTXVsdGlzaWcgKi86IHtcbiAgICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgICAgIGNvbnN0IGZ1bmN0aW9uQXJndW1lbnRzID0gZGVzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnRzKGRlc2VyaWFsaXplcik7XG4gICAgICBjb25zdCB0eXBlQXJndW1lbnRzID0gZGVzZXJpYWxpemVUeXBlQXJndW1lbnRzKGRlc2VyaWFsaXplcik7XG4gICAgICBjb25zdCBtdWx0aXNpZ0FkZHJlc3MgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3M1KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZ1bmN0aW9uOiBmdW5jdGlvbklkLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50cyxcbiAgICAgICAgbXVsdGlzaWdBZGRyZXNzLFxuICAgICAgICB0eXBlQXJndW1lbnRzXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIDAgLyogRW50cnlGdW5jdGlvbiAqLzoge1xuICAgICAgY29uc3QgZnVuY3Rpb25JZCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICAgICAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHMgPSBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudHMoZGVzZXJpYWxpemVyKTtcbiAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBkZXNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoZGVzZXJpYWxpemVyKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZ1bmN0aW9uOiBmdW5jdGlvbklkLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50cyxcbiAgICAgICAgdHlwZUFyZ3VtZW50c1xuICAgICAgfTtcbiAgICB9XG4gICAgY2FzZSAxIC8qIFNjcmlwdCAqLzoge1xuICAgICAgY29uc3QgYnl0ZWNvZGUgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCeXRlcygpO1xuICAgICAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHNMZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICAgIGNvbnN0IGZ1bmN0aW9uQXJndW1lbnRzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZ1bmN0aW9uQXJndW1lbnRzTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgYXJndW1lbnQgPSBkZXNlcmlhbGl6ZUZyb21TY3JpcHRBcmd1bWVudChkZXNlcmlhbGl6ZXIpO1xuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50cy5wdXNoKGFyZ3VtZW50KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBkZXNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoZGVzZXJpYWxpemVyKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5dGVjb2RlLFxuICAgICAgICBmdW5jdGlvbkFyZ3VtZW50cyxcbiAgICAgICAgdHlwZUFyZ3VtZW50c1xuICAgICAgfTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2YXJpYW50XCIpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvaGVscGVycy50c1xuZnVuY3Rpb24gY2hhaW5JZFRvTmV0d29yayhjaGFpbklkKSB7XG4gIGlmIChjaGFpbklkID09PSBOZXR3b3JrVG9DaGFpbklkLm1haW5uZXQpIHtcbiAgICByZXR1cm4gTmV0d29yay5NQUlOTkVUO1xuICB9XG4gIGlmIChjaGFpbklkID09PSBOZXR3b3JrVG9DaGFpbklkLnRlc3RuZXQpIHtcbiAgICByZXR1cm4gTmV0d29yay5URVNUTkVUO1xuICB9XG4gIGlmIChjaGFpbklkID49IDUwICYmIGNoYWluSWQgPCAxMDAgfHwgY2hhaW5JZCA+PSAxMDAgJiYgY2hhaW5JZCA8IDEyNSkge1xuICAgIHJldHVybiBzaGVsYnluZXQubmFtZTtcbiAgfVxuICByZXR1cm4gTmV0d29yay5ERVZORVQ7XG59XG5mdW5jdGlvbiBpc1N1cHBvcnRlZE5ldHdvcmsobmV0d29yaykge1xuICByZXR1cm4gW1xuICAgIE5ldHdvcmsuTUFJTk5FVCxcbiAgICBOZXR3b3JrLlRFU1RORVQsXG4gICAgTmV0d29yay5ERVZORVQsXG4gICAgc2hlbGJ5bmV0Lm5hbWVcbiAgXS5pbmNsdWRlcyhuZXR3b3JrKTtcbn1cblxuLy8gc3JjL1dhbGxldFJlcXVlc3QudHNcbmltcG9ydCB7IERlc2VyaWFsaXplciBhcyBEZXNlcmlhbGl6ZXI5LCBTZXJpYWxpemVyIGFzIFNlcmlhbGl6ZXI5IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplV2FsbGV0UmVxdWVzdCh7XG4gIGRhcHBJbmZvLFxuICBuYW1lLFxuICB2ZXJzaW9uXG59KSB7XG4gIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcjkoKTtcbiAgc2VyaWFsaXplRGFwcEluZm8oc2VyaWFsaXplciwgZGFwcEluZm8pO1xuICBjb25zdCBkYXRhID0gc2VyaWFsaXplci50b1VpbnQ4QXJyYXkoKTtcbiAgcmV0dXJuIHsgZGF0YSwgbmFtZSwgdmVyc2lvbiB9O1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHtcbiAgZGF0YSxcbiAgbmFtZSxcbiAgdmVyc2lvblxufSkge1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyOShkYXRhKTtcbiAgY29uc3QgZGFwcEluZm8gPSBkZXNlcmlhbGl6ZURhcHBJbmZvKGRlc2VyaWFsaXplcik7XG4gIHJldHVybiB7IGRhcHBJbmZvLCBuYW1lLCB2ZXJzaW9uIH07XG59XG5mdW5jdGlvbiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3Moe1xuICBhcmdzLFxuICBkYXBwSW5mbyxcbiAgbmFtZSxcbiAgdmVyc2lvblxufSwgc2VyaWFsaXplQXJnc0ZuKSB7XG4gIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcjkoKTtcbiAgc2VyaWFsaXplRGFwcEluZm8oc2VyaWFsaXplciwgZGFwcEluZm8pO1xuICBzZXJpYWxpemVBcmdzRm4oc2VyaWFsaXplciwgYXJncyk7XG4gIGNvbnN0IGRhdGEgPSBzZXJpYWxpemVyLnRvVWludDhBcnJheSgpO1xuICByZXR1cm4geyBkYXRhLCBuYW1lLCB2ZXJzaW9uIH07XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyh7IGRhdGEsIG5hbWUsIHZlcnNpb24gfSwgZGVzZXJpYWxpemVBcmdzRm4pIHtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IERlc2VyaWFsaXplcjkoZGF0YSk7XG4gIGNvbnN0IGRhcHBJbmZvID0gZGVzZXJpYWxpemVEYXBwSW5mbyhkZXNlcmlhbGl6ZXIpO1xuICBjb25zdCBhcmdzID0gZGVzZXJpYWxpemVBcmdzRm4oZGVzZXJpYWxpemVyKTtcbiAgcmV0dXJuIHsgYXJncywgZGFwcEluZm8sIG5hbWUsIHZlcnNpb24gfTtcbn1cblxuLy8gc3JjL2ZlYXR1cmVzL2Nvbm5lY3QvcmVxdWVzdC50c1xudmFyIENvbm5lY3RSZXF1ZXN0O1xuKChDb25uZWN0UmVxdWVzdDIpID0+IHtcbiAgQ29ubmVjdFJlcXVlc3QyLm5hbWUgPSBcImNvbm5lY3RcIjtcbiAgQ29ubmVjdFJlcXVlc3QyLnN1cHBvcnRlZFZlcnNpb25zID0gWzEsIDIsIDMsIDRdO1xuICBDb25uZWN0UmVxdWVzdDIuY3VycmVudFZlcnNpb24gPSA0O1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb25TdHIodmFsdWUuZGFwcElkKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZU9wdGlvblN0cih2YWx1ZS5kYXBwRWQyNTUxOVB1YmxpY0tleUI2NCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb25TdHIodmFsdWUucHJlZmVycmVkV2FsbGV0TmFtZSk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLmNsYWltT3B0aW9ucyAhPT0gdm9pZCAwKTtcbiAgICBpZiAodmFsdWUuY2xhaW1PcHRpb25zKSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZS5jbGFpbU9wdGlvbnMuc2VjcmV0S2V5KTtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLmNsYWltT3B0aW9ucy5uZXR3b3JrKTtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplT3B0aW9uU3RyKHZhbHVlLmNsYWltT3B0aW9ucy5hc3NldCk7XG4gICAgICBpZiAoIWlzU3VwcG9ydGVkTmV0d29yayh2YWx1ZS5jbGFpbU9wdGlvbnMubmV0d29yaykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBuZXR3b3JrICcke3ZhbHVlLmNsYWltT3B0aW9ucy5uZXR3b3JrfSdgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgQ29ubmVjdFJlcXVlc3QyLnNlcmlhbGl6ZUFyZ3MgPSBzZXJpYWxpemVBcmdzO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFyZ3MoZGVzZXJpYWxpemVyLCB2ZXJzaW9uKSB7XG4gICAgaWYgKHZlcnNpb24gPT09IDEpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgY29uc3QgZGFwcElkID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplT3B0aW9uKFwic3RyaW5nXCIpO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5UHVibGljS2V5QjY0ID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplT3B0aW9uKFwic3RyaW5nXCIpO1xuICAgIGNvbnN0IHByZWZlcnJlZFdhbGxldE5hbWUgPSB2ZXJzaW9uID49IDMgPyBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVPcHRpb24oXCJzdHJpbmdcIikgOiB2b2lkIDA7XG4gICAgY29uc3QgaGFzQ2xhaW1PcHRpb25zID0gdmVyc2lvbiA+PSA0ID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpIDogZmFsc2U7XG4gICAgbGV0IGNsYWltT3B0aW9ucztcbiAgICBpZiAoaGFzQ2xhaW1PcHRpb25zKSB7XG4gICAgICBjb25zdCBzZWNyZXRLZXkgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoRWQyNTUxOVByaXZhdGVLZXkpO1xuICAgICAgY29uc3QgbmV0d29yayA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICAgICAgY29uc3QgYXNzZXQgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVPcHRpb24oXCJzdHJpbmdcIik7XG4gICAgICBpZiAoIWlzU3VwcG9ydGVkTmV0d29yayhuZXR3b3JrKSB8fCBuZXR3b3JrID09PSBzaGVsYnluZXQubmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG5ldHdvcmsgJyR7bmV0d29ya30nYCk7XG4gICAgICB9XG4gICAgICBjbGFpbU9wdGlvbnMgPSB7IGFzc2V0LCBuZXR3b3JrLCBzZWNyZXRLZXkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsYWltT3B0aW9ucyxcbiAgICAgIGRhcHBFZDI1NTE5UHVibGljS2V5QjY0LFxuICAgICAgZGFwcElkLFxuICAgICAgcHJlZmVycmVkV2FsbGV0TmFtZVxuICAgIH07XG4gIH1cbiAgQ29ubmVjdFJlcXVlc3QyLmRlc2VyaWFsaXplQXJncyA9IGRlc2VyaWFsaXplQXJncztcbiAgZnVuY3Rpb24gc2VyaWFsaXplKGRhcHBJbmZvLCBhcmdzID0ge30pIHtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzKFxuICAgICAgeyBhcmdzLCBkYXBwSW5mbywgbmFtZTogQ29ubmVjdFJlcXVlc3QyLm5hbWUsIHZlcnNpb246IENvbm5lY3RSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9LFxuICAgICAgc2VyaWFsaXplQXJnc1xuICAgICk7XG4gIH1cbiAgQ29ubmVjdFJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUocmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhcbiAgICAgIHJlcXVlc3QsXG4gICAgICAoZCkgPT4gZGVzZXJpYWxpemVBcmdzKGQsIHJlcXVlc3QudmVyc2lvbilcbiAgICApO1xuICB9XG4gIENvbm5lY3RSZXF1ZXN0Mi5kZXNlcmlhbGl6ZSA9IGRlc2VyaWFsaXplO1xuICBmdW5jdGlvbiBpc1NlcmlhbGl6ZWQocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0Lm5hbWUgPT09IENvbm5lY3RSZXF1ZXN0Mi5uYW1lICYmIENvbm5lY3RSZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucy5pbmNsdWRlcyhyZXF1ZXN0LnZlcnNpb24pO1xuICB9XG4gIENvbm5lY3RSZXF1ZXN0Mi5pc1NlcmlhbGl6ZWQgPSBpc1NlcmlhbGl6ZWQ7XG59KShDb25uZWN0UmVxdWVzdCB8fCAoQ29ubmVjdFJlcXVlc3QgPSB7fSkpO1xuXG4vLyBzcmMvVXNlclJlc3BvbnNlLnRzXG5mdW5jdGlvbiBtYWtlVXNlckFwcHJvdmFsKGFyZ3MpIHtcbiAgcmV0dXJuIHsgYXJncywgc3RhdHVzOiBcImFwcHJvdmVkXCIgfTtcbn1cbmZ1bmN0aW9uIG1ha2VVc2VyUmVzcG9uc2VTZXJpYWxpemVGbihzZXJpYWxpemVBcmdzKSB7XG4gIHJldHVybiAoc2VyaWFsaXplciwgdmFsdWUpID0+IHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuc3RhdHVzID09PSBcImFwcHJvdmVkXCIpO1xuICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYXBwcm92ZWRcIikge1xuICAgICAgc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZS5hcmdzKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBtYWtlVXNlclJlc3BvbnNlRGVzZXJpYWxpemVGbihkZXNlcmlhbGl6ZUFyZ3MpIHtcbiAgcmV0dXJuIChkZXNlcmlhbGl6ZXIpID0+IHtcbiAgICBjb25zdCBpc0FwcHJvdmVkID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpO1xuICAgIHJldHVybiBpc0FwcHJvdmVkID8geyBhcmdzOiBkZXNlcmlhbGl6ZUFyZ3MoZGVzZXJpYWxpemVyKSwgc3RhdHVzOiBcImFwcHJvdmVkXCIgfSA6IHsgc3RhdHVzOiBcImRpc21pc3NlZFwiIH07XG4gIH07XG59XG5cbi8vIHNyYy9XYWxsZXRSZXNwb25zZS50c1xuaW1wb3J0IHsgRGVzZXJpYWxpemVyIGFzIERlc2VyaWFsaXplcjExLCBTZXJpYWxpemVyIGFzIFNlcmlhbGl6ZXIxMSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmZ1bmN0aW9uIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsIHNlcmlhbGl6ZUZuKSB7XG4gIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcjExKCk7XG4gIHNlcmlhbGl6ZUZuKHNlcmlhbGl6ZXIsIGFyZ3MpO1xuICBjb25zdCBkYXRhID0gc2VyaWFsaXplci50b1VpbnQ4QXJyYXkoKTtcbiAgcmV0dXJuIHsgZGF0YSB9O1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZSh7IGRhdGEgfSwgZGVzZXJpYWxpemVGbikge1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyMTEoZGF0YSk7XG4gIGNvbnN0IGFyZ3MgPSBkZXNlcmlhbGl6ZUZuKGRlc2VyaWFsaXplcik7XG4gIHJldHVybiB7IGFyZ3MgfTtcbn1cblxuLy8gc3JjL2ZlYXR1cmVzL2Nvbm5lY3QvcmVzcG9uc2UudHNcbnZhciBDb25uZWN0UmVzcG9uc2U7XG4oKENvbm5lY3RSZXNwb25zZTIpID0+IHtcbiAgQ29ubmVjdFJlc3BvbnNlMi5zdXBwb3J0ZWRWZXJzaW9ucyA9IFsxLCAyXTtcbiAgQ29ubmVjdFJlc3BvbnNlMi5jdXJyZW50VmVyc2lvbiA9IDI7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFwcHJvdmFsQXJnc1YxKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplQWNjb3VudEluZm8oc2VyaWFsaXplciwgdmFsdWUuYWNjb3VudCk7XG4gIH1cbiAgZnVuY3Rpb24gc2VyaWFsaXplQXBwcm92YWxBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplQWNjb3VudEluZm8oc2VyaWFsaXplciwgdmFsdWUuYWNjb3VudCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb25TdHIoXG4gICAgICB2YWx1ZS5wYWlyaW5nICE9PSB2b2lkIDAgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZS5wYWlyaW5nKSA6IHZvaWQgMFxuICAgICk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MoZGVzZXJpYWxpemVyKSB7XG4gICAgY29uc3QgYWNjb3VudCA9IGRlc2VyaWFsaXplQWNjb3VudEluZm8oZGVzZXJpYWxpemVyKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUGFpcmluZyA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZU9wdGlvbihcInN0cmluZ1wiKTtcbiAgICBjb25zdCBwYWlyaW5nID0gc2VyaWFsaXplZFBhaXJpbmcgIT09IHZvaWQgMCA/IEpTT04ucGFyc2Uoc2VyaWFsaXplZFBhaXJpbmcpIDogdm9pZCAwO1xuICAgIHJldHVybiB7IGFjY291bnQsIHBhaXJpbmcgfTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVBcmdzVjEgPSBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXBwcm92YWxBcmdzVjEpO1xuICBjb25zdCBzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuKHNlcmlhbGl6ZUFwcHJvdmFsQXJncyk7XG4gIGNvbnN0IGRlc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VEZXNlcmlhbGl6ZUZuKFxuICAgIGRlc2VyaWFsaXplQXBwcm92YWxBcmdzXG4gICk7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzLCB2ZXJzaW9uID0gQ29ubmVjdFJlc3BvbnNlMi5jdXJyZW50VmVyc2lvbikge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXNwb25zZShcbiAgICAgIGFyZ3MsXG4gICAgICB2ZXJzaW9uID09PSAxID8gc2VyaWFsaXplQXJnc1YxIDogc2VyaWFsaXplQXJnc1xuICAgICk7XG4gIH1cbiAgQ29ubmVjdFJlc3BvbnNlMi5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKHNlcmlhbGl6ZWRSZXNwb25zZSwgZGVzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBDb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShDb25uZWN0UmVzcG9uc2UgfHwgKENvbm5lY3RSZXNwb25zZSA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9kaXNjb25uZWN0L3JlcXVlc3QudHNcbnZhciBEaXNjb25uZWN0UmVxdWVzdDtcbigoRGlzY29ubmVjdFJlcXVlc3QyKSA9PiB7XG4gIERpc2Nvbm5lY3RSZXF1ZXN0Mi5uYW1lID0gXCJkaXNjb25uZWN0XCI7XG4gIERpc2Nvbm5lY3RSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiA9IDE7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHsgZGFwcEluZm8sIG5hbWU6IERpc2Nvbm5lY3RSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBEaXNjb25uZWN0UmVxdWVzdDIuY3VycmVudFZlcnNpb24gfSk7XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUocmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QocmVxdWVzdCk7XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gRGlzY29ubmVjdFJlcXVlc3QyLm5hbWUgJiYgcmVxdWVzdC52ZXJzaW9uID09PSBEaXNjb25uZWN0UmVxdWVzdDIuY3VycmVudFZlcnNpb247XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKERpc2Nvbm5lY3RSZXF1ZXN0IHx8IChEaXNjb25uZWN0UmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9kaXNjb25uZWN0L3Jlc3BvbnNlLnRzXG52YXIgRGlzY29ubmVjdFJlc3BvbnNlO1xuKChEaXNjb25uZWN0UmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsICgpID0+IHtcbiAgICB9KTtcbiAgfVxuICBEaXNjb25uZWN0UmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCAoKSA9PiAoe30pKTtcbiAgfVxuICBEaXNjb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShEaXNjb25uZWN0UmVzcG9uc2UgfHwgKERpc2Nvbm5lY3RSZXNwb25zZSA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9nZXRDb25uZWN0ZWRBY2NvdW50cy9yZXF1ZXN0LnRzXG52YXIgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0O1xuKChHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QyKSA9PiB7XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSA9IFwiZ2V0Q29ubmVjdGVkQWNjb3VudHNcIjtcbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiA9IDE7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHsgZGFwcEluZm8sIG5hbWU6IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSwgdmVyc2lvbjogR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9KTtcbiAgfVxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUocmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QocmVxdWVzdCk7XG4gIH1cbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5kZXNlcmlhbGl6ZSA9IGRlc2VyaWFsaXplO1xuICBmdW5jdGlvbiBpc1NlcmlhbGl6ZWQocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0Lm5hbWUgPT09IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSAmJiByZXF1ZXN0LnZlcnNpb24gPT09IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIuY3VycmVudFZlcnNpb247XG4gIH1cbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5pc1NlcmlhbGl6ZWQgPSBpc1NlcmlhbGl6ZWQ7XG59KShHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QgfHwgKEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9nZXRDb25uZWN0ZWRBY2NvdW50cy9yZXNwb25zZS50c1xudmFyIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2U7XG4oKEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFyZ3Moc2VyaWFsaXplciwgYXJncykge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KGFyZ3MubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgYXJncykge1xuICAgICAgc2VyaWFsaXplQWNjb3VudEluZm8oc2VyaWFsaXplciwgYWNjb3VudCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCBsZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBhY2NvdW50cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGFjY291bnRzLnB1c2goZGVzZXJpYWxpemVBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZXIpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY291bnRzO1xuICB9XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCBkZXNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlIHx8IChHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL2lzQ29ubmVjdGVkL3JlcXVlc3QudHNcbnZhciBJc0Nvbm5lY3RlZFJlcXVlc3Q7XG4oKElzQ29ubmVjdGVkUmVxdWVzdDIpID0+IHtcbiAgSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lID0gXCJpc0Nvbm5lY3RlZFwiO1xuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gMTtcbiAgZnVuY3Rpb24gc2VyaWFsaXplKGRhcHBJbmZvKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3QoeyBkYXBwSW5mbywgbmFtZTogSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBJc0Nvbm5lY3RlZFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH0pO1xuICB9XG4gIElzQ29ubmVjdGVkUmVxdWVzdDIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdChyZXF1ZXN0KTtcbiAgfVxuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lICYmIHJlcXVlc3QudmVyc2lvbiA9PT0gSXNDb25uZWN0ZWRSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbjtcbiAgfVxuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKElzQ29ubmVjdGVkUmVxdWVzdCB8fCAoSXNDb25uZWN0ZWRSZXF1ZXN0ID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL2lzQ29ubmVjdGVkL3Jlc3BvbnNlLnRzXG52YXIgSXNDb25uZWN0ZWRSZXNwb25zZTtcbigoSXNDb25uZWN0ZWRSZXNwb25zZTIpID0+IHtcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplcikge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gIH1cbiAgZnVuY3Rpb24gc2VyaWFsaXplKGFyZ3MpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UoYXJncywgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgSXNDb25uZWN0ZWRSZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShzZXJpYWxpemVkUmVzcG9uc2UsIGRlc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgSXNDb25uZWN0ZWRSZXNwb25zZTIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbn0pKElzQ29ubmVjdGVkUmVzcG9uc2UgfHwgKElzQ29ubmVjdGVkUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uL3JlcXVlc3QudHNcbmltcG9ydCB7XG4gIEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNixcbiAgVHJhbnNhY3Rpb25QYXlsb2FkXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0O1xuKChTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0MikgPT4ge1xuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lID0gXCJzaWduQW5kU3VibWl0VHJhbnNhY3Rpb25cIjtcbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMiwgMywgNF07XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gNDtcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZS5uZXR3b3JrICE9PSB2b2lkIDAgJiYgIWlzU3VwcG9ydGVkTmV0d29yayh2YWx1ZS5uZXR3b3JrKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBuZXR3b3JrICcke3ZhbHVlLm5ldHdvcmt9J2ApO1xuICAgIH1cbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuc2lnbmVyQWRkcmVzcyAhPT0gdm9pZCAwKTtcbiAgICBpZiAodmFsdWUuc2lnbmVyQWRkcmVzcyAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZS5zaWduZXJBZGRyZXNzKTtcbiAgICB9XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb24odmFsdWUubmV0d29yayk7XG4gICAgaWYgKFwiYmNzVG9CeXRlc1wiIGluIHZhbHVlLnBheWxvYWQpIHtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh0cnVlKTtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLnBheWxvYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2woZmFsc2UpO1xuICAgICAgc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQoc2VyaWFsaXplciwgdmFsdWUucGF5bG9hZCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTY0KHZhbHVlLmV4cGlyYXRpb25UaW1lc3RhbXAgPz8gMCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgodmFsdWUuZ2FzVW5pdFByaWNlID8/IDApO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLm1heEdhc0Ftb3VudCA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh2YWx1ZS5mZWVQYXllciA/IDEgOiAwKTtcbiAgICBpZiAodmFsdWUuZmVlUGF5ZXIpIHtcbiAgICAgIHNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQoc2VyaWFsaXplciwgdmFsdWUuZmVlUGF5ZXIpO1xuICAgIH1cbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5zZXJpYWxpemVBcmdzID0gc2VyaWFsaXplQXJncztcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgdmVyc2lvbikge1xuICAgIGNvbnN0IGhhc1NpZ25lckFkZHJlc3MgPSB2ZXJzaW9uID49IDMgJiYgZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpO1xuICAgIGNvbnN0IHNpZ25lckFkZHJlc3MgPSBoYXNTaWduZXJBZGRyZXNzID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzNikgOiB2b2lkIDA7XG4gICAgY29uc3QgbmV0d29yayA9IHZlcnNpb24gPT09IDEgPyBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKSA6IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZU9wdGlvbihcInN0cmluZ1wiKTtcbiAgICBpZiAobmV0d29yayAhPT0gdm9pZCAwICYmICFpc1N1cHBvcnRlZE5ldHdvcmsobmV0d29yaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbmV0d29yayAnJHtuZXR3b3JrfSdgKTtcbiAgICB9XG4gICAgY29uc3QgaXNQYXlsb2FkQmNzU2VyaWFsaXphYmxlID0gdmVyc2lvbiA9PT0gMSB8fCBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IGlzUGF5bG9hZEJjc1NlcmlhbGl6YWJsZSA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShUcmFuc2FjdGlvblBheWxvYWQpIDogZGVzZXJpYWxpemVUcmFuc2FjdGlvblBheWxvYWRJbnB1dChkZXNlcmlhbGl6ZXIpO1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lc3RhbXAgPSBOdW1iZXIoZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVTY0KCkpO1xuICAgIGNvbnN0IGdhc1VuaXRQcmljZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgIGNvbnN0IG1heEdhc0Ftb3VudCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgIGNvbnN0IGhhc0ZlZVBheWVyID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gICAgY29uc3QgZmVlUGF5ZXIgPSBoYXNGZWVQYXllciA/IGRlc2VyaWFsaXplQWNjb3VudEF1dGhlbnRpY2F0b3JJbnB1dChkZXNlcmlhbGl6ZXIpIDogdm9pZCAwO1xuICAgIHJldHVybiB7XG4gICAgICBleHBpcmF0aW9uVGltZXN0YW1wOiBleHBpcmF0aW9uVGltZXN0YW1wID4gMCA/IGV4cGlyYXRpb25UaW1lc3RhbXAgOiB2b2lkIDAsXG4gICAgICBmZWVQYXllcixcbiAgICAgIGdhc1VuaXRQcmljZTogZ2FzVW5pdFByaWNlID4gMCA/IGdhc1VuaXRQcmljZSA6IHZvaWQgMCxcbiAgICAgIG1heEdhc0Ftb3VudDogbWF4R2FzQW1vdW50ID4gMCA/IG1heEdhc0Ftb3VudCA6IHZvaWQgMCxcbiAgICAgIG5ldHdvcmssXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2lnbmVyQWRkcmVzc1xuICAgIH07XG4gIH1cbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuZGVzZXJpYWxpemVBcmdzID0gZGVzZXJpYWxpemVBcmdzO1xuICBmdW5jdGlvbiBzZXJpYWxpemUoZGFwcEluZm8sIGFyZ3MpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0geyBhcmdzLCBkYXBwSW5mbywgbmFtZTogU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIubmFtZSwgdmVyc2lvbjogU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuY3VycmVudFZlcnNpb24gfTtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzKHJlcXVlc3QsIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlcXVlc3QpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MoXG4gICAgICBzZXJpYWxpemVkUmVxdWVzdCxcbiAgICAgIChkZXNlcmlhbGl6ZXIpID0+IGRlc2VyaWFsaXplQXJncyhkZXNlcmlhbGl6ZXIsIHNlcmlhbGl6ZWRSZXF1ZXN0LnZlcnNpb24pXG4gICAgKTtcbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5kZXNlcmlhbGl6ZSA9IGRlc2VyaWFsaXplO1xuICBmdW5jdGlvbiBpc1NlcmlhbGl6ZWQocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0Lm5hbWUgPT09IFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLm5hbWUgJiYgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMuaW5jbHVkZXMocmVxdWVzdC52ZXJzaW9uKTtcbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5pc1NlcmlhbGl6ZWQgPSBpc1NlcmlhbGl6ZWQ7XG59KShTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0IHx8IChTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0ID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL3NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbi9yZXNwb25zZS50c1xudmFyIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlO1xuKChTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZTIpID0+IHtcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXBwcm92YWxBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUudHhuSGFzaCk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MoZGVzZXJpYWxpemVyKSB7XG4gICAgY29uc3QgdHhuSGFzaCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICAgIHJldHVybiB7IHR4bkhhc2ggfTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuKHNlcmlhbGl6ZUFwcHJvdmFsQXJncyk7XG4gIGNvbnN0IGRlc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VEZXNlcmlhbGl6ZUZuKFxuICAgIGRlc2VyaWFsaXplQXBwcm92YWxBcmdzXG4gICk7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlMi5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKHNlcmlhbGl6ZWRSZXNwb25zZSwgZGVzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZTIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbn0pKFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlIHx8IChTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZSA9IHt9KSk7XG5cbi8vIHNyYy9zaGFyZWQvQXB0b3NTaWduSW5JbnB1dC50c1xuZnVuY3Rpb24gc2VyaWFsaXplQXB0b3NTaWduSW5JbnB1dChzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cihKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVBcHRvc1NpZ25JbklucHV0KGRlc2VyaWFsaXplcikge1xuICByZXR1cm4gSlNPTi5wYXJzZShkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKSk7XG59XG5cbi8vIHNyYy9mZWF0dXJlcy9zaWduSW4vcmVxdWVzdC50c1xudmFyIFNpZ25JblJlcXVlc3Q7XG4oKFNpZ25JblJlcXVlc3QyKSA9PiB7XG4gIFNpZ25JblJlcXVlc3QyLm5hbWUgPSBcInNpZ25JblwiO1xuICBTaWduSW5SZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucyA9IFsxLCAyLCAzXTtcbiAgU2lnbkluUmVxdWVzdDIuY3VycmVudFZlcnNpb24gPSAzO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLm5ldHdvcmsgIT09IHZvaWQgMCAmJiAhaXNTdXBwb3J0ZWROZXR3b3JrKHZhbHVlLm5ldHdvcmspKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbnN1cHBvcnRlZCBuZXR3b3JrICcke3ZhbHVlLm5ldHdvcmt9JyBpbiBTaWduSW5SZXF1ZXN0LnNlcmlhbGl6ZUFyZ3NgXG4gICAgICApO1xuICAgIH1cbiAgICBzZXJpYWxpemVBcHRvc1NpZ25JbklucHV0KHNlcmlhbGl6ZXIsIHZhbHVlKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS5uZXR3b3JrKTtcbiAgfVxuICBTaWduSW5SZXF1ZXN0Mi5zZXJpYWxpemVBcmdzID0gc2VyaWFsaXplQXJncztcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgXykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5kZXNlcmlhbGl6ZUFwdG9zU2lnbkluSW5wdXQoZGVzZXJpYWxpemVyKSxcbiAgICAgIG5ldHdvcms6IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpXG4gICAgfTtcbiAgfVxuICBTaWduSW5SZXF1ZXN0Mi5kZXNlcmlhbGl6ZUFyZ3MgPSBkZXNlcmlhbGl6ZUFyZ3M7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbywgYXJncykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MoXG4gICAgICB7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lOiBTaWduSW5SZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBTaWduSW5SZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9LFxuICAgICAgc2VyaWFsaXplQXJnc1xuICAgICk7XG4gIH1cbiAgU2lnbkluUmVxdWVzdDIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzKFxuICAgICAgcmVxdWVzdCxcbiAgICAgIChkKSA9PiBkZXNlcmlhbGl6ZUFyZ3MoZCwgcmVxdWVzdC52ZXJzaW9uKVxuICAgICk7XG4gIH1cbiAgU2lnbkluUmVxdWVzdDIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gaXNTZXJpYWxpemVkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5uYW1lID09PSBTaWduSW5SZXF1ZXN0Mi5uYW1lICYmIFNpZ25JblJlcXVlc3QyLnN1cHBvcnRlZFZlcnNpb25zLmluY2x1ZGVzKHJlcXVlc3QudmVyc2lvbik7XG4gIH1cbiAgU2lnbkluUmVxdWVzdDIuaXNTZXJpYWxpemVkID0gaXNTZXJpYWxpemVkO1xufSkoU2lnbkluUmVxdWVzdCB8fCAoU2lnbkluUmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9zaGFyZWQvQXB0b3NTaWduSW5PdXRwdXQudHNcbmltcG9ydCB7IEFjY291bnRJbmZvIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3dhbGxldC1zdGFuZGFyZFwiO1xuZnVuY3Rpb24gc2VyaWFsaXplQXB0b3NTaWduSW5PdXRwdXRWMShzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBzZXJpYWxpemVBY2NvdW50SW5mbyhzZXJpYWxpemVyLCB2YWx1ZS5hY2NvdW50KTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIoSlNPTi5zdHJpbmdpZnkodmFsdWUuaW5wdXQpKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUucGxhaW5UZXh0KTtcbiAgc2VyaWFsaXplU2lnbmF0dXJlKHNlcmlhbGl6ZXIsIHZhbHVlLnNpZ25hdHVyZSk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplQnl0ZXModmFsdWUuc2lnbmluZ01lc3NhZ2UpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS50eXBlKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplQXB0b3NTaWduSW5PdXRwdXRWMShkZXNlcmlhbGl6ZXIpIHtcbiAgcmV0dXJuIHtcbiAgICBhY2NvdW50OiBuZXcgQWNjb3VudEluZm8oZGVzZXJpYWxpemVBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZXIpKSxcbiAgICBpbnB1dDogSlNPTi5wYXJzZShkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKSksXG4gICAgcGxhaW5UZXh0OiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKSxcbiAgICBzaWduYXR1cmU6IGRlc2VyaWFsaXplU2lnbmF0dXJlKGRlc2VyaWFsaXplciksXG4gICAgc2lnbmluZ01lc3NhZ2U6IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCksXG4gICAgdHlwZTogZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKClcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZUFwdG9zU2lnbkluT3V0cHV0KHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZUFjY291bnRJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlLmFjY291bnQpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cihKU09OLnN0cmluZ2lmeSh2YWx1ZS5pbnB1dCkpO1xuICBzZXJpYWxpemVTaWduYXR1cmUoc2VyaWFsaXplciwgdmFsdWUuc2lnbmF0dXJlKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUudHlwZSk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUFwdG9zU2lnbkluT3V0cHV0KGRlc2VyaWFsaXplcikge1xuICByZXR1cm4ge1xuICAgIGFjY291bnQ6IG5ldyBBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZUFjY291bnRJbmZvKGRlc2VyaWFsaXplcikpLFxuICAgIGlucHV0OiBKU09OLnBhcnNlKGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpKSxcbiAgICBzaWduYXR1cmU6IGRlc2VyaWFsaXplU2lnbmF0dXJlKGRlc2VyaWFsaXplciksXG4gICAgdHlwZTogZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKClcbiAgfTtcbn1cblxuLy8gc3JjL2ZlYXR1cmVzL3NpZ25Jbi9yZXNwb25zZS50c1xudmFyIFNpZ25JblJlc3BvbnNlO1xuKChTaWduSW5SZXNwb25zZTIpID0+IHtcbiAgU2lnbkluUmVzcG9uc2UyLnN1cHBvcnRlZFZlcnNpb25zID0gWzEsIDJdO1xuICBTaWduSW5SZXNwb25zZTIuY3VycmVudFZlcnNpb24gPSAyO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcHByb3ZhbEFyZ3NWMShzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZUFwdG9zU2lnbkluT3V0cHV0VjEoc2VyaWFsaXplciwgdmFsdWUpO1xuICB9XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplQXBwcm92YWxBcmdzVjEoZGVzZXJpYWxpemVyKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplQXB0b3NTaWduSW5PdXRwdXRWMShkZXNlcmlhbGl6ZXIpO1xuICB9XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFwcHJvdmFsQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZUFwdG9zU2lnbkluT3V0cHV0KHNlcmlhbGl6ZXIsIHZhbHVlKTtcbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVBcHRvc1NpZ25Jbk91dHB1dChkZXNlcmlhbGl6ZXIpO1xuICB9XG4gIGNvbnN0IHNlcmlhbGl6ZUFyZ3NWMSA9IG1ha2VVc2VyUmVzcG9uc2VTZXJpYWxpemVGbihzZXJpYWxpemVBcHByb3ZhbEFyZ3NWMSk7XG4gIGNvbnN0IHNlcmlhbGl6ZUFyZ3MgPSBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXBwcm92YWxBcmdzKTtcbiAgY29uc3QgZGVzZXJpYWxpemVBcmdzVjEgPSBtYWtlVXNlclJlc3BvbnNlRGVzZXJpYWxpemVGbihcbiAgICBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJnc1YxXG4gICk7XG4gIGNvbnN0IGRlc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VEZXNlcmlhbGl6ZUZuKFxuICAgIGRlc2VyaWFsaXplQXBwcm92YWxBcmdzXG4gICk7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzLCB2ZXJzaW9uID0gU2lnbkluUmVzcG9uc2UyLmN1cnJlbnRWZXJzaW9uKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKFxuICAgICAgYXJncyxcbiAgICAgIHZlcnNpb24gPT09IDEgPyBzZXJpYWxpemVBcmdzVjEgOiBzZXJpYWxpemVBcmdzXG4gICAgKTtcbiAgfVxuICBTaWduSW5SZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UsIHZlcnNpb24gPSBTaWduSW5SZXNwb25zZTIuY3VycmVudFZlcnNpb24pIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShcbiAgICAgIHNlcmlhbGl6ZWRSZXNwb25zZSxcbiAgICAgIHZlcnNpb24gPT09IDEgPyBkZXNlcmlhbGl6ZUFyZ3NWMSA6IGRlc2VyaWFsaXplQXJnc1xuICAgICk7XG4gIH1cbiAgU2lnbkluUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShTaWduSW5SZXNwb25zZSB8fCAoU2lnbkluUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbk1lc3NhZ2UvcmVxdWVzdC50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M3IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIFNpZ25NZXNzYWdlUmVxdWVzdDtcbigoU2lnbk1lc3NhZ2VSZXF1ZXN0MikgPT4ge1xuICBTaWduTWVzc2FnZVJlcXVlc3QyLm5hbWUgPSBcInNpZ25NZXNzYWdlXCI7XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMl07XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuY3VycmVudFZlcnNpb24gPSAyO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCk7XG4gICAgaWYgKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUuc2lnbmVyQWRkcmVzcyk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTgodmFsdWUuY2hhaW5JZCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyh2YWx1ZS5ub25jZSk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyh2YWx1ZS5tZXNzYWdlKTtcbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFyZ3MoZGVzZXJpYWxpemVyLCB2ZXJzaW9uKSB7XG4gICAgY29uc3QgaGFzU2lnbmVyQWRkcmVzcyA9IHZlcnNpb24gPj0gMiAmJiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gICAgY29uc3Qgc2lnbmVyQWRkcmVzcyA9IGhhc1NpZ25lckFkZHJlc3MgPyBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3M3KSA6IHZvaWQgMDtcbiAgICBjb25zdCBjaGFpbklkID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVTgoKTtcbiAgICBjb25zdCBub25jZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCk7XG4gICAgcmV0dXJuIHsgY2hhaW5JZCwgbWVzc2FnZSwgbm9uY2UsIHNpZ25lckFkZHJlc3MgfTtcbiAgfVxuICBmdW5jdGlvbiBzZXJpYWxpemUoZGFwcEluZm8sIGFyZ3MpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0geyBhcmdzLCBkYXBwSW5mbywgbmFtZTogU2lnbk1lc3NhZ2VSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBTaWduTWVzc2FnZVJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH07XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhyZXF1ZXN0LCBzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduTWVzc2FnZVJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlcXVlc3QpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MoXG4gICAgICBzZXJpYWxpemVkUmVxdWVzdCxcbiAgICAgIChkKSA9PiBkZXNlcmlhbGl6ZUFyZ3MoZCwgc2VyaWFsaXplZFJlcXVlc3QudmVyc2lvbilcbiAgICApO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gaXNTZXJpYWxpemVkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5uYW1lID09PSBTaWduTWVzc2FnZVJlcXVlc3QyLm5hbWUgJiYgcmVxdWVzdC52ZXJzaW9uID09PSBTaWduTWVzc2FnZVJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuaXNTZXJpYWxpemVkID0gaXNTZXJpYWxpemVkO1xufSkoU2lnbk1lc3NhZ2VSZXF1ZXN0IHx8IChTaWduTWVzc2FnZVJlcXVlc3QgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbk1lc3NhZ2UvcmVzcG9uc2UudHNcbnZhciBTaWduTWVzc2FnZVJlc3BvbnNlO1xuKChTaWduTWVzc2FnZVJlc3BvbnNlMikgPT4ge1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcHByb3ZhbEFyZ3Moc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS5mdWxsTWVzc2FnZSk7XG4gICAgc2VyaWFsaXplU2lnbmF0dXJlKHNlcmlhbGl6ZXIsIHZhbHVlLnNpZ25hdHVyZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MoZGVzZXJpYWxpemVyKSB7XG4gICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBkZXNlcmlhbGl6ZVNpZ25hdHVyZShkZXNlcmlhbGl6ZXIpO1xuICAgIHJldHVybiB7IGZ1bGxNZXNzYWdlLCBzaWduYXR1cmUgfTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuKHNlcmlhbGl6ZUFwcHJvdmFsQXJncyk7XG4gIGNvbnN0IGRlc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VEZXNlcmlhbGl6ZUZuKFxuICAgIGRlc2VyaWFsaXplQXBwcm92YWxBcmdzXG4gICk7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCBkZXNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShTaWduTWVzc2FnZVJlc3BvbnNlIHx8IChTaWduTWVzc2FnZVJlc3BvbnNlID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL3NpZ25UcmFuc2FjdGlvbi9yZXF1ZXN0LnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczgsXG4gIFRyYW5zYWN0aW9uUGF5bG9hZCBhcyBUcmFuc2FjdGlvblBheWxvYWQyXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0O1xuKChTaWduVHJhbnNhY3Rpb25SZXF1ZXN0MikgPT4ge1xuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lID0gXCJzaWduVHJhbnNhY3Rpb25cIjtcbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMiwgMywgNCwgNV07XG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gNTtcbiAgZnVuY3Rpb24gbm9ybWFsaXplQXJncyhhcmdzKSB7XG4gICAgY29uc3Qge1xuICAgICAgZmVlUGF5ZXIsXG4gICAgICBzZWNvbmRhcnlTaWduZXJzLFxuICAgICAgc2VuZGVyUHVibGljS2V5LFxuICAgICAgc2lnbmVyQWRkcmVzcyxcbiAgICAgIHRyYW5zYWN0aW9uXG4gICAgfSA9IGFyZ3M7XG4gICAgY29uc3Qgc2VuZGVyID0ge1xuICAgICAgYWRkcmVzczogdHJhbnNhY3Rpb24uc2VuZGVyLFxuICAgICAgcHVibGljS2V5OiBzZW5kZXJQdWJsaWNLZXlcbiAgICB9O1xuICAgIGNvbnN0IG5ldHdvcmsgPSBjaGFpbklkVG9OZXR3b3JrKGFyZ3MudHJhbnNhY3Rpb24uY2hhaW5faWQuY2hhaW5JZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGlyYXRpb25UaW1lc3RhbXA6IE51bWJlcih0cmFuc2FjdGlvbi5leHBpcmF0aW9uX3RpbWVzdGFtcF9zZWNzKSxcbiAgICAgIGZlZVBheWVyLFxuICAgICAgZ2FzVW5pdFByaWNlOiBOdW1iZXIodHJhbnNhY3Rpb24uZ2FzX3VuaXRfcHJpY2UpLFxuICAgICAgbWF4R2FzQW1vdW50OiBOdW1iZXIodHJhbnNhY3Rpb24ubWF4X2dhc19hbW91bnQpLFxuICAgICAgbmV0d29yayxcbiAgICAgIHBheWxvYWQ6IHRyYW5zYWN0aW9uLnBheWxvYWQsXG4gICAgICBzZWNvbmRhcnlTaWduZXJzLFxuICAgICAgc2VuZGVyLFxuICAgICAgc2lnbmVyQWRkcmVzc1xuICAgIH07XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIubm9ybWFsaXplQXJncyA9IG5vcm1hbGl6ZUFyZ3M7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFyZ3Moc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUubmV0d29yayAhPT0gdm9pZCAwICYmICFpc1N1cHBvcnRlZE5ldHdvcmsodmFsdWUubmV0d29yaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbmV0d29yayAnJHt2YWx1ZS5uZXR3b3JrfSdgKTtcbiAgICB9XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCk7XG4gICAgaWYgKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUuc2lnbmVyQWRkcmVzcyk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplT3B0aW9uKHZhbHVlLm5ldHdvcmspO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZS5zZW5kZXIgIT09IHZvaWQgMCk7XG4gICAgaWYgKHZhbHVlLnNlbmRlciAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXJpYWxpemVBY2NvdW50SW5wdXQoc2VyaWFsaXplciwgdmFsdWUuc2VuZGVyKTtcbiAgICB9XG4gICAgaWYgKFwiYmNzVG9CeXRlc1wiIGluIHZhbHVlLnBheWxvYWQpIHtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh0cnVlKTtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLnBheWxvYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2woZmFsc2UpO1xuICAgICAgc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQoc2VyaWFsaXplciwgdmFsdWUucGF5bG9hZCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLmV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdyA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVU2NCh2YWx1ZS5leHBpcmF0aW9uVGltZXN0YW1wID8/IDApO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLmdhc1VuaXRQcmljZSA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh2YWx1ZS5tYXhHYXNBbW91bnQgPz8gMCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLmZlZVBheWVyICE9PSB2b2lkIDApO1xuICAgIGlmICh2YWx1ZS5mZWVQYXllciAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXJpYWxpemVBY2NvdW50SW5wdXQoc2VyaWFsaXplciwgdmFsdWUuZmVlUGF5ZXIpO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRhcnlTaWduZXJzID0gdmFsdWUuc2Vjb25kYXJ5U2lnbmVycyA/PyBbXTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChzZWNvbmRhcnlTaWduZXJzLmxlbmd0aCk7XG4gICAgZm9yIChjb25zdCBzaWduZXIgb2Ygc2Vjb25kYXJ5U2lnbmVycykge1xuICAgICAgc2VyaWFsaXplQWNjb3VudElucHV0KHNlcmlhbGl6ZXIsIHNpZ25lcik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplQXJncyhkZXNlcmlhbGl6ZXIsIHZlcnNpb24pIHtcbiAgICBjb25zdCBoYXNTaWduZXJBZGRyZXNzID0gdmVyc2lvbiA+PSAzICYmIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBzaWduZXJBZGRyZXNzID0gaGFzU2lnbmVyQWRkcmVzcyA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShBY2NvdW50QWRkcmVzczgpIDogdm9pZCAwO1xuICAgIGNvbnN0IG5ldHdvcmsgPSB2ZXJzaW9uID09PSAxID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCkgOiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVPcHRpb24oXCJzdHJpbmdcIik7XG4gICAgaWYgKG5ldHdvcmsgIT09IHZvaWQgMCAmJiAhaXNTdXBwb3J0ZWROZXR3b3JrKG5ldHdvcmspKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG5ldHdvcmsgJyR7bmV0d29ya30nYCk7XG4gICAgfVxuICAgIGNvbnN0IGhhc1NlbmRlciA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBzZW5kZXIgPSBoYXNTZW5kZXIgPyBkZXNlcmlhbGl6ZUFjY291bnRJbnB1dChkZXNlcmlhbGl6ZXIpIDogdm9pZCAwO1xuICAgIGNvbnN0IGlzUGF5bG9hZEJjc1NlcmlhbGl6YWJsZSA9IHZlcnNpb24gPCA0IHx8IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBwYXlsb2FkID0gaXNQYXlsb2FkQmNzU2VyaWFsaXphYmxlID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKFRyYW5zYWN0aW9uUGF5bG9hZDIpIDogZGVzZXJpYWxpemVUcmFuc2FjdGlvblBheWxvYWRJbnB1dChkZXNlcmlhbGl6ZXIpO1xuICAgIGNvbnN0IGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdyA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lc3RhbXAgPSBOdW1iZXIoZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVTY0KCkpO1xuICAgIGNvbnN0IGdhc1VuaXRQcmljZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgIGNvbnN0IG1heEdhc0Ftb3VudCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgIGNvbnN0IGhhc0ZlZVBheWVyID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpO1xuICAgIGNvbnN0IGZlZVBheWVyID0gaGFzRmVlUGF5ZXIgPyBkZXNlcmlhbGl6ZUFjY291bnRJbnB1dChkZXNlcmlhbGl6ZXIpIDogdm9pZCAwO1xuICAgIGNvbnN0IHNlY29uZGFyeVNpZ25lcnNMZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBzZWNvbmRhcnlTaWduZXJzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWNvbmRhcnlTaWduZXJzTGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHNlY29uZGFyeVNpZ25lcnMucHVzaChkZXNlcmlhbGl6ZUFjY291bnRJbnB1dChkZXNlcmlhbGl6ZXIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdzogZXhwaXJhdGlvblNlY29uZHNGcm9tTm93ID4gMCA/IGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdyA6IHZvaWQgMCxcbiAgICAgIGV4cGlyYXRpb25UaW1lc3RhbXA6IGV4cGlyYXRpb25UaW1lc3RhbXAgPiAwID8gZXhwaXJhdGlvblRpbWVzdGFtcCA6IHZvaWQgMCxcbiAgICAgIGZlZVBheWVyLFxuICAgICAgZ2FzVW5pdFByaWNlOiBnYXNVbml0UHJpY2UgPiAwID8gZ2FzVW5pdFByaWNlIDogdm9pZCAwLFxuICAgICAgbWF4R2FzQW1vdW50OiBtYXhHYXNBbW91bnQgPiAwID8gbWF4R2FzQW1vdW50IDogdm9pZCAwLFxuICAgICAgbmV0d29yayxcbiAgICAgIHBheWxvYWQsXG4gICAgICBzZWNvbmRhcnlTaWduZXJzLFxuICAgICAgc2VuZGVyLFxuICAgICAgc2lnbmVyQWRkcmVzc1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gc2VyaWFsaXplKGRhcHBJbmZvLCBhcmdzKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHsgYXJncywgZGFwcEluZm8sIG5hbWU6IFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLm5hbWUsIHZlcnNpb246IFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH07XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhyZXF1ZXN0LCBzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzKFxuICAgICAgc2VyaWFsaXplZFJlcXVlc3QsXG4gICAgICAoZGVzZXJpYWxpemVyKSA9PiBkZXNlcmlhbGl6ZUFyZ3MoZGVzZXJpYWxpemVyLCBzZXJpYWxpemVkUmVxdWVzdC52ZXJzaW9uKVxuICAgICk7XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gaXNTZXJpYWxpemVkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5uYW1lID09PSBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lICYmIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLnN1cHBvcnRlZFZlcnNpb25zLmluY2x1ZGVzKHJlcXVlc3QudmVyc2lvbik7XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIuaXNTZXJpYWxpemVkID0gaXNTZXJpYWxpemVkO1xufSkoU2lnblRyYW5zYWN0aW9uUmVxdWVzdCB8fCAoU2lnblRyYW5zYWN0aW9uUmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9zaWduVHJhbnNhY3Rpb24vcmVzcG9uc2UudHNcbmltcG9ydCB7XG4gIEFjY291bnRBdXRoZW50aWNhdG9yIGFzIEFjY291bnRBdXRoZW50aWNhdG9yMixcbiAgUmF3VHJhbnNhY3Rpb24gYXMgUmF3VHJhbnNhY3Rpb24yXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBTaWduVHJhbnNhY3Rpb25SZXNwb25zZTtcbigoU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFwcHJvdmFsQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmF1dGhlbnRpY2F0b3IpO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZS5yYXdUcmFuc2FjdGlvbiAhPT0gdm9pZCAwKTtcbiAgICBpZiAodmFsdWUucmF3VHJhbnNhY3Rpb24gIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUucmF3VHJhbnNhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCBhdXRoZW50aWNhdG9yID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBdXRoZW50aWNhdG9yMik7XG4gICAgY29uc3QgaGFzUmF3VHJhbnNhY3Rpb24gPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gICAgY29uc3QgcmF3VHJhbnNhY3Rpb24gPSBoYXNSYXdUcmFuc2FjdGlvbiA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShSYXdUcmFuc2FjdGlvbjIpIDogdm9pZCAwO1xuICAgIHJldHVybiB7XG4gICAgICBhdXRoZW50aWNhdG9yLFxuICAgICAgcmF3VHJhbnNhY3Rpb25cbiAgICB9O1xuICB9XG4gIGNvbnN0IHNlcmlhbGl6ZUFyZ3MgPSBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXBwcm92YWxBcmdzKTtcbiAgY29uc3QgZGVzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZURlc2VyaWFsaXplRm4oXG4gICAgZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3NcbiAgKTtcbiAgZnVuY3Rpb24gc2VyaWFsaXplKGFyZ3MpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UoYXJncywgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCBkZXNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIFNpZ25UcmFuc2FjdGlvblJlc3BvbnNlMi5kZXNlcmlhbGl6ZSA9IGRlc2VyaWFsaXplO1xufSkoU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UgfHwgKFNpZ25UcmFuc2FjdGlvblJlc3BvbnNlID0ge30pKTtcblxuLy8gc3JjL21lc3NhZ2VzL2NvbW1vbi50c1xuZnVuY3Rpb24gaXNUeXBlZE1lc3NhZ2UobWVzc2FnZUNscywgbWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZT8uX19tZXNzYWdlVHlwZSA9PT0gbWVzc2FnZUNscy5UWVBFO1xufVxuXG4vLyBzcmMvbWVzc2FnZXMvcHJvbXB0LnRzXG5pbXBvcnQgeyBEZXNlcmlhbGl6ZXIgYXMgRGVzZXJpYWxpemVyMTYsIFNlcmlhbGl6ZXIgYXMgU2VyaWFsaXplcjE2IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIF9Qcm9tcHRDb25uZWN0aW9uUmVxdWVzdE1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0Q29ubmVjdGlvblJlcXVlc3RNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdENvbm5lY3Rpb25SZXF1ZXN0TWVzc2FnZS5UWVBFO1xuICB9XG59O1xuX1Byb21wdENvbm5lY3Rpb25SZXF1ZXN0TWVzc2FnZS5UWVBFID0gXCJQcm9tcHRDb25uZWN0aW9uUmVxdWVzdFwiO1xudmFyIFByb21wdENvbm5lY3Rpb25SZXF1ZXN0TWVzc2FnZSA9IF9Qcm9tcHRDb25uZWN0aW9uUmVxdWVzdE1lc3NhZ2U7XG52YXIgX1Byb21wdENvbm5lY3Rpb25SZXNwb25zZU1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0Q29ubmVjdGlvblJlc3BvbnNlTWVzc2FnZSB7XG4gIGNvbnN0cnVjdG9yKHNlcmlhbGl6ZWRSZXF1ZXN0KSB7XG4gICAgdGhpcy5zZXJpYWxpemVkUmVxdWVzdCA9IHNlcmlhbGl6ZWRSZXF1ZXN0O1xuICAgIHRoaXMuX19tZXNzYWdlVHlwZSA9IF9Qcm9tcHRDb25uZWN0aW9uUmVzcG9uc2VNZXNzYWdlLlRZUEU7XG4gIH1cbn07XG5fUHJvbXB0Q29ubmVjdGlvblJlc3BvbnNlTWVzc2FnZS5UWVBFID0gXCJQcm9tcHRDb25uZWN0aW9uUmVzcG9uc2VcIjtcbnZhciBQcm9tcHRDb25uZWN0aW9uUmVzcG9uc2VNZXNzYWdlID0gX1Byb21wdENvbm5lY3Rpb25SZXNwb25zZU1lc3NhZ2U7XG52YXIgX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlID0gY2xhc3MgX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlIHtcbiAgY29uc3RydWN0b3Ioc2VyaWFsaXplZFZhbHVlKSB7XG4gICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSBzZXJpYWxpemVkVmFsdWU7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlLlRZUEU7XG4gIH1cbn07XG5fUHJvbXB0QXBwcm92YWxSZXNwb25zZU1lc3NhZ2UuVFlQRSA9IFwiUHJvbXB0QXBwcm92YWxSZXNwb25zZVwiO1xudmFyIFByb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlID0gX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlO1xudmFyIF9Qcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0VW5hdXRob3JpemVkRXJyb3JNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZS5UWVBFO1xuICB9XG59O1xuX1Byb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZS5UWVBFID0gXCJQcm9tcHRVbmF1dGhvcml6ZWRFcnJvclwiO1xudmFyIFByb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZSA9IF9Qcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2U7XG5mdW5jdGlvbiB1cmxFbmNvZGVXYWxsZXRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyMTYoKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIocmVxdWVzdC5uYW1lKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhyZXF1ZXN0LmRhdGEpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cihyZXF1ZXN0LnZlcnNpb24udG9TdHJpbmcoKSk7XG4gIHJldHVybiBieXRlc1RvQmFzZTY0KHNlcmlhbGl6ZXIudG9VaW50OEFycmF5KCkpO1xufVxuZnVuY3Rpb24gdXJsRGVjb2RlV2FsbGV0UmVxdWVzdChlbmNvZGVkUmVxdWVzdCkge1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyMTYoYmFzZTY0VG9CeXRlcyhlbmNvZGVkUmVxdWVzdCkpO1xuICBjb25zdCBuYW1lID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCk7XG4gIGNvbnN0IGRhdGEgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCeXRlcygpO1xuICBsZXQgdmVyc2lvbjtcbiAgdHJ5IHtcbiAgICB2ZXJzaW9uID0gTnVtYmVyKGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpKTtcbiAgfSBjYXRjaCB7XG4gICAgdmVyc2lvbiA9IDE7XG4gIH1cbiAgcmV0dXJuIHsgZGF0YSwgbmFtZSwgdmVyc2lvbiB9O1xufVxuXG4vLyBzcmMvUG9wdXBXYWxsZXRSZXF1ZXN0LnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczksXG4gIEVkMjU1MTlQdWJsaWNLZXkgYXMgRWQyNTUxOVB1YmxpY0tleTIsXG4gIEVkMjU1MTlTaWduYXR1cmUgYXMgRWQyNTUxOVNpZ25hdHVyZTIsXG4gIFNlcmlhbGl6ZXIgYXMgU2VyaWFsaXplcjE3XG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcblxuLy8gc3JjL1dhbGxldFJlcXVlc3RCb2R5LnRzXG5mdW5jdGlvbiBlbmNvZGVXYWxsZXRSZXF1ZXN0Qm9keSh7XG4gIGRhdGEsXG4gIC4uLnJlc3Rcbn0pIHtcbiAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KFxuICAgIHsgZGF0YSwgLi4ucmVzdCB9LFxuICAgIChrZXksIHZhbHVlKSA9PiBrZXkgPT09IFwiZGF0YVwiID8gYnl0ZXNUb0Jhc2U2NCh2YWx1ZSkgOiB2YWx1ZVxuICApO1xuICBjb25zdCB1dGY4RW5jb2RlZCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZXJpYWxpemVkKTtcbiAgcmV0dXJuIGJ5dGVzVG9CYXNlNjQodXRmOEVuY29kZWQpO1xufVxuZnVuY3Rpb24gZGVjb2RlV2FsbGV0UmVxdWVzdEJvZHkoZW5jb2RlZCkge1xuICBjb25zdCB1dGZFbmNvZGVkID0gYmFzZTY0VG9CeXRlcyhlbmNvZGVkKTtcbiAgY29uc3Qgc2VyaWFsaXplZCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZSh1dGZFbmNvZGVkKTtcbiAgcmV0dXJuIEpTT04ucGFyc2UoXG4gICAgc2VyaWFsaXplZCxcbiAgICAoa2V5LCB2YWx1ZSkgPT4ga2V5ID09PSBcImRhdGFcIiA/IGJhc2U2NFRvQnl0ZXModmFsdWUpIDogdmFsdWVcbiAgKTtcbn1cblxuLy8gc3JjL1BvcHVwV2FsbGV0UmVxdWVzdC50c1xuZnVuY3Rpb24gZW5jb2RlUG9wdXBXYWxsZXRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgXCJib2R5XCI6XG4gICAgICAgIHJldHVybiBlbmNvZGVXYWxsZXRSZXF1ZXN0Qm9keSh2YWx1ZSk7XG4gICAgICBjYXNlIFwiY2xpZW50SWRlbnRpdHlLZXlcIjpcbiAgICAgICAgcmV0dXJuIGJ5dGVzVG9CYXNlNjQodmFsdWUudG9VaW50OEFycmF5KCkpO1xuICAgICAgY2FzZSBcInNpZ25hdHVyZVwiOlxuICAgICAgICByZXR1cm4gYnl0ZXNUb0Jhc2U2NCh2YWx1ZS50b1VpbnQ4QXJyYXkoKSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgdXRmOEVuY29kZWQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VyaWFsaXplZCk7XG4gIHJldHVybiBieXRlc1RvQmFzZTY0dXJsKHV0ZjhFbmNvZGVkKTtcbn1cbmZ1bmN0aW9uIGRlY29kZVBvcHVwV2FsbGV0UmVxdWVzdChlbmNvZGVkKSB7XG4gIGNvbnN0IHV0ZkVuY29kZWQgPSBiYXNlNjR1cmxUb0J5dGVzKGVuY29kZWQpO1xuICBjb25zdCBzZXJpYWxpemVkID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKHV0ZkVuY29kZWQpO1xuICByZXR1cm4gSlNPTi5wYXJzZShzZXJpYWxpemVkLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlIFwiYm9keVwiOlxuICAgICAgICByZXR1cm4gZGVjb2RlV2FsbGV0UmVxdWVzdEJvZHkodmFsdWUpO1xuICAgICAgY2FzZSBcImNsaWVudElkZW50aXR5S2V5XCI6XG4gICAgICAgIHJldHVybiBuZXcgRWQyNTUxOVB1YmxpY0tleTIoYmFzZTY0VG9CeXRlcyh2YWx1ZSkpO1xuICAgICAgY2FzZSBcInNpZ25hdHVyZVwiOlxuICAgICAgICByZXR1cm4gbmV3IEVkMjU1MTlTaWduYXR1cmUyKGJhc2U2NFRvQnl0ZXModmFsdWUpKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gbWFrZVBvcHVwV2FsbGV0UmVxdWVzdENoYWxsZW5nZSh7XG4gIGFjY291bnRBZGRyZXNzLFxuICBib2R5LFxuICBpZCxcbiAgdGltZXN0YW1wXG59KSB7XG4gIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcjE3KCk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKFwiU2lnbmVkUG9wdXBXYWxsZXRSZXF1ZXN0XCIpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cihpZCk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTY0KHRpbWVzdGFtcCk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbChhY2NvdW50QWRkcmVzcyAhPT0gdm9pZCAwKTtcbiAgaWYgKGFjY291bnRBZGRyZXNzICE9PSB2b2lkIDApIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZShBY2NvdW50QWRkcmVzczkuZnJvbShhY2NvdW50QWRkcmVzcykpO1xuICB9XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKGJvZHkubmFtZSk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTgoYm9keS52ZXJzaW9uKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhib2R5LmRhdGEpO1xuICByZXR1cm4gc2VyaWFsaXplci50b1VpbnQ4QXJyYXkoKTtcbn1cbmV4cG9ydCB7XG4gIENvbm5lY3RSZXF1ZXN0LFxuICBDb25uZWN0UmVzcG9uc2UsXG4gIERpc2Nvbm5lY3RSZXF1ZXN0LFxuICBEaXNjb25uZWN0UmVzcG9uc2UsXG4gIEVudHJ5RnVuY3Rpb25Bcmd1bWVudFZhcmlhbnQsXG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdCxcbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXNwb25zZSxcbiAgSXNDb25uZWN0ZWRSZXF1ZXN0LFxuICBJc0Nvbm5lY3RlZFJlc3BvbnNlLFxuICBQcm9tcHRBcHByb3ZhbFJlc3BvbnNlTWVzc2FnZSxcbiAgUHJvbXB0Q29ubmVjdGlvblJlcXVlc3RNZXNzYWdlLFxuICBQcm9tcHRDb25uZWN0aW9uUmVzcG9uc2VNZXNzYWdlLFxuICBQcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2UsXG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QsXG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlLFxuICBTaWduSW5SZXF1ZXN0LFxuICBTaWduSW5SZXNwb25zZSxcbiAgU2lnbk1lc3NhZ2VSZXF1ZXN0LFxuICBTaWduTWVzc2FnZVJlc3BvbnNlLFxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0LFxuICBTaWduVHJhbnNhY3Rpb25SZXNwb25zZSxcbiAgVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50LFxuICBiYXNlNjRUb0J5dGVzLFxuICBiYXNlNjR1cmxUb0J5dGVzLFxuICBieXRlc1RvQmFzZTY0LFxuICBieXRlc1RvQmFzZTY0dXJsLFxuICBjaGFpbklkVG9OZXR3b3JrLFxuICBkZWNvZGVQb3B1cFdhbGxldFJlcXVlc3QsXG4gIGRlY29kZVdhbGxldFJlcXVlc3RCb2R5LFxuICBkZXNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQsXG4gIGRlc2VyaWFsaXplQWNjb3VudEluZm8sXG4gIGRlc2VyaWFsaXplQWNjb3VudElucHV0LFxuICBkZXNlcmlhbGl6ZURhcHBJbmZvLFxuICBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudCxcbiAgZGVzZXJpYWxpemVQdWJsaWNLZXksXG4gIGRlc2VyaWFsaXplU2lnbmF0dXJlLFxuICBkZXNlcmlhbGl6ZVRyYW5zYWN0aW9uUGF5bG9hZElucHV0LFxuICBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QsXG4gIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzLFxuICBkZXNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlLFxuICBlbmNvZGVQb3B1cFdhbGxldFJlcXVlc3QsXG4gIGVuY29kZVdhbGxldFJlcXVlc3RCb2R5LFxuICBpc1N1cHBvcnRlZE5ldHdvcmssXG4gIGlzVHlwZWRNZXNzYWdlLFxuICBtYWtlUG9wdXBXYWxsZXRSZXF1ZXN0Q2hhbGxlbmdlLFxuICBtYWtlVXNlckFwcHJvdmFsLFxuICBtYWtlVXNlclJlc3BvbnNlRGVzZXJpYWxpemVGbixcbiAgbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuLFxuICBzZXJpYWxpemVBY2NvdW50QXV0aGVudGljYXRvcklucHV0LFxuICBzZXJpYWxpemVBY2NvdW50SW5mbyxcbiAgc2VyaWFsaXplQWNjb3VudElucHV0LFxuICBzZXJpYWxpemVEYXBwSW5mbyxcbiAgc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50LFxuICBzZXJpYWxpemVQdWJsaWNLZXksXG4gIHNlcmlhbGl6ZVNpZ25hdHVyZSxcbiAgc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQsXG4gIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3QsXG4gIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyxcbiAgc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UsXG4gIHNoZWxieW5ldCxcbiAgdXJsRGVjb2RlV2FsbGV0UmVxdWVzdCxcbiAgdXJsRW5jb2RlV2FsbGV0UmVxdWVzdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@aptos-connect/web-transport/dist/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@aptos-connect/web-transport/dist/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebWalletTransport: () => (/* binding */ WebWalletTransport)\n/* harmony export */ });\n/* harmony import */ var _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-connect/wallet-api */ \"(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _telegram_apps_bridge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @telegram-apps/bridge */ \"(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/v4.js\");\n// src/index.ts\n\n\n// src/prompt.ts\n\nvar DEFAULT_PROMPT_SIZE = { height: 695, width: 465 };\nvar PROMPT_POLLER_INTERVAL = 500;\nvar dismissalSerializedResponse = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.serialize({\n  status: \"dismissed\"\n});\nvar PromptUnauthorizedError = class extends Error {\n  constructor() {\n    super(\"Unauthorized\");\n  }\n};\nfunction openPrompt(url, size = DEFAULT_PROMPT_SIZE) {\n  const { height, width } = size;\n  const options = {\n    height,\n    left: window.screenLeft + Math.round((window.outerWidth - width) / 2),\n    popup: true,\n    top: window.screenTop + Math.round((window.outerHeight - height) / 2),\n    width\n  };\n  const strOptions = Object.entries(options).map(([key, value]) => `${key}=${JSON.stringify(value)}`).reduce((acc, entry) => `${acc}, ${entry}`);\n  const href = url instanceof URL ? url.href : url;\n  const promptWindow = window.open(href, void 0, strOptions);\n  if (promptWindow === null) {\n    throw new Error(\"Couldn't open prompt\");\n  }\n  return promptWindow;\n}\nasync function waitForPromptResponse(baseUrl, promptWindow, request) {\n  return new Promise((resolve, reject) => {\n    const listeners = {\n      onMessage: (message) => {\n        if (message.source !== promptWindow || message.origin !== baseUrl) {\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptUnauthorizedErrorMessage, message.data)) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          reject(new PromptUnauthorizedError());\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptConnectionRequestMessage, message.data)) {\n          promptWindow.postMessage(\n            new _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptConnectionResponseMessage(request),\n            baseUrl\n          );\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptApprovalResponseMessage, message.data)) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(message.data.serializedValue);\n        }\n      },\n      promptPollerId: setInterval(() => {\n        if (promptWindow.closed) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(dismissalSerializedResponse);\n        }\n      }, PROMPT_POLLER_INTERVAL)\n    };\n    window.addEventListener(\"message\", listeners.onMessage);\n  });\n}\n\n// src/state.ts\n\n\nvar localDappStateKey = \"@aptos-connect/dapp-local-state\";\nfunction serializeLocalDappState(state) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Serializer();\n  serializer.serializeU32AsUleb128(state.connectedAccounts.length);\n  for (const account of state.connectedAccounts) {\n    (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.serializeAccountInfo)(serializer, account);\n  }\n  return serializer.toUint8Array();\n}\nfunction deserializeLocalDappState(serializedValue) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Deserializer(serializedValue);\n  const connectedAccountsLength = deserializer.deserializeUleb128AsU32();\n  const connectedAccounts = [];\n  for (let i = 0; i < connectedAccountsLength; i += 1) {\n    connectedAccounts.push((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.deserializeAccountInfo)(deserializer));\n  }\n  return { connectedAccounts };\n}\nfunction getState() {\n  const encodedValue = window.localStorage.getItem(localDappStateKey);\n  return encodedValue ? deserializeLocalDappState((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.base64ToBytes)(encodedValue)) : { connectedAccounts: [] };\n}\nfunction setState(state) {\n  const serializedValue = serializeLocalDappState(state);\n  const encodedValue = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64)(serializedValue);\n  window.localStorage.setItem(localDappStateKey, encodedValue);\n}\nfunction getConnectedAccounts() {\n  const state = getState();\n  return state.connectedAccounts;\n}\nfunction addConnectedAccount(account) {\n  const { connectedAccounts, ...state } = getState();\n  connectedAccounts.push(account);\n  setState({ ...state, connectedAccounts });\n}\nfunction removeConnectedAccount(address) {\n  const { connectedAccounts, ...state } = getState();\n  const index = connectedAccounts.findIndex((a) => a.address.equals(address));\n  if (index >= 0) {\n    connectedAccounts.splice(index, 1);\n  }\n  setState({ ...state, connectedAccounts });\n}\n\n// src/telegram/openTelegramPrompt.ts\n\n\n\n\n// src/telegram/createWalletRequest.ts\n\nasync function createWalletRequest(baseUrl, request) {\n  const encodedClientIdentityKey = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64url)(\n    request.clientIdentityKey.toUint8Array()\n  );\n  const response = await fetch(\n    `${baseUrl}/v1/dapp/clients/${encodedClientIdentityKey}/requests/`,\n    {\n      body: JSON.stringify({\n        body: (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.encodeWalletRequestBody)(request.body),\n        id: request.id,\n        signature: (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64)(request.signature.toUint8Array()),\n        timestamp: request.timestamp\n      }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      method: \"post\"\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\"Failed creating the wallet request\");\n  }\n}\n\n// src/telegram/getClientIdentityKey.ts\n\nvar identityKeyStorageKey = \"@aptos-connect/client-identity-key\";\nfunction getClientIdentityKey() {\n  const serialized = window.localStorage.getItem(identityKeyStorageKey);\n  if (serialized) {\n    return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Ed25519PrivateKey(serialized);\n  }\n  const identityKey = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Ed25519PrivateKey.generate();\n  window.localStorage.setItem(identityKeyStorageKey, identityKey.toString());\n  return identityKey;\n}\n\n// src/telegram/getWalletResponse.ts\n\n\n// src/telegram/smartPolling.ts\nvar ON_RESUME_DELAY = 300;\nvar FG_RESPONSE_POLLING_INTERVAL = 2e3;\nvar BG_RESPONSE_POLLING_INTERVAL = 3e3;\nvar POLLING_TIMEOUT = 5 * 6e4;\nfunction waitFor(milliseconds) {\n  let timeoutId;\n  let cancel = () => {\n  };\n  const timer = new Promise((resolve) => {\n    timeoutId = setTimeout(resolve, milliseconds);\n    cancel = () => {\n      clearTimeout(timeoutId);\n      resolve();\n    };\n  });\n  timer.cancel = cancel;\n  return timer;\n}\nasync function smartPolling(callback) {\n  let timer;\n  let justResumed = false;\n  let pollingInterval = BG_RESPONSE_POLLING_INTERVAL;\n  const onWindowFocus = () => {\n    justResumed = true;\n    pollingInterval = FG_RESPONSE_POLLING_INTERVAL;\n    timer == null ? void 0 : timer.cancel();\n  };\n  const onWindowBlur = () => {\n    pollingInterval = BG_RESPONSE_POLLING_INTERVAL;\n  };\n  window.addEventListener(\"focus\", onWindowFocus);\n  window.addEventListener(\"blur\", onWindowBlur);\n  try {\n    const startTime = Date.now();\n    while (Date.now() - startTime < POLLING_TIMEOUT) {\n      timer = waitFor(pollingInterval);\n      await timer;\n      if (justResumed) {\n        timer = waitFor(ON_RESUME_DELAY);\n        await timer;\n      }\n      const response = await callback();\n      if (response.status === 200) {\n        return response;\n      }\n      justResumed = false;\n    }\n    throw new Error(\"Timeout\");\n  } finally {\n    window.removeEventListener(\"focus\", onWindowFocus);\n    window.removeEventListener(\"blur\", onWindowFocus);\n  }\n}\n\n// src/telegram/getWalletResponse.ts\nasync function getWalletResponse(baseUrl, clientIdentityKey, requestId) {\n  const encodedClientIdentityKey = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64url)(\n    clientIdentityKey.toUint8Array()\n  );\n  const url = new URL(\n    `${baseUrl}/v1/dapp/clients/${encodedClientIdentityKey}/requests/${requestId}/response/`\n  );\n  const response = await smartPolling(\n    () => fetch(url, {\n      headers: { Accept: \"application/json\" },\n      method: \"get\"\n    })\n  );\n  const responseBody = await response.json();\n  const data = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.base64ToBytes)(responseBody.data.body);\n  return { data };\n}\n\n// src/telegram/openTelegramPrompt.ts\nasync function openTelegramPrompt(args) {\n  const {\n    baseUrl,\n    provider,\n    request: body,\n    tgWebAppUrl = \"/AptosConnectBot/AptosConnect\"\n  } = args;\n  const identityKey = getClientIdentityKey();\n  const clientIdentityKey = identityKey.publicKey();\n  const requestId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n  const timestamp = Date.now();\n  const challenge = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.makePopupWalletRequestChallenge)({\n    body,\n    id: requestId,\n    timestamp\n  });\n  const signature = identityKey.sign(challenge);\n  const signedWalletRequest = {\n    body,\n    clientIdentityKey,\n    id: requestId,\n    signature,\n    timestamp\n  };\n  let encodedRequest = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.encodePopupWalletRequest)(signedWalletRequest);\n  if (encodedRequest.length > 1024) {\n    void createWalletRequest(baseUrl, signedWalletRequest);\n    encodedRequest = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.encodePopupWalletRequest)({\n      clientIdentityKey,\n      id: requestId,\n      signature,\n      timestamp\n    });\n  }\n  const startParam = `prompt_${provider ?? \"\"}${encodedRequest}`;\n  (0,_telegram_apps_bridge__WEBPACK_IMPORTED_MODULE_3__.postEvent)(\"web_app_open_tg_link\", {\n    path_full: `${tgWebAppUrl}?startapp=${startParam}`\n  });\n  return getWalletResponse(baseUrl, clientIdentityKey, requestId);\n}\n\n// src/telegram/index.ts\nfunction isTelegramMiniApp() {\n  return window.TelegramWebviewProxy !== void 0;\n}\n\n// src/index.ts\nvar WebWalletTransport = class {\n  constructor(baseUrl, provider = \"google\", tgWebAppUrl) {\n    this.baseUrl = baseUrl;\n    this.provider = provider;\n    this.tgWebAppUrl = tgWebAppUrl;\n    this.baseUrl = baseUrl;\n  }\n  async sendPromptRequest(request) {\n    if (isTelegramMiniApp()) {\n      return openTelegramPrompt({\n        baseUrl: this.baseUrl,\n        provider: this.provider,\n        request,\n        tgWebAppUrl: this.tgWebAppUrl\n      });\n    }\n    const url = new URL(`${this.baseUrl}/prompt/`);\n    url.searchParams.set(\"provider\", this.provider);\n    const prompt = openPrompt(url);\n    return waitForPromptResponse(this.baseUrl, prompt, request);\n  }\n  async sendRequest(request) {\n    switch (request.name) {\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedResponse.serialize(connectedAccounts.length > 0);\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsResponse.serialize(connectedAccounts);\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectRequest.name: {\n        const serializedResponse = await this.sendPromptRequest(request);\n        const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.deserialize(serializedResponse);\n        if (response.args.status === \"approved\") {\n          const { account, pairing } = response.args.args;\n          if (pairing === void 0) {\n            addConnectedAccount(account);\n          }\n        }\n        return serializedResponse;\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignInRequest.name: {\n        const serializedResponse = await this.sendPromptRequest(request);\n        const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignInResponse.deserialize(\n          serializedResponse,\n          request.version === 1 ? 1 : 2\n        );\n        if (response.args.status === \"approved\") {\n          const { account } = response.args.args;\n          addConnectedAccount(account);\n        }\n        return serializedResponse;\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectRequest.name: {\n        const [activeAccount] = getConnectedAccounts();\n        if (activeAccount) {\n          removeConnectedAccount(activeAccount.address);\n        }\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectResponse.serialize({});\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageRequest.name:\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.name:\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionRequest.name: {\n        return this.sendPromptRequest(request);\n      }\n      default: {\n        throw new Error(\"Unexpected request\");\n      }\n    }\n  }\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGFwdG9zLWNvbm5lY3Qvd2ViLXRyYW5zcG9ydC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBZW1DOztBQUVuQztBQVFtQztBQUNuQyw0QkFBNEI7QUFDNUI7QUFDQSxrQ0FBa0Msc0VBQWU7QUFDakQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsSUFBSSxHQUFHLHNCQUFzQiw2QkFBNkIsSUFBSSxJQUFJLE1BQU07QUFDOUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUVBQWMsQ0FBQyxxRkFBOEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUVBQWMsQ0FBQyxxRkFBOEI7QUFDekQ7QUFDQSxnQkFBZ0Isc0ZBQStCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5RUFBYyxDQUFDLG9GQUE2QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQU1tQztBQUMyQjtBQUM5RDtBQUNBO0FBQ0EseUJBQXlCLDBEQUFVO0FBQ25DO0FBQ0E7QUFDQSxJQUFJLCtFQUFvQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw0REFBWTtBQUN2QztBQUNBO0FBQ0Esa0JBQWtCLDZCQUE2QjtBQUMvQywyQkFBMkIsaUZBQXNCO0FBQ2pEO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx3RUFBYSxvQkFBb0I7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdFQUFhO0FBQ3BD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QUNBLFdBQVcseUVBQWtCO0FBQzdCLFdBQVcsNkVBQXNCO0FBQ2pDLFdBQVcsc0ZBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFzdXNcXERlc2t0b3BcXHByb2pcXHYzXFx2b2ljZXZhdWx0XFxuZXh0XFxub2RlX21vZHVsZXNcXEBhcHRvcy1jb25uZWN0XFx3ZWItdHJhbnNwb3J0XFxkaXN0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQge1xuICBDb25uZWN0UmVxdWVzdCxcbiAgQ29ubmVjdFJlc3BvbnNlIGFzIENvbm5lY3RSZXNwb25zZTIsXG4gIERpc2Nvbm5lY3RSZXF1ZXN0LFxuICBEaXNjb25uZWN0UmVzcG9uc2UsXG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdCxcbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXNwb25zZSxcbiAgSXNDb25uZWN0ZWRSZXF1ZXN0LFxuICBJc0Nvbm5lY3RlZFJlc3BvbnNlLFxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0LFxuICBTaWduSW5SZXF1ZXN0LFxuICBTaWduSW5SZXNwb25zZSxcbiAgU2lnbk1lc3NhZ2VSZXF1ZXN0LFxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0XG59IGZyb20gXCJAYXB0b3MtY29ubmVjdC93YWxsZXQtYXBpXCI7XG5cbi8vIHNyYy9wcm9tcHQudHNcbmltcG9ydCB7XG4gIENvbm5lY3RSZXNwb25zZSxcbiAgaXNUeXBlZE1lc3NhZ2UsXG4gIFByb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlLFxuICBQcm9tcHRDb25uZWN0aW9uUmVxdWVzdE1lc3NhZ2UsXG4gIFByb21wdENvbm5lY3Rpb25SZXNwb25zZU1lc3NhZ2UsXG4gIFByb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZVxufSBmcm9tIFwiQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFwaVwiO1xudmFyIERFRkFVTFRfUFJPTVBUX1NJWkUgPSB7IGhlaWdodDogNjk1LCB3aWR0aDogNDY1IH07XG52YXIgUFJPTVBUX1BPTExFUl9JTlRFUlZBTCA9IDUwMDtcbnZhciBkaXNtaXNzYWxTZXJpYWxpemVkUmVzcG9uc2UgPSBDb25uZWN0UmVzcG9uc2Uuc2VyaWFsaXplKHtcbiAgc3RhdHVzOiBcImRpc21pc3NlZFwiXG59KTtcbnZhciBQcm9tcHRVbmF1dGhvcml6ZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlVuYXV0aG9yaXplZFwiKTtcbiAgfVxufTtcbmZ1bmN0aW9uIG9wZW5Qcm9tcHQodXJsLCBzaXplID0gREVGQVVMVF9QUk9NUFRfU0laRSkge1xuICBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHNpemU7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgaGVpZ2h0LFxuICAgIGxlZnQ6IHdpbmRvdy5zY3JlZW5MZWZ0ICsgTWF0aC5yb3VuZCgod2luZG93Lm91dGVyV2lkdGggLSB3aWR0aCkgLyAyKSxcbiAgICBwb3B1cDogdHJ1ZSxcbiAgICB0b3A6IHdpbmRvdy5zY3JlZW5Ub3AgKyBNYXRoLnJvdW5kKCh3aW5kb3cub3V0ZXJIZWlnaHQgLSBoZWlnaHQpIC8gMiksXG4gICAgd2lkdGhcbiAgfTtcbiAgY29uc3Qgc3RyT3B0aW9ucyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9PSR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApLnJlZHVjZSgoYWNjLCBlbnRyeSkgPT4gYCR7YWNjfSwgJHtlbnRyeX1gKTtcbiAgY29uc3QgaHJlZiA9IHVybCBpbnN0YW5jZW9mIFVSTCA/IHVybC5ocmVmIDogdXJsO1xuICBjb25zdCBwcm9tcHRXaW5kb3cgPSB3aW5kb3cub3BlbihocmVmLCB2b2lkIDAsIHN0ck9wdGlvbnMpO1xuICBpZiAocHJvbXB0V2luZG93ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3Qgb3BlbiBwcm9tcHRcIik7XG4gIH1cbiAgcmV0dXJuIHByb21wdFdpbmRvdztcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JQcm9tcHRSZXNwb25zZShiYXNlVXJsLCBwcm9tcHRXaW5kb3csIHJlcXVlc3QpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB7XG4gICAgICBvbk1lc3NhZ2U6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgIGlmIChtZXNzYWdlLnNvdXJjZSAhPT0gcHJvbXB0V2luZG93IHx8IG1lc3NhZ2Uub3JpZ2luICE9PSBiYXNlVXJsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1R5cGVkTWVzc2FnZShQcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2UsIG1lc3NhZ2UuZGF0YSkpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXJzLm9uTWVzc2FnZSk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGxpc3RlbmVycy5wcm9tcHRQb2xsZXJJZCk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBQcm9tcHRVbmF1dGhvcml6ZWRFcnJvcigpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVHlwZWRNZXNzYWdlKFByb21wdENvbm5lY3Rpb25SZXF1ZXN0TWVzc2FnZSwgbWVzc2FnZS5kYXRhKSkge1xuICAgICAgICAgIHByb21wdFdpbmRvdy5wb3N0TWVzc2FnZShcbiAgICAgICAgICAgIG5ldyBQcm9tcHRDb25uZWN0aW9uUmVzcG9uc2VNZXNzYWdlKHJlcXVlc3QpLFxuICAgICAgICAgICAgYmFzZVVybFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1R5cGVkTWVzc2FnZShQcm9tcHRBcHByb3ZhbFJlc3BvbnNlTWVzc2FnZSwgbWVzc2FnZS5kYXRhKSkge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsaXN0ZW5lcnMub25NZXNzYWdlKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQobGlzdGVuZXJzLnByb21wdFBvbGxlcklkKTtcbiAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UuZGF0YS5zZXJpYWxpemVkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvbXB0UG9sbGVySWQ6IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKHByb21wdFdpbmRvdy5jbG9zZWQpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXJzLm9uTWVzc2FnZSk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGxpc3RlbmVycy5wcm9tcHRQb2xsZXJJZCk7XG4gICAgICAgICAgcmVzb2x2ZShkaXNtaXNzYWxTZXJpYWxpemVkUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9LCBQUk9NUFRfUE9MTEVSX0lOVEVSVkFMKVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVycy5vbk1lc3NhZ2UpO1xuICB9KTtcbn1cblxuLy8gc3JjL3N0YXRlLnRzXG5pbXBvcnQge1xuICBiYXNlNjRUb0J5dGVzLFxuICBieXRlc1RvQmFzZTY0LFxuICBkZXNlcmlhbGl6ZUFjY291bnRJbmZvLFxuICBzZXJpYWxpemVBY2NvdW50SW5mb1xufSBmcm9tIFwiQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFwaVwiO1xuaW1wb3J0IHsgRGVzZXJpYWxpemVyLCBTZXJpYWxpemVyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIGxvY2FsRGFwcFN0YXRlS2V5ID0gXCJAYXB0b3MtY29ubmVjdC9kYXBwLWxvY2FsLXN0YXRlXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVMb2NhbERhcHBTdGF0ZShzdGF0ZSkge1xuICBjb25zdCBzZXJpYWxpemVyID0gbmV3IFNlcmlhbGl6ZXIoKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoc3RhdGUuY29ubmVjdGVkQWNjb3VudHMubGVuZ3RoKTtcbiAgZm9yIChjb25zdCBhY2NvdW50IG9mIHN0YXRlLmNvbm5lY3RlZEFjY291bnRzKSB7XG4gICAgc2VyaWFsaXplQWNjb3VudEluZm8oc2VyaWFsaXplciwgYWNjb3VudCk7XG4gIH1cbiAgcmV0dXJuIHNlcmlhbGl6ZXIudG9VaW50OEFycmF5KCk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUxvY2FsRGFwcFN0YXRlKHNlcmlhbGl6ZWRWYWx1ZSkge1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyKHNlcmlhbGl6ZWRWYWx1ZSk7XG4gIGNvbnN0IGNvbm5lY3RlZEFjY291bnRzTGVuZ3RoID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gIGNvbnN0IGNvbm5lY3RlZEFjY291bnRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGVkQWNjb3VudHNMZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbm5lY3RlZEFjY291bnRzLnB1c2goZGVzZXJpYWxpemVBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZXIpKTtcbiAgfVxuICByZXR1cm4geyBjb25uZWN0ZWRBY2NvdW50cyB9O1xufVxuZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gIGNvbnN0IGVuY29kZWRWYWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbERhcHBTdGF0ZUtleSk7XG4gIHJldHVybiBlbmNvZGVkVmFsdWUgPyBkZXNlcmlhbGl6ZUxvY2FsRGFwcFN0YXRlKGJhc2U2NFRvQnl0ZXMoZW5jb2RlZFZhbHVlKSkgOiB7IGNvbm5lY3RlZEFjY291bnRzOiBbXSB9O1xufVxuZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUpIHtcbiAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0gc2VyaWFsaXplTG9jYWxEYXBwU3RhdGUoc3RhdGUpO1xuICBjb25zdCBlbmNvZGVkVmFsdWUgPSBieXRlc1RvQmFzZTY0KHNlcmlhbGl6ZWRWYWx1ZSk7XG4gIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbERhcHBTdGF0ZUtleSwgZW5jb2RlZFZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldENvbm5lY3RlZEFjY291bnRzKCkge1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIHJldHVybiBzdGF0ZS5jb25uZWN0ZWRBY2NvdW50cztcbn1cbmZ1bmN0aW9uIGFkZENvbm5lY3RlZEFjY291bnQoYWNjb3VudCkge1xuICBjb25zdCB7IGNvbm5lY3RlZEFjY291bnRzLCAuLi5zdGF0ZSB9ID0gZ2V0U3RhdGUoKTtcbiAgY29ubmVjdGVkQWNjb3VudHMucHVzaChhY2NvdW50KTtcbiAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgY29ubmVjdGVkQWNjb3VudHMgfSk7XG59XG5mdW5jdGlvbiByZW1vdmVDb25uZWN0ZWRBY2NvdW50KGFkZHJlc3MpIHtcbiAgY29uc3QgeyBjb25uZWN0ZWRBY2NvdW50cywgLi4uc3RhdGUgfSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IGluZGV4ID0gY29ubmVjdGVkQWNjb3VudHMuZmluZEluZGV4KChhKSA9PiBhLmFkZHJlc3MuZXF1YWxzKGFkZHJlc3MpKTtcbiAgaWYgKGluZGV4ID49IDApIHtcbiAgICBjb25uZWN0ZWRBY2NvdW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG4gIHNldFN0YXRlKHsgLi4uc3RhdGUsIGNvbm5lY3RlZEFjY291bnRzIH0pO1xufVxuXG4vLyBzcmMvdGVsZWdyYW0vb3BlblRlbGVncmFtUHJvbXB0LnRzXG5pbXBvcnQge1xuICBlbmNvZGVQb3B1cFdhbGxldFJlcXVlc3QsXG4gIG1ha2VQb3B1cFdhbGxldFJlcXVlc3RDaGFsbGVuZ2Vcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcbmltcG9ydCB7IHBvc3RFdmVudCBhcyBwb3N0VGVsZWdyYW1FdmVudCB9IGZyb20gXCJAdGVsZWdyYW0tYXBwcy9icmlkZ2VcIjtcbmltcG9ydCB7IHY0IGFzIHJhbmRvbVVVSUQgfSBmcm9tIFwidXVpZFwiO1xuXG4vLyBzcmMvdGVsZWdyYW0vY3JlYXRlV2FsbGV0UmVxdWVzdC50c1xuaW1wb3J0IHtcbiAgYnl0ZXNUb0Jhc2U2NCBhcyBieXRlc1RvQmFzZTY0MixcbiAgYnl0ZXNUb0Jhc2U2NHVybCxcbiAgZW5jb2RlV2FsbGV0UmVxdWVzdEJvZHlcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdhbGxldFJlcXVlc3QoYmFzZVVybCwgcmVxdWVzdCkge1xuICBjb25zdCBlbmNvZGVkQ2xpZW50SWRlbnRpdHlLZXkgPSBieXRlc1RvQmFzZTY0dXJsKFxuICAgIHJlcXVlc3QuY2xpZW50SWRlbnRpdHlLZXkudG9VaW50OEFycmF5KClcbiAgKTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICBgJHtiYXNlVXJsfS92MS9kYXBwL2NsaWVudHMvJHtlbmNvZGVkQ2xpZW50SWRlbnRpdHlLZXl9L3JlcXVlc3RzL2AsXG4gICAge1xuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBib2R5OiBlbmNvZGVXYWxsZXRSZXF1ZXN0Qm9keShyZXF1ZXN0LmJvZHkpLFxuICAgICAgICBpZDogcmVxdWVzdC5pZCxcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlc1RvQmFzZTY0MihyZXF1ZXN0LnNpZ25hdHVyZS50b1VpbnQ4QXJyYXkoKSksXG4gICAgICAgIHRpbWVzdGFtcDogcmVxdWVzdC50aW1lc3RhbXBcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIG1ldGhvZDogXCJwb3N0XCJcbiAgICB9XG4gICk7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgY3JlYXRpbmcgdGhlIHdhbGxldCByZXF1ZXN0XCIpO1xuICB9XG59XG5cbi8vIHNyYy90ZWxlZ3JhbS9nZXRDbGllbnRJZGVudGl0eUtleS50c1xuaW1wb3J0IHsgRWQyNTUxOVByaXZhdGVLZXkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG52YXIgaWRlbnRpdHlLZXlTdG9yYWdlS2V5ID0gXCJAYXB0b3MtY29ubmVjdC9jbGllbnQtaWRlbnRpdHkta2V5XCI7XG5mdW5jdGlvbiBnZXRDbGllbnRJZGVudGl0eUtleSgpIHtcbiAgY29uc3Qgc2VyaWFsaXplZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZGVudGl0eUtleVN0b3JhZ2VLZXkpO1xuICBpZiAoc2VyaWFsaXplZCkge1xuICAgIHJldHVybiBuZXcgRWQyNTUxOVByaXZhdGVLZXkoc2VyaWFsaXplZCk7XG4gIH1cbiAgY29uc3QgaWRlbnRpdHlLZXkgPSBFZDI1NTE5UHJpdmF0ZUtleS5nZW5lcmF0ZSgpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oaWRlbnRpdHlLZXlTdG9yYWdlS2V5LCBpZGVudGl0eUtleS50b1N0cmluZygpKTtcbiAgcmV0dXJuIGlkZW50aXR5S2V5O1xufVxuXG4vLyBzcmMvdGVsZWdyYW0vZ2V0V2FsbGV0UmVzcG9uc2UudHNcbmltcG9ydCB7XG4gIGJhc2U2NFRvQnl0ZXMgYXMgYmFzZTY0VG9CeXRlczIsXG4gIGJ5dGVzVG9CYXNlNjR1cmwgYXMgYnl0ZXNUb0Jhc2U2NHVybDJcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcblxuLy8gc3JjL3RlbGVncmFtL3NtYXJ0UG9sbGluZy50c1xudmFyIE9OX1JFU1VNRV9ERUxBWSA9IDMwMDtcbnZhciBGR19SRVNQT05TRV9QT0xMSU5HX0lOVEVSVkFMID0gMmUzO1xudmFyIEJHX1JFU1BPTlNFX1BPTExJTkdfSU5URVJWQUwgPSAzZTM7XG52YXIgUE9MTElOR19USU1FT1VUID0gNSAqIDZlNDtcbmZ1bmN0aW9uIHdhaXRGb3IobWlsbGlzZWNvbmRzKSB7XG4gIGxldCB0aW1lb3V0SWQ7XG4gIGxldCBjYW5jZWwgPSAoKSA9PiB7XG4gIH07XG4gIGNvbnN0IHRpbWVyID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XG4gICAgY2FuY2VsID0gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfTtcbiAgfSk7XG4gIHRpbWVyLmNhbmNlbCA9IGNhbmNlbDtcbiAgcmV0dXJuIHRpbWVyO1xufVxuYXN5bmMgZnVuY3Rpb24gc21hcnRQb2xsaW5nKGNhbGxiYWNrKSB7XG4gIGxldCB0aW1lcjtcbiAgbGV0IGp1c3RSZXN1bWVkID0gZmFsc2U7XG4gIGxldCBwb2xsaW5nSW50ZXJ2YWwgPSBCR19SRVNQT05TRV9QT0xMSU5HX0lOVEVSVkFMO1xuICBjb25zdCBvbldpbmRvd0ZvY3VzID0gKCkgPT4ge1xuICAgIGp1c3RSZXN1bWVkID0gdHJ1ZTtcbiAgICBwb2xsaW5nSW50ZXJ2YWwgPSBGR19SRVNQT05TRV9QT0xMSU5HX0lOVEVSVkFMO1xuICAgIHRpbWVyID09IG51bGwgPyB2b2lkIDAgOiB0aW1lci5jYW5jZWwoKTtcbiAgfTtcbiAgY29uc3Qgb25XaW5kb3dCbHVyID0gKCkgPT4ge1xuICAgIHBvbGxpbmdJbnRlcnZhbCA9IEJHX1JFU1BPTlNFX1BPTExJTkdfSU5URVJWQUw7XG4gIH07XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgb25XaW5kb3dGb2N1cyk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvbldpbmRvd0JsdXIpO1xuICB0cnkge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPCBQT0xMSU5HX1RJTUVPVVQpIHtcbiAgICAgIHRpbWVyID0gd2FpdEZvcihwb2xsaW5nSW50ZXJ2YWwpO1xuICAgICAgYXdhaXQgdGltZXI7XG4gICAgICBpZiAoanVzdFJlc3VtZWQpIHtcbiAgICAgICAgdGltZXIgPSB3YWl0Rm9yKE9OX1JFU1VNRV9ERUxBWSk7XG4gICAgICAgIGF3YWl0IHRpbWVyO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsYmFjaygpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGp1c3RSZXN1bWVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlRpbWVvdXRcIik7XG4gIH0gZmluYWxseSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBvbldpbmRvd0ZvY3VzKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb25XaW5kb3dGb2N1cyk7XG4gIH1cbn1cblxuLy8gc3JjL3RlbGVncmFtL2dldFdhbGxldFJlc3BvbnNlLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRXYWxsZXRSZXNwb25zZShiYXNlVXJsLCBjbGllbnRJZGVudGl0eUtleSwgcmVxdWVzdElkKSB7XG4gIGNvbnN0IGVuY29kZWRDbGllbnRJZGVudGl0eUtleSA9IGJ5dGVzVG9CYXNlNjR1cmwyKFxuICAgIGNsaWVudElkZW50aXR5S2V5LnRvVWludDhBcnJheSgpXG4gICk7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoXG4gICAgYCR7YmFzZVVybH0vdjEvZGFwcC9jbGllbnRzLyR7ZW5jb2RlZENsaWVudElkZW50aXR5S2V5fS9yZXF1ZXN0cy8ke3JlcXVlc3RJZH0vcmVzcG9uc2UvYFxuICApO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNtYXJ0UG9sbGluZyhcbiAgICAoKSA9PiBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgbWV0aG9kOiBcImdldFwiXG4gICAgfSlcbiAgKTtcbiAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICBjb25zdCBkYXRhID0gYmFzZTY0VG9CeXRlczIocmVzcG9uc2VCb2R5LmRhdGEuYm9keSk7XG4gIHJldHVybiB7IGRhdGEgfTtcbn1cblxuLy8gc3JjL3RlbGVncmFtL29wZW5UZWxlZ3JhbVByb21wdC50c1xuYXN5bmMgZnVuY3Rpb24gb3BlblRlbGVncmFtUHJvbXB0KGFyZ3MpIHtcbiAgY29uc3Qge1xuICAgIGJhc2VVcmwsXG4gICAgcHJvdmlkZXIsXG4gICAgcmVxdWVzdDogYm9keSxcbiAgICB0Z1dlYkFwcFVybCA9IFwiL0FwdG9zQ29ubmVjdEJvdC9BcHRvc0Nvbm5lY3RcIlxuICB9ID0gYXJncztcbiAgY29uc3QgaWRlbnRpdHlLZXkgPSBnZXRDbGllbnRJZGVudGl0eUtleSgpO1xuICBjb25zdCBjbGllbnRJZGVudGl0eUtleSA9IGlkZW50aXR5S2V5LnB1YmxpY0tleSgpO1xuICBjb25zdCByZXF1ZXN0SWQgPSByYW5kb21VVUlEKCk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gIGNvbnN0IGNoYWxsZW5nZSA9IG1ha2VQb3B1cFdhbGxldFJlcXVlc3RDaGFsbGVuZ2Uoe1xuICAgIGJvZHksXG4gICAgaWQ6IHJlcXVlc3RJZCxcbiAgICB0aW1lc3RhbXBcbiAgfSk7XG4gIGNvbnN0IHNpZ25hdHVyZSA9IGlkZW50aXR5S2V5LnNpZ24oY2hhbGxlbmdlKTtcbiAgY29uc3Qgc2lnbmVkV2FsbGV0UmVxdWVzdCA9IHtcbiAgICBib2R5LFxuICAgIGNsaWVudElkZW50aXR5S2V5LFxuICAgIGlkOiByZXF1ZXN0SWQsXG4gICAgc2lnbmF0dXJlLFxuICAgIHRpbWVzdGFtcFxuICB9O1xuICBsZXQgZW5jb2RlZFJlcXVlc3QgPSBlbmNvZGVQb3B1cFdhbGxldFJlcXVlc3Qoc2lnbmVkV2FsbGV0UmVxdWVzdCk7XG4gIGlmIChlbmNvZGVkUmVxdWVzdC5sZW5ndGggPiAxMDI0KSB7XG4gICAgdm9pZCBjcmVhdGVXYWxsZXRSZXF1ZXN0KGJhc2VVcmwsIHNpZ25lZFdhbGxldFJlcXVlc3QpO1xuICAgIGVuY29kZWRSZXF1ZXN0ID0gZW5jb2RlUG9wdXBXYWxsZXRSZXF1ZXN0KHtcbiAgICAgIGNsaWVudElkZW50aXR5S2V5LFxuICAgICAgaWQ6IHJlcXVlc3RJZCxcbiAgICAgIHNpZ25hdHVyZSxcbiAgICAgIHRpbWVzdGFtcFxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHN0YXJ0UGFyYW0gPSBgcHJvbXB0XyR7cHJvdmlkZXIgPz8gXCJcIn0ke2VuY29kZWRSZXF1ZXN0fWA7XG4gIHBvc3RUZWxlZ3JhbUV2ZW50KFwid2ViX2FwcF9vcGVuX3RnX2xpbmtcIiwge1xuICAgIHBhdGhfZnVsbDogYCR7dGdXZWJBcHBVcmx9P3N0YXJ0YXBwPSR7c3RhcnRQYXJhbX1gXG4gIH0pO1xuICByZXR1cm4gZ2V0V2FsbGV0UmVzcG9uc2UoYmFzZVVybCwgY2xpZW50SWRlbnRpdHlLZXksIHJlcXVlc3RJZCk7XG59XG5cbi8vIHNyYy90ZWxlZ3JhbS9pbmRleC50c1xuZnVuY3Rpb24gaXNUZWxlZ3JhbU1pbmlBcHAoKSB7XG4gIHJldHVybiB3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkgIT09IHZvaWQgMDtcbn1cblxuLy8gc3JjL2luZGV4LnRzXG52YXIgV2ViV2FsbGV0VHJhbnNwb3J0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihiYXNlVXJsLCBwcm92aWRlciA9IFwiZ29vZ2xlXCIsIHRnV2ViQXBwVXJsKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgdGhpcy50Z1dlYkFwcFVybCA9IHRnV2ViQXBwVXJsO1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gIH1cbiAgYXN5bmMgc2VuZFByb21wdFJlcXVlc3QocmVxdWVzdCkge1xuICAgIGlmIChpc1RlbGVncmFtTWluaUFwcCgpKSB7XG4gICAgICByZXR1cm4gb3BlblRlbGVncmFtUHJvbXB0KHtcbiAgICAgICAgYmFzZVVybDogdGhpcy5iYXNlVXJsLFxuICAgICAgICBwcm92aWRlcjogdGhpcy5wcm92aWRlcixcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgdGdXZWJBcHBVcmw6IHRoaXMudGdXZWJBcHBVcmxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vcHJvbXB0L2ApO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicHJvdmlkZXJcIiwgdGhpcy5wcm92aWRlcik7XG4gICAgY29uc3QgcHJvbXB0ID0gb3BlblByb21wdCh1cmwpO1xuICAgIHJldHVybiB3YWl0Rm9yUHJvbXB0UmVzcG9uc2UodGhpcy5iYXNlVXJsLCBwcm9tcHQsIHJlcXVlc3QpO1xuICB9XG4gIGFzeW5jIHNlbmRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBzd2l0Y2ggKHJlcXVlc3QubmFtZSkge1xuICAgICAgY2FzZSBJc0Nvbm5lY3RlZFJlcXVlc3QubmFtZToge1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRBY2NvdW50cyA9IGdldENvbm5lY3RlZEFjY291bnRzKCk7XG4gICAgICAgIHJldHVybiBJc0Nvbm5lY3RlZFJlc3BvbnNlLnNlcmlhbGl6ZShjb25uZWN0ZWRBY2NvdW50cy5sZW5ndGggPiAwKTtcbiAgICAgIH1cbiAgICAgIGNhc2UgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Lm5hbWU6IHtcbiAgICAgICAgY29uc3QgY29ubmVjdGVkQWNjb3VudHMgPSBnZXRDb25uZWN0ZWRBY2NvdW50cygpO1xuICAgICAgICByZXR1cm4gR2V0Q29ubmVjdGVkQWNjb3VudHNSZXNwb25zZS5zZXJpYWxpemUoY29ubmVjdGVkQWNjb3VudHMpO1xuICAgICAgfVxuICAgICAgY2FzZSBDb25uZWN0UmVxdWVzdC5uYW1lOiB7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFByb21wdFJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gQ29ubmVjdFJlc3BvbnNlMi5kZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpO1xuICAgICAgICBpZiAocmVzcG9uc2UuYXJncy5zdGF0dXMgPT09IFwiYXBwcm92ZWRcIikge1xuICAgICAgICAgIGNvbnN0IHsgYWNjb3VudCwgcGFpcmluZyB9ID0gcmVzcG9uc2UuYXJncy5hcmdzO1xuICAgICAgICAgIGlmIChwYWlyaW5nID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGFkZENvbm5lY3RlZEFjY291bnQoYWNjb3VudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkUmVzcG9uc2U7XG4gICAgICB9XG4gICAgICBjYXNlIFNpZ25JblJlcXVlc3QubmFtZToge1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRQcm9tcHRSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IFNpZ25JblJlc3BvbnNlLmRlc2VyaWFsaXplKFxuICAgICAgICAgIHNlcmlhbGl6ZWRSZXNwb25zZSxcbiAgICAgICAgICByZXF1ZXN0LnZlcnNpb24gPT09IDEgPyAxIDogMlxuICAgICAgICApO1xuICAgICAgICBpZiAocmVzcG9uc2UuYXJncy5zdGF0dXMgPT09IFwiYXBwcm92ZWRcIikge1xuICAgICAgICAgIGNvbnN0IHsgYWNjb3VudCB9ID0gcmVzcG9uc2UuYXJncy5hcmdzO1xuICAgICAgICAgIGFkZENvbm5lY3RlZEFjY291bnQoYWNjb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRSZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGNhc2UgRGlzY29ubmVjdFJlcXVlc3QubmFtZToge1xuICAgICAgICBjb25zdCBbYWN0aXZlQWNjb3VudF0gPSBnZXRDb25uZWN0ZWRBY2NvdW50cygpO1xuICAgICAgICBpZiAoYWN0aXZlQWNjb3VudCkge1xuICAgICAgICAgIHJlbW92ZUNvbm5lY3RlZEFjY291bnQoYWN0aXZlQWNjb3VudC5hZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlc3BvbnNlLnNlcmlhbGl6ZSh7fSk7XG4gICAgICB9XG4gICAgICBjYXNlIFNpZ25NZXNzYWdlUmVxdWVzdC5uYW1lOlxuICAgICAgY2FzZSBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Lm5hbWU6XG4gICAgICBjYXNlIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QubmFtZToge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUHJvbXB0UmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZXF1ZXN0XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmV4cG9ydCB7XG4gIFdlYldhbGxldFRyYW5zcG9ydFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@aptos-connect/web-transport/dist/index.mjs\n");

/***/ })

};
;