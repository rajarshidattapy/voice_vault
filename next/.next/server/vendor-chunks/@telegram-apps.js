"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps";
exports.ids = ["vendor-chunks/@telegram-apps"];
exports.modules = {

/***/ "(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@telegram-apps/bridge/dist/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ re),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ ne),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ He),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Je),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ Be),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ge),\n/* harmony export */   EnhancedPromise: () => (/* binding */ S),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ te),\n/* harmony export */   camelToKebab: () => (/* binding */ ct),\n/* harmony export */   camelToSnake: () => (/* binding */ it),\n/* harmony export */   captureSameReq: () => (/* binding */ et),\n/* harmony export */   compareVersions: () => (/* binding */ tt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ k),\n/* harmony export */   createLogger: () => (/* binding */ ke),\n/* harmony export */   createPostEvent: () => (/* binding */ dt),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ L),\n/* harmony export */   defineEventHandlers: () => (/* binding */ bt),\n/* harmony export */   deleteCssVar: () => (/* binding */ ft),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ x),\n/* harmony export */   getStorageValue: () => (/* binding */ xe),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ Q),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Et),\n/* harmony export */   isAbortError: () => (/* binding */ ot),\n/* harmony export */   isCanceledError: () => (/* binding */ st),\n/* harmony export */   isIframe: () => (/* binding */ Ne),\n/* harmony export */   isTMA: () => (/* binding */ _t),\n/* harmony export */   isTimeoutError: () => (/* binding */ nt),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ lt),\n/* harmony export */   off: () => (/* binding */ wt),\n/* harmony export */   on: () => (/* binding */ Fe),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ gt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ yt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Ye),\n/* harmony export */   setCssVar: () => (/* binding */ pt),\n/* harmony export */   setStorageValue: () => (/* binding */ We),\n/* harmony export */   sleep: () => (/* binding */ at),\n/* harmony export */   snakeToCamel: () => (/* binding */ ut),\n/* harmony export */   subscribe: () => (/* binding */ ht),\n/* harmony export */   supports: () => (/* binding */ H),\n/* harmony export */   unsubscribe: () => (/* binding */ mt)\n/* harmony export */ });\nclass d extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, d.prototype);\n  }\n}\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", me = \"ERR_UNEXPECTED_VALUE\", de = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const r = {};\n  for (const n in e) {\n    const o = e[n];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = n, a = o) : [s, a] = o;\n    try {\n      const c = a(t(s));\n      c !== void 0 && (r[n] = c);\n    } catch (c) {\n      throw new d(\n        K,\n        `Parser for \"${n}\" property failed${s === n ? \"\" : `. Source field: \"${s}\"`}`,\n        c\n      );\n    }\n  }\n  return r;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (r) {\n      throw new d(he, { cause: r });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new d(me);\n  return t;\n}\nfunction g(e, t) {\n  return (r) => {\n    const n = (o) => {\n      if (!(r && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new d(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      n,\n      {\n        isValid(o) {\n          try {\n            return n(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (r) => {\n    const n = Z(r);\n    return V(e, (o) => n[o]);\n  });\n}\nfunction R(e) {\n  throw new d(de, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && R(r);\n    const n = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return V(e, (o) => {\n      const s = n.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction j(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), r = P(!0), n = _(), o = _(!0), s = $(!0), a = l(j({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: n,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    j({\n      authDate: Ee(),\n      canSendAfter: r,\n      chat: l(\n        j({\n          id: t,\n          type: n,\n          title: n,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: n,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      signature: n,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let n = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      n += t[1 + o].repeat(2);\n    return n;\n  }\n  const r = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((n, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return n + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), I = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((r, [n, o]) => (r[we(n)] = t(o), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction W(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, r]) => [G(t), r])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), r = _(!0), n = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", n],\n    defaultColors: [\"tgWebAppDefaultColors\", I(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", n],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", n],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", I()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Se(e) {\n  const {\n    initDataRaw: t,\n    startParam: r,\n    showSettings: n,\n    botInline: o,\n    fullscreen: s,\n    defaultColors: a\n  } = e, c = new URLSearchParams();\n  return c.set(\"tgWebAppPlatform\", e.platform), c.set(\"tgWebAppThemeParams\", /* @__PURE__ */ W(e.themeParams)), c.set(\"tgWebAppVersion\", e.version), t && c.set(\"tgWebAppData\", t), r && c.set(\"tgWebAppStartParam\", r), typeof n == \"boolean\" && c.set(\"tgWebAppShowSettings\", n ? \"1\" : \"0\"), typeof o == \"boolean\" && c.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && c.set(\"tgWebAppFullscreen\", s ? \"1\" : \"0\"), a && c.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ W(a)), c.toString();\n}\nconst X = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Y = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction $e(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Y() })()\n});\nfunction Q(e) {\n  return Ce().isValid(e);\n}\nfunction Ne() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar De = Object.defineProperty, je = (e, t, r) => t in e ? De(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t, r) => je(e, typeof t != \"symbol\" ? t + \"\" : t, r);\nclass b extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction te(e, t, r) {\n  return e.addEventListener(t, r), () => e.removeEventListener(t, r);\n}\nfunction k(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((r) => {\n        r();\n      });\n    }\n  ];\n}\nfunction Ue(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction L(e) {\n  return (t) => Ue(t, e);\n}\nconst re = \"ERR_ABORTED\", ne = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(re, { cause: e });\n}\nconst nt = L(oe), ot = L(re), st = L(ne);\nfunction F(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s, a;\n    super((c, i) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return i(M(u.reason));\n      const [f, h] = k(), m = (E) => (...ge) => (h(), E(...ge)), T = new AbortController(), { signal: A } = T;\n      a = m((E) => {\n        T.abort(E), i(E);\n      }), s = m(c), u && f(\n        te(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const E = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(E);\n        });\n      }\n      n && n(s, a, A);\n    }), ee(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new w((n, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(n, o) : n(a);\n      } catch (a) {\n        o(a);\n      }\n    }, r);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(ne));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return F(super.then(t, r), this);\n  }\n}\nfunction J(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass S extends w {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s;\n    super((a, c, i) => {\n      s = a, n && n(a, c, i);\n    }, o), ee(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new S(\n      (n, o, s) => w.withFn(t, { abortSignal: s }).then(n, o),\n      r\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new S((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new S((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return J(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return J(super.then(t, r), this);\n  }\n}\nfunction at(e, t) {\n  return new w((r) => {\n    setTimeout(r, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction We(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction xe(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction it(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction ke(e, t) {\n  t || (t = {});\n  const {\n    textColor: r,\n    bgColor: n,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...c) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const i = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${i};background-color: lightblue;color:black`,\n      \"\",\n      `${i};${r ? `color:${r};` : \"\"}${n ? `background-color:${n}` : \"\"}`,\n      ...c\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction ft(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Le(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction y(e, t) {\n  t || (t = {});\n  const r = t.equals || Object.is;\n  let n = [], o = e;\n  const s = (u) => {\n    if (!r(o, u)) {\n      const f = o;\n      o = u, Le(i, () => {\n        [...n].forEach(([h, m]) => {\n          h(u, f), m && c(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const c = (u, f) => {\n    const h = a(f), m = n.findIndex(([T, A]) => T === u && A.once === h.once && A.signal === h.signal);\n    m >= 0 && n.splice(m, 1);\n  }, i = Object.assign(\n    function() {\n      return Oe(i), o;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return n.push([u, a(f)]), () => c(u, f);\n      },\n      unsub: c,\n      unsubAll() {\n        n = n.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return i;\n}\nconst U = [];\nfunction Oe(e) {\n  U.length && U[U.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ y(!1), [O, qe] = /* @__PURE__ */ ke(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), Ie = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Me(e) {\n  const t = window, [, r] = k(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    te(t, \"message\", (n) => {\n      if (n.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = X()(n.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, c = Ie[s];\n      try {\n        const i = c ? c()(a) : a;\n        O(\"Event received:\", i ? { eventType: s, eventData: i } : { eventType: s }), e([s, i]);\n      } catch (i) {\n        qe(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          i\n        );\n      }\n    })\n  );\n  return r;\n}\nconst C = /* @__PURE__ */ y(), N = /* @__PURE__ */ y();\nfunction ce() {\n  return N() || N.set(Me(C.set)), C;\n}\nconst v = /* @__PURE__ */ y({});\nfunction ie(e) {\n  let t = v()[e];\n  return t || (t = /* @__PURE__ */ y(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ce().sub((r) => {\n    r && r[0] === e && t.set(r[1]);\n  }), v.set({ ...v(), [e]: t })), t;\n}\nfunction Fe(e, t, r) {\n  return ie(e).sub(t, r);\n}\nconst Je = \"ERR_METHOD_UNSUPPORTED\", Be = \"ERR_RETRIEVE_LP_FAILED\", He = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ge = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ y(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const r = window;\n  if (Q(r)) {\n    r.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const n = JSON.stringify({ eventType: e, eventData: t });\n  if (Ne())\n    return r.parent.postMessage(n, ue());\n  const { external: o } = r;\n  if (l({ notify: Y() })().isValid(o)) {\n    o.notify(n);\n    return;\n  }\n  throw new b(Ge);\n}\nfunction fe(e, t, r) {\n  r || (r = {});\n  const { capture: n } = r, [o, s] = k();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((c) => {\n      o(\n        Fe(c, (i) => {\n          (!n || (Array.isArray(t) ? n({\n            event: c,\n            payload: i\n          }) : n(i))) && a(i);\n        })\n      );\n    }), (r.postEvent || pe)(e, r.params);\n  }, r).finally(s);\n}\nfunction q(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return q(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ve() {\n  return _e(window.location.href);\n}\nfunction Ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst ze = \"launchParams\";\nfunction Xe() {\n  return q(xe(ze) || \"\");\n}\nfunction le(e) {\n  We(\"launchParams\", /* @__PURE__ */ Se(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Ye() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ve,\n    // Then, try using the lower level API - window.performance.\n    Ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Xe\n  ])\n    try {\n      const r = t();\n      return le(r), r;\n    } catch (r) {\n      e.push(r);\n    }\n  throw new b(Be, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"ðŸ“– Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `â€” ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Ye(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (Q(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction x(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Qe(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: r } = X()(t);\n      r === \"web_app_request_theme\" && x(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ W(e))\n      }), r === \"web_app_request_viewport\" && x(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction lt(e) {\n  var n;\n  const t = typeof e == \"string\" ? q(e) : e;\n  le(t);\n  const r = (n = window.TelegramWebviewProxy) == null ? void 0 : n.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      Qe(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), r == null || r(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction bt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((r, n, o) => {\n      if (n === o.length - 1) {\n        t[r] = x;\n        return;\n      }\n      r in t || (t[r] = {}), t = t[r];\n    });\n  });\n}\nfunction gt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction wt(e, t, r) {\n  ie(e).unsub(t, r);\n}\nfunction ht(e, t) {\n  return ce().sub(e, t);\n}\nfunction mt(e, t) {\n  C.unsub(e, t);\n}\nfunction et(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction B(e) {\n  return e.split(\".\").map(Number);\n}\nfunction tt(e, t) {\n  const r = B(e), n = B(t), o = Math.max(r.length, n.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = r[s] || 0, c = n[s] || 0;\n    if (a !== c)\n      return a > c ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return tt(e, t) <= 0;\n}\nfunction H(e, t, r) {\n  if (typeof r == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", r);\n      if (t === \"try_browser\")\n        return p(\"7.6\", r);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", r);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", r);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", r);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    case \"web_app_request_safe_area\":\n    case \"web_app_request_content_safe_area\":\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n    case \"web_app_set_emoji_status\":\n    case \"web_app_add_to_home_screen\":\n    case \"web_app_check_home_screen\":\n    case \"web_app_request_emoji_status_access\":\n      return p(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction dt(e, t) {\n  t || (t = \"strict\");\n  const r = typeof t == \"function\" ? t : (n) => {\n    const { method: o, version: s } = n;\n    let a, c;\n    if (\"param\" in n ? (a = `Parameter \"${n.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, c = He) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, c = Je), t === \"strict\")\n      throw new b(c, a);\n    return console.warn(a);\n  };\n  return (n, o) => H(n, e) ? $e(o) && n === \"web_app_set_header_color\" && \"color\" in o && !H(n, \"color\", e) ? r({ version: e, method: n, param: \"color\" }) : pe(n, o) : r({ version: e, method: n });\n}\nfunction Et(e, t, r, n) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...n || {},\n    params: { method: e, params: t, req_id: r },\n    capture: et(r)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction yt() {\n  var e;\n  (e = N()) == null || e(), [\n    ...Object.values(v()),\n    v,\n    C,\n    N,\n    ue,\n    ae\n  ].forEach(rt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvYnJpZGdlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRSxtQkFBbUIsbUNBQW1DLEVBQUUsR0FBRztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsMENBQTBDLFFBQVEsUUFBUSxFQUFFLCtDQUErQyxFQUFFLDZCQUE2QixFQUFFLHdDQUF3QyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1Q0FBdUMsbUJBQW1CLHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQSxHQUFHLFVBQVUscUJBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhc3VzXFxEZXNrdG9wXFxwcm9qXFx2M1xcdm9pY2V2YXVsdFxcbmV4dFxcbm9kZV9tb2R1bGVzXFxAdGVsZWdyYW0tYXBwc1xcYnJpZGdlXFxkaXN0XFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBkIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCByLCBuKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgciA9PSBcIm9iamVjdFwiID8gci5tZXNzYWdlIDogciB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIuY2F1c2UgOiBuXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgdGhpcy5uYW1lID0gXCJUeXBlZEVycm9yXCIsIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBkLnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIEcoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLCAodCkgPT4gYF8ke3QudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIHdlKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvX1thLXpdL2csICh0KSA9PiB0WzFdLnRvVXBwZXJDYXNlKCkpO1xufVxuY29uc3QgaGUgPSBcIkVSUl9JTlZBTElEX1ZBTFVFXCIsIG1lID0gXCJFUlJfVU5FWFBFQ1RFRF9WQUxVRVwiLCBkZSA9IFwiRVJSX1VORVhQRUNURURfVFlQRVwiLCBLID0gXCJFUlJfUEFSU0VcIjtcbmZ1bmN0aW9uIFYoZSwgdCkge1xuICBjb25zdCByID0ge307XG4gIGZvciAoY29uc3QgbiBpbiBlKSB7XG4gICAgY29uc3QgbyA9IGVbbl07XG4gICAgaWYgKCFvKVxuICAgICAgY29udGludWU7XG4gICAgbGV0IHMsIGE7XG4gICAgdHlwZW9mIG8gPT0gXCJmdW5jdGlvblwiID8gKHMgPSBuLCBhID0gbykgOiBbcywgYV0gPSBvO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjID0gYSh0KHMpKTtcbiAgICAgIGMgIT09IHZvaWQgMCAmJiAocltuXSA9IGMpO1xuICAgIH0gY2F0Y2ggKGMpIHtcbiAgICAgIHRocm93IG5ldyBkKFxuICAgICAgICBLLFxuICAgICAgICBgUGFyc2VyIGZvciBcIiR7bn1cIiBwcm9wZXJ0eSBmYWlsZWQke3MgPT09IG4gPyBcIlwiIDogYC4gU291cmNlIGZpZWxkOiBcIiR7c31cImB9YCxcbiAgICAgICAgY1xuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHI7XG59XG5mdW5jdGlvbiBaKGUpIHtcbiAgbGV0IHQgPSBlO1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICB0cnkge1xuICAgICAgdCA9IEpTT04ucGFyc2UodCk7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgdGhyb3cgbmV3IGQoaGUsIHsgY2F1c2U6IHIgfSk7XG4gICAgfVxuICBpZiAodHlwZW9mIHQgIT0gXCJvYmplY3RcIiB8fCAhdCB8fCBBcnJheS5pc0FycmF5KHQpKVxuICAgIHRocm93IG5ldyBkKG1lKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBnKGUsIHQpIHtcbiAgcmV0dXJuIChyKSA9PiB7XG4gICAgY29uc3QgbiA9IChvKSA9PiB7XG4gICAgICBpZiAoIShyICYmIG8gPT09IHZvaWQgMCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHQobyk7XG4gICAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgZChLLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgXCIke2V9XCIgdHJhbnNmb3JtZXIgZmFpbGVkIHRvIHBhcnNlIHRoZSB2YWx1ZWAsXG4gICAgICAgICAgICBjYXVzZTogc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIE9iamVjdC5hc3NpZ24oXG4gICAgICBuLFxuICAgICAge1xuICAgICAgICBpc1ZhbGlkKG8pIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG4obyksICEwO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG59XG5mdW5jdGlvbiBsKGUsIHQpIHtcbiAgcmV0dXJuIGcodCB8fCBcIm9iamVjdFwiLCAocikgPT4ge1xuICAgIGNvbnN0IG4gPSBaKHIpO1xuICAgIHJldHVybiBWKGUsIChvKSA9PiBuW29dKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBSKGUpIHtcbiAgdGhyb3cgbmV3IGQoZGUsIGBVbmV4cGVjdGVkIHZhbHVlIHJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KGUpfWApO1xufVxuY29uc3QgJCA9IGcoXCJib29sZWFuXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcImJvb2xlYW5cIilcbiAgICByZXR1cm4gZTtcbiAgY29uc3QgdCA9IFN0cmluZyhlKTtcbiAgaWYgKHQgPT09IFwiMVwiIHx8IHQgPT09IFwidHJ1ZVwiKVxuICAgIHJldHVybiAhMDtcbiAgaWYgKHQgPT09IFwiMFwiIHx8IHQgPT09IFwiZmFsc2VcIilcbiAgICByZXR1cm4gITE7XG4gIFIoZSk7XG59KSwgXyA9IGcoXCJzdHJpbmdcIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZS50b1N0cmluZygpO1xuICBSKGUpO1xufSksIFAgPSBnKFwibnVtYmVyXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBlO1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IHQgPSBOdW1iZXIoZSk7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4odCkpXG4gICAgICByZXR1cm4gdDtcbiAgfVxuICBSKGUpO1xufSksIEVlID0gZyhcImRhdGVcIiwgKGUpID0+IGUgaW5zdGFuY2VvZiBEYXRlID8gZSA6IG5ldyBEYXRlKFAoKShlKSAqIDFlMykpO1xuZnVuY3Rpb24geihlLCB0KSB7XG4gIHJldHVybiBnKHQgfHwgXCJzZWFyY2hQYXJhbXNcIiwgKHIpID0+IHtcbiAgICB0eXBlb2YgciAhPSBcInN0cmluZ1wiICYmICEociBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykgJiYgUihyKTtcbiAgICBjb25zdCBuID0gdHlwZW9mIHIgPT0gXCJzdHJpbmdcIiA/IG5ldyBVUkxTZWFyY2hQYXJhbXMocikgOiByO1xuICAgIHJldHVybiBWKGUsIChvKSA9PiB7XG4gICAgICBjb25zdCBzID0gbi5nZXQobyk7XG4gICAgICByZXR1cm4gcyA9PT0gbnVsbCA/IHZvaWQgMCA6IHM7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaihlKSB7XG4gIGZvciAoY29uc3QgdCBpbiBlKVxuICAgIGVbdF0gPSBbRyh0KSwgZVt0XV07XG4gIHJldHVybiBlO1xufVxuY29uc3QgeWUgPSAoZSkgPT4ge1xuICBjb25zdCB0ID0gUCgpLCByID0gUCghMCksIG4gPSBfKCksIG8gPSBfKCEwKSwgcyA9ICQoITApLCBhID0gbChqKHtcbiAgICBhZGRlZFRvQXR0YWNobWVudE1lbnU6IHMsXG4gICAgYWxsb3dzV3JpdGVUb1BtOiBzLFxuICAgIGZpcnN0TmFtZTogbixcbiAgICBpZDogdCxcbiAgICBpc0JvdDogcyxcbiAgICBpc1ByZW1pdW06IHMsXG4gICAgbGFuZ3VhZ2VDb2RlOiBvLFxuICAgIGxhc3ROYW1lOiBvLFxuICAgIHBob3RvVXJsOiBvLFxuICAgIHVzZXJuYW1lOiBvXG4gIH0pLCBcIlVzZXJcIikoITApO1xuICByZXR1cm4geihcbiAgICBqKHtcbiAgICAgIGF1dGhEYXRlOiBFZSgpLFxuICAgICAgY2FuU2VuZEFmdGVyOiByLFxuICAgICAgY2hhdDogbChcbiAgICAgICAgaih7XG4gICAgICAgICAgaWQ6IHQsXG4gICAgICAgICAgdHlwZTogbixcbiAgICAgICAgICB0aXRsZTogbixcbiAgICAgICAgICBwaG90b1VybDogbyxcbiAgICAgICAgICB1c2VybmFtZTogb1xuICAgICAgICB9KSxcbiAgICAgICAgXCJDaGF0XCJcbiAgICAgICkoITApLFxuICAgICAgY2hhdEluc3RhbmNlOiBvLFxuICAgICAgY2hhdFR5cGU6IG8sXG4gICAgICBoYXNoOiBuLFxuICAgICAgcXVlcnlJZDogbyxcbiAgICAgIHJlY2VpdmVyOiBhLFxuICAgICAgc3RhcnRQYXJhbTogbyxcbiAgICAgIHNpZ25hdHVyZTogbixcbiAgICAgIHVzZXI6IGFcbiAgICB9KSxcbiAgICBcImluaXREYXRhXCJcbiAgKShlKTtcbn07XG5mdW5jdGlvbiB2ZShlKSB7XG4gIHJldHVybiAvXiNbXFxkYS1mXXs2fSQvaS50ZXN0KGUpO1xufVxuZnVuY3Rpb24gUGUoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17M30kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFJlKGUpIHtcbiAgY29uc3QgdCA9IGUucmVwbGFjZSgvXFxzL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh2ZSh0KSlcbiAgICByZXR1cm4gdDtcbiAgaWYgKFBlKHQpKSB7XG4gICAgbGV0IG4gPSBcIiNcIjtcbiAgICBmb3IgKGxldCBvID0gMDsgbyA8IDM7IG8gKz0gMSlcbiAgICAgIG4gKz0gdFsxICsgb10ucmVwZWF0KDIpO1xuICAgIHJldHVybiBuO1xuICB9XG4gIGNvbnN0IHIgPSB0Lm1hdGNoKC9ecmdiXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSlcXCkkLykgfHwgdC5tYXRjaCgvXnJnYmFcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KSxcXGR7MSwzfVxcKSQvKTtcbiAgaWYgKCFyKVxuICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgXCIke2V9XCIgZG9lcyBub3Qgc2F0aXNmeSBhbnkgb2Yga25vd24gUkdCIGZvcm1hdHMuYCk7XG4gIHJldHVybiByLnNsaWNlKDEpLnJlZHVjZSgobiwgbykgPT4ge1xuICAgIGNvbnN0IHMgPSBwYXJzZUludChvLCAxMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBuICsgKHMubGVuZ3RoID09PSAxID8gXCIwXCIgOiBcIlwiKSArIHM7XG4gIH0sIFwiI1wiKTtcbn1cbmNvbnN0IFRlID0gZyhcInJnYlwiLCAoZSkgPT4gUmUoXygpKGUpKSksIEkgPSBnKFxuICBcInRoZW1lUGFyYW1zXCIsXG4gIChlKSA9PiB7XG4gICAgY29uc3QgdCA9IFRlKCEwKTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoWihlKSkucmVkdWNlKChyLCBbbiwgb10pID0+IChyW3dlKG4pXSA9IHQobyksIHIpLCB7fSk7XG4gIH1cbik7XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gVyhlKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhlKS5tYXAoKFt0LCByXSkgPT4gW0codCksIHJdKVxuICAgIClcbiAgKTtcbn1cbmNvbnN0IEFlID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IF8oKSwgciA9IF8oITApLCBuID0gJCghMCk7XG4gIHJldHVybiB6KHtcbiAgICBib3RJbmxpbmU6IFtcInRnV2ViQXBwQm90SW5saW5lXCIsIG5dLFxuICAgIGRlZmF1bHRDb2xvcnM6IFtcInRnV2ViQXBwRGVmYXVsdENvbG9yc1wiLCBJKCEwKV0sXG4gICAgZnVsbHNjcmVlbjogW1widGdXZWJBcHBGdWxsc2NyZWVuXCIsIG5dLFxuICAgIGluaXREYXRhOiBbXCJ0Z1dlYkFwcERhdGFcIiwgeWUoITApXSxcbiAgICBpbml0RGF0YVJhdzogW1widGdXZWJBcHBEYXRhXCIsIHJdLFxuICAgIHBsYXRmb3JtOiBbXCJ0Z1dlYkFwcFBsYXRmb3JtXCIsIHRdLFxuICAgIHNob3dTZXR0aW5nczogW1widGdXZWJBcHBTaG93U2V0dGluZ3NcIiwgbl0sXG4gICAgc3RhcnRQYXJhbTogW1widGdXZWJBcHBTdGFydFBhcmFtXCIsIHJdLFxuICAgIHRoZW1lUGFyYW1zOiBbXCJ0Z1dlYkFwcFRoZW1lUGFyYW1zXCIsIEkoKV0sXG4gICAgdmVyc2lvbjogW1widGdXZWJBcHBWZXJzaW9uXCIsIHRdXG4gIH0sIFwibGF1bmNoUGFyYW1zXCIpKGUpO1xufTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBTZShlKSB7XG4gIGNvbnN0IHtcbiAgICBpbml0RGF0YVJhdzogdCxcbiAgICBzdGFydFBhcmFtOiByLFxuICAgIHNob3dTZXR0aW5nczogbixcbiAgICBib3RJbmxpbmU6IG8sXG4gICAgZnVsbHNjcmVlbjogcyxcbiAgICBkZWZhdWx0Q29sb3JzOiBhXG4gIH0gPSBlLCBjID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICByZXR1cm4gYy5zZXQoXCJ0Z1dlYkFwcFBsYXRmb3JtXCIsIGUucGxhdGZvcm0pLCBjLnNldChcInRnV2ViQXBwVGhlbWVQYXJhbXNcIiwgLyogQF9fUFVSRV9fICovIFcoZS50aGVtZVBhcmFtcykpLCBjLnNldChcInRnV2ViQXBwVmVyc2lvblwiLCBlLnZlcnNpb24pLCB0ICYmIGMuc2V0KFwidGdXZWJBcHBEYXRhXCIsIHQpLCByICYmIGMuc2V0KFwidGdXZWJBcHBTdGFydFBhcmFtXCIsIHIpLCB0eXBlb2YgbiA9PSBcImJvb2xlYW5cIiAmJiBjLnNldChcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIG4gPyBcIjFcIiA6IFwiMFwiKSwgdHlwZW9mIG8gPT0gXCJib29sZWFuXCIgJiYgYy5zZXQoXCJ0Z1dlYkFwcEJvdElubGluZVwiLCBvID8gXCIxXCIgOiBcIjBcIiksIHR5cGVvZiBzID09IFwiYm9vbGVhblwiICYmIGMuc2V0KFwidGdXZWJBcHBGdWxsc2NyZWVuXCIsIHMgPyBcIjFcIiA6IFwiMFwiKSwgYSAmJiBjLnNldChcInRnV2ViQXBwRGVmYXVsdENvbG9yc1wiLCAvKiBAX19QVVJFX18gKi8gVyhhKSksIGMudG9TdHJpbmcoKTtcbn1cbmNvbnN0IFggPSBsKHtcbiAgZXZlbnRUeXBlOiBfKCksXG4gIGV2ZW50RGF0YTogKGUpID0+IGVcbn0sIFwibWluaUFwcHNNZXNzYWdlXCIpLCBZID0gZyhcImZuXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcImZ1bmN0aW9uXCIpXG4gICAgcmV0dXJuIGU7XG4gIFIoZSk7XG59KTtcbmZ1bmN0aW9uICRlKGUpIHtcbiAgcmV0dXJuICEhZSAmJiB0eXBlb2YgZSA9PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KGUpO1xufVxuY29uc3QgQ2UgPSBsKHtcbiAgVGVsZWdyYW1XZWJ2aWV3UHJveHk6IGwoeyBwb3N0RXZlbnQ6IFkoKSB9KSgpXG59KTtcbmZ1bmN0aW9uIFEoZSkge1xuICByZXR1cm4gQ2UoKS5pc1ZhbGlkKGUpO1xufVxuZnVuY3Rpb24gTmUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gITA7XG4gIH1cbn1cbnZhciBEZSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgamUgPSAoZSwgdCwgcikgPT4gdCBpbiBlID8gRGUoZSwgdCwgeyBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogciB9KSA6IGVbdF0gPSByLCBlZSA9IChlLCB0LCByKSA9PiBqZShlLCB0eXBlb2YgdCAhPSBcInN5bWJvbFwiID8gdCArIFwiXCIgOiB0LCByKTtcbmNsYXNzIGIgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHQsIHIsIG4pIHtcbiAgICBzdXBlcihcbiAgICAgIHR5cGVvZiByID09IFwib2JqZWN0XCIgPyByLm1lc3NhZ2UgOiByIHx8IHQsXG4gICAgICB7XG4gICAgICAgIGNhdXNlOiB0eXBlb2YgciA9PSBcIm9iamVjdFwiID8gci5jYXVzZSA6IG5cbiAgICAgIH1cbiAgICApLCB0aGlzLnR5cGUgPSB0LCB0aGlzLm5hbWUgPSBcIlR5cGVkRXJyb3JcIiwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGIucHJvdG90eXBlKTtcbiAgfVxufVxuZnVuY3Rpb24gdGUoZSwgdCwgcikge1xuICByZXR1cm4gZS5hZGRFdmVudExpc3RlbmVyKHQsIHIpLCAoKSA9PiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCwgcik7XG59XG5mdW5jdGlvbiBrKC4uLmUpIHtcbiAgY29uc3QgdCA9IGUuZmxhdCgxKTtcbiAgcmV0dXJuIFtcbiAgICB0LnB1c2guYmluZCh0KSxcbiAgICAoKSA9PiB7XG4gICAgICB0LmZvckVhY2goKHIpID0+IHtcbiAgICAgICAgcigpO1xuICAgICAgfSk7XG4gICAgfVxuICBdO1xufVxuZnVuY3Rpb24gVWUoZSwgdCkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIGIgJiYgZS50eXBlID09PSB0O1xufVxuZnVuY3Rpb24gTChlKSB7XG4gIHJldHVybiAodCkgPT4gVWUodCwgZSk7XG59XG5jb25zdCByZSA9IFwiRVJSX0FCT1JURURcIiwgbmUgPSBcIkVSUl9DQU5DRUxFRFwiLCBvZSA9IFwiRVJSX1RJTUVEX09VVFwiO1xuZnVuY3Rpb24gTShlKSB7XG4gIHJldHVybiBuZXcgYihyZSwgeyBjYXVzZTogZSB9KTtcbn1cbmNvbnN0IG50ID0gTChvZSksIG90ID0gTChyZSksIHN0ID0gTChuZSk7XG5mdW5jdGlvbiBGKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVqZWN0ID0gdC5yZWplY3QsIGU7XG59XG5jbGFzcyB3IGV4dGVuZHMgUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKHQsIHIpIHtcbiAgICBsZXQgbiwgbztcbiAgICB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyAobiA9IHQsIG8gPSByKSA6IG8gPSB0O1xuICAgIGxldCBzLCBhO1xuICAgIHN1cGVyKChjLCBpKSA9PiB7XG4gICAgICBvIHx8IChvID0ge30pO1xuICAgICAgY29uc3QgeyBhYm9ydFNpZ25hbDogdSB9ID0gbztcbiAgICAgIGlmICh1ICYmIHUuYWJvcnRlZClcbiAgICAgICAgcmV0dXJuIGkoTSh1LnJlYXNvbikpO1xuICAgICAgY29uc3QgW2YsIGhdID0gaygpLCBtID0gKEUpID0+ICguLi5nZSkgPT4gKGgoKSwgRSguLi5nZSkpLCBUID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCB7IHNpZ25hbDogQSB9ID0gVDtcbiAgICAgIGEgPSBtKChFKSA9PiB7XG4gICAgICAgIFQuYWJvcnQoRSksIGkoRSk7XG4gICAgICB9KSwgcyA9IG0oYyksIHUgJiYgZihcbiAgICAgICAgdGUodSwgXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgYShNKHUucmVhc29uKSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgY29uc3QgeyB0aW1lb3V0OiBEIH0gPSBvO1xuICAgICAgaWYgKEQpIHtcbiAgICAgICAgY29uc3QgRSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGEobmV3IGIob2UsIGBUaW1lb3V0IHJlYWNoZWQ6ICR7RH1tc2ApKTtcbiAgICAgICAgfSwgRCk7XG4gICAgICAgIGYoKCkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dChFKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBuICYmIG4ocywgYSwgQSk7XG4gICAgfSksIGVlKHRoaXMsIFwicmVqZWN0XCIpLCB0aGlzLnJlamVjdCA9IGE7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQmV0dGVyUHJvbWlzZSBpbnN0YW5jZSB1c2luZyBleGVjdXRvciwgcmVzb2x2aW5nIHByb21pc2Ugd2hlbiBhIHJlc3VsdFxuICAgKiB3YXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSBmbiAtIGZ1bmN0aW9uIHJldHVybmluZyBwcm9taXNlIHJlc3VsdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICBzdGF0aWMgd2l0aEZuKHQsIHIpIHtcbiAgICByZXR1cm4gbmV3IHcoKG4sIG8sIHMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGEgPSB0KHMpO1xuICAgICAgICByZXR1cm4gYSBpbnN0YW5jZW9mIFByb21pc2UgPyBhLnRoZW4obiwgbykgOiBuKGEpO1xuICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICBvKGEpO1xuICAgICAgfVxuICAgIH0sIHIpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgdygocikgPT4ge1xuICAgICAgcih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyB3KChyLCBuKSA9PiB7XG4gICAgICBuKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwcm9taXNlIGV4ZWN1dGlvbi5cbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnJlamVjdChuZXcgYihuZSkpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gRihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgcikge1xuICAgIHJldHVybiBGKHN1cGVyLnRoZW4odCwgciksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBKKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVzb2x2ZSA9IHQucmVzb2x2ZSwgZTtcbn1cbmNsYXNzIFMgZXh0ZW5kcyB3IHtcbiAgY29uc3RydWN0b3IodCwgcikge1xuICAgIGxldCBuLCBvO1xuICAgIHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IChuID0gdCwgbyA9IHIpIDogbyA9IHQ7XG4gICAgbGV0IHM7XG4gICAgc3VwZXIoKGEsIGMsIGkpID0+IHtcbiAgICAgIHMgPSBhLCBuICYmIG4oYSwgYywgaSk7XG4gICAgfSwgbyksIGVlKHRoaXMsIFwicmVzb2x2ZVwiKSwgdGhpcy5yZXNvbHZlID0gcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBFbmhhbmNlZFByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCByKSB7XG4gICAgcmV0dXJuIG5ldyBTKFxuICAgICAgKG4sIG8sIHMpID0+IHcud2l0aEZuKHQsIHsgYWJvcnRTaWduYWw6IHMgfSkudGhlbihuLCBvKSxcbiAgICAgIHJcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgUygocikgPT4ge1xuICAgICAgcih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyBTKChyLCBuKSA9PiB7XG4gICAgICBuKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gSihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgcikge1xuICAgIHJldHVybiBKKHN1cGVyLnRoZW4odCwgciksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBhdChlLCB0KSB7XG4gIHJldHVybiBuZXcgdygocikgPT4ge1xuICAgIHNldFRpbWVvdXQociwgZSk7XG4gIH0sIHsgYWJvcnRTaWduYWw6IHQgfSk7XG59XG5mdW5jdGlvbiBzZShlKSB7XG4gIHJldHVybiBgdGFwcHMvJHtlfWA7XG59XG5mdW5jdGlvbiBXZShlLCB0KSB7XG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2UoZSksIEpTT04uc3RyaW5naWZ5KHQpKTtcbn1cbmZ1bmN0aW9uIHhlKGUpIHtcbiAgY29uc3QgdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oc2UoZSkpO1xuICB0cnkge1xuICAgIHJldHVybiB0ID8gSlNPTi5wYXJzZSh0KSA6IHZvaWQgMDtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIGN0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGAtJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiBpdChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgXyR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gdXQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9fW2Etel0vZywgKHQpID0+IHRbMV0udG9VcHBlckNhc2UoKSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24ga2UoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCB7XG4gICAgdGV4dENvbG9yOiByLFxuICAgIGJnQ29sb3I6IG4sXG4gICAgc2hvdWxkTG9nOiBvID0gITBcbiAgfSA9IHQ7XG4gIGZ1bmN0aW9uIHMoYSwgLi4uYykge1xuICAgIGlmICghbyB8fCB0eXBlb2YgbyA9PSBcImZ1bmN0aW9uXCIgJiYgIW8oKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBpID0gXCJmb250LXdlaWdodDpib2xkO3BhZGRpbmc6MCA1cHg7Ym9yZGVyLXJhZGl1czo1cHhcIjtcbiAgICBjb25zb2xlW2FdKFxuICAgICAgYCVjJHtJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tR0JcIiwge1xuICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogMyxcbiAgICAgICAgdGltZVpvbmU6IFwiVVRDXCJcbiAgICAgIH0pLmZvcm1hdCgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSl9JWMgLyAlYyR7ZX1gLFxuICAgICAgYCR7aX07YmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlO2NvbG9yOmJsYWNrYCxcbiAgICAgIFwiXCIsXG4gICAgICBgJHtpfTske3IgPyBgY29sb3I6JHtyfTtgIDogXCJcIn0ke24gPyBgYmFja2dyb3VuZC1jb2xvcjoke259YCA6IFwiXCJ9YCxcbiAgICAgIC4uLmNcbiAgICApO1xuICB9XG4gIHJldHVybiBbXG4gICAgZnVuY3Rpb24oLi4uYSkge1xuICAgICAgcyhcImxvZ1wiLCAuLi5hKTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHMoXCJlcnJvclwiLCAuLi5hKTtcbiAgICB9XG4gIF07XG59XG5mdW5jdGlvbiBwdChlLCB0KSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShlLCB0KTtcbn1cbmZ1bmN0aW9uIGZ0KGUpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGUpO1xufVxuZnVuY3Rpb24gTGUoZSwgdCkge1xuICB0KCk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24geShlLCB0KSB7XG4gIHQgfHwgKHQgPSB7fSk7XG4gIGNvbnN0IHIgPSB0LmVxdWFscyB8fCBPYmplY3QuaXM7XG4gIGxldCBuID0gW10sIG8gPSBlO1xuICBjb25zdCBzID0gKHUpID0+IHtcbiAgICBpZiAoIXIobywgdSkpIHtcbiAgICAgIGNvbnN0IGYgPSBvO1xuICAgICAgbyA9IHUsIExlKGksICgpID0+IHtcbiAgICAgICAgWy4uLm5dLmZvckVhY2goKFtoLCBtXSkgPT4ge1xuICAgICAgICAgIGgodSwgZiksIG0gJiYgYyhoLCAhMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICBjb25zdCBmID0gdHlwZW9mIHUgIT0gXCJvYmplY3RcIiA/IHsgb25jZTogdSB9IDogdTtcbiAgICByZXR1cm4ge1xuICAgICAgb25jZTogZi5vbmNlIHx8ICExLFxuICAgICAgc2lnbmFsOiBmLnNpZ25hbCB8fCAhMVxuICAgIH07XG4gIH1cbiAgY29uc3QgYyA9ICh1LCBmKSA9PiB7XG4gICAgY29uc3QgaCA9IGEoZiksIG0gPSBuLmZpbmRJbmRleCgoW1QsIEFdKSA9PiBUID09PSB1ICYmIEEub25jZSA9PT0gaC5vbmNlICYmIEEuc2lnbmFsID09PSBoLnNpZ25hbCk7XG4gICAgbSA+PSAwICYmIG4uc3BsaWNlKG0sIDEpO1xuICB9LCBpID0gT2JqZWN0LmFzc2lnbihcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPZShpKSwgbztcbiAgICB9LFxuICAgIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIG4gPSBbXTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IHMsXG4gICAgICByZXNldCgpIHtcbiAgICAgICAgcyhlKTtcbiAgICAgIH0sXG4gICAgICBzdWIodSwgZikge1xuICAgICAgICByZXR1cm4gbi5wdXNoKFt1LCBhKGYpXSksICgpID0+IGModSwgZik7XG4gICAgICB9LFxuICAgICAgdW5zdWI6IGMsXG4gICAgICB1bnN1YkFsbCgpIHtcbiAgICAgICAgbiA9IG4uZmlsdGVyKCh1KSA9PiB1WzFdLnNpZ25hbCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gaTtcbn1cbmNvbnN0IFUgPSBbXTtcbmZ1bmN0aW9uIE9lKGUpIHtcbiAgVS5sZW5ndGggJiYgVVtVLmxlbmd0aCAtIDFdLmFkZChlKTtcbn1cbmNvbnN0IGFlID0gLyogQF9fUFVSRV9fICovIHkoITEpLCBbTywgcWVdID0gLyogQF9fUFVSRV9fICovIGtlKFwiQnJpZGdlXCIsIHtcbiAgYmdDb2xvcjogXCIjOTE0N2ZmXCIsXG4gIHRleHRDb2xvcjogXCJ3aGl0ZVwiLFxuICBzaG91bGRMb2c6IGFlXG59KSwgSWUgPSB7XG4gIGNsaXBib2FyZF90ZXh0X3JlY2VpdmVkOiBsKHtcbiAgICByZXFfaWQ6IF8oKSxcbiAgICBkYXRhOiAoZSkgPT4gZSA9PT0gbnVsbCA/IGUgOiBfKCEwKShlKVxuICB9LCBcImNsaXBib2FyZF90ZXh0X3JlY2VpdmVkXCIpLFxuICBjdXN0b21fbWV0aG9kX2ludm9rZWQ6IGwoe1xuICAgIHJlcV9pZDogXygpLFxuICAgIHJlc3VsdDogKGUpID0+IGUsXG4gICAgZXJyb3I6IF8oITApXG4gIH0sIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIpLFxuICBwb3B1cF9jbG9zZWQ6IGcoXCJwb3B1cF9jbG9zZWRcIiwgKGUpID0+IGUgPyBsKHtcbiAgICBidXR0b25faWQ6ICh0KSA9PiB0ID09IG51bGwgPyB2b2lkIDAgOiBfKCkodClcbiAgfSkoKShlKSA6IHt9KSxcbiAgdmlld3BvcnRfY2hhbmdlZDogbCh7XG4gICAgaGVpZ2h0OiBQKCksXG4gICAgd2lkdGg6IChlKSA9PiBlID09IG51bGwgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IFAoKShlKSxcbiAgICBpc19zdGF0ZV9zdGFibGU6ICQoKSxcbiAgICBpc19leHBhbmRlZDogJCgpXG4gIH0sIFwidmlld3BvcnRfY2hhbmdlZFwiKVxufTtcbmZ1bmN0aW9uIE1lKGUpIHtcbiAgY29uc3QgdCA9IHdpbmRvdywgWywgcl0gPSBrKFxuICAgIC8vIEFkZCBsaXN0ZW5lciwgd2hpY2ggaGFuZGxlcyBldmVudHMgc2VudCBmcm9tIHRoZSBUZWxlZ3JhbSB3ZWIgYXBwbGljYXRpb24gYW5kIGFsc28gZXZlbnRzXG4gICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBsb2NhbCBlbWl0RXZlbnQgZnVuY3Rpb24uXG4gICAgdGUodCwgXCJtZXNzYWdlXCIsIChuKSA9PiB7XG4gICAgICBpZiAobi5zb3VyY2UgIT09IHQucGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgbztcbiAgICAgIHRyeSB7XG4gICAgICAgIG8gPSBYKCkobi5kYXRhKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGV2ZW50VHlwZTogcywgZXZlbnREYXRhOiBhIH0gPSBvLCBjID0gSWVbc107XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpID0gYyA/IGMoKShhKSA6IGE7XG4gICAgICAgIE8oXCJFdmVudCByZWNlaXZlZDpcIiwgaSA/IHsgZXZlbnRUeXBlOiBzLCBldmVudERhdGE6IGkgfSA6IHsgZXZlbnRUeXBlOiBzIH0pLCBlKFtzLCBpXSk7XG4gICAgICB9IGNhdGNoIChpKSB7XG4gICAgICAgIHFlKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIGBBbiBlcnJvciBvY2N1cnJlZCBwcm9jZXNzaW5nIHRoZSBcIiR7c31cIiBldmVudCBmcm9tIHRoZSBUZWxlZ3JhbSBhcHBsaWNhdGlvbi5gLFxuICAgICAgICAgICAgXCJQbGVhc2UsIGZpbGUgYW4gaXNzdWUgaGVyZTpcIixcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9naXRodWIuY29tL1RlbGVncmFtLU1pbmktQXBwcy90ZWxlZ3JhbS1hcHBzL2lzc3Vlcy9uZXcvY2hvb3NlXCJcbiAgICAgICAgICBdLmpvaW4oYFxuYCksXG4gICAgICAgICAgbyxcbiAgICAgICAgICBpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIHI7XG59XG5jb25zdCBDID0gLyogQF9fUFVSRV9fICovIHkoKSwgTiA9IC8qIEBfX1BVUkVfXyAqLyB5KCk7XG5mdW5jdGlvbiBjZSgpIHtcbiAgcmV0dXJuIE4oKSB8fCBOLnNldChNZShDLnNldCkpLCBDO1xufVxuY29uc3QgdiA9IC8qIEBfX1BVUkVfXyAqLyB5KHt9KTtcbmZ1bmN0aW9uIGllKGUpIHtcbiAgbGV0IHQgPSB2KClbZV07XG4gIHJldHVybiB0IHx8ICh0ID0gLyogQF9fUFVSRV9fICovIHkodm9pZCAwLCB7XG4gICAgZXF1YWxzKCkge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSksIGNlKCkuc3ViKChyKSA9PiB7XG4gICAgciAmJiByWzBdID09PSBlICYmIHQuc2V0KHJbMV0pO1xuICB9KSwgdi5zZXQoeyAuLi52KCksIFtlXTogdCB9KSksIHQ7XG59XG5mdW5jdGlvbiBGZShlLCB0LCByKSB7XG4gIHJldHVybiBpZShlKS5zdWIodCwgcik7XG59XG5jb25zdCBKZSA9IFwiRVJSX01FVEhPRF9VTlNVUFBPUlRFRFwiLCBCZSA9IFwiRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRFwiLCBIZSA9IFwiRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURURcIiwgR2UgPSBcIkVSUl9VTktOT1dOX0VOVlwiLCBLZSA9IFwiRVJSX0lOVk9LRV9DVVNUT01fTUVUSE9EX1JFU1BPTlNFXCIsIHVlID0gLyogQF9fUFVSRV9fICovIHkoXCJodHRwczovL3dlYi50ZWxlZ3JhbS5vcmdcIik7XG5mdW5jdGlvbiBwZShlLCB0KSB7XG4gIE8oXCJQb3N0aW5nIGV2ZW50OlwiLCB0ID8geyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9IDogeyBldmVudFR5cGU6IGUgfSk7XG4gIGNvbnN0IHIgPSB3aW5kb3c7XG4gIGlmIChRKHIpKSB7XG4gICAgci5UZWxlZ3JhbVdlYnZpZXdQcm94eS5wb3N0RXZlbnQoZSwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuID0gSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9KTtcbiAgaWYgKE5lKCkpXG4gICAgcmV0dXJuIHIucGFyZW50LnBvc3RNZXNzYWdlKG4sIHVlKCkpO1xuICBjb25zdCB7IGV4dGVybmFsOiBvIH0gPSByO1xuICBpZiAobCh7IG5vdGlmeTogWSgpIH0pKCkuaXNWYWxpZChvKSkge1xuICAgIG8ubm90aWZ5KG4pO1xuICAgIHJldHVybjtcbiAgfVxuICB0aHJvdyBuZXcgYihHZSk7XG59XG5mdW5jdGlvbiBmZShlLCB0LCByKSB7XG4gIHIgfHwgKHIgPSB7fSk7XG4gIGNvbnN0IHsgY2FwdHVyZTogbiB9ID0gciwgW28sIHNdID0gaygpO1xuICByZXR1cm4gbmV3IHcoKGEpID0+IHtcbiAgICAoQXJyYXkuaXNBcnJheSh0KSA/IHQgOiBbdF0pLmZvckVhY2goKGMpID0+IHtcbiAgICAgIG8oXG4gICAgICAgIEZlKGMsIChpKSA9PiB7XG4gICAgICAgICAgKCFuIHx8IChBcnJheS5pc0FycmF5KHQpID8gbih7XG4gICAgICAgICAgICBldmVudDogYyxcbiAgICAgICAgICAgIHBheWxvYWQ6IGlcbiAgICAgICAgICB9KSA6IG4oaSkpKSAmJiBhKGkpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KSwgKHIucG9zdEV2ZW50IHx8IHBlKShlLCByLnBhcmFtcyk7XG4gIH0sIHIpLmZpbmFsbHkocyk7XG59XG5mdW5jdGlvbiBxKGUpIHtcbiAgcmV0dXJuIEFlKCkoZSk7XG59XG5mdW5jdGlvbiBfZShlKSB7XG4gIHJldHVybiBxKFxuICAgIGUucmVwbGFjZSgvXltePyNdKls/I10vLCBcIlwiKS5yZXBsYWNlKC9bPyNdL2csIFwiJlwiKVxuICApO1xufVxuZnVuY3Rpb24gVmUoKSB7XG4gIHJldHVybiBfZSh3aW5kb3cubG9jYXRpb24uaHJlZik7XG59XG5mdW5jdGlvbiBaZSgpIHtcbiAgY29uc3QgZSA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpWzBdO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBmaXJzdCBuYXZpZ2F0aW9uIGVudHJ5LlwiKTtcbiAgcmV0dXJuIF9lKGUubmFtZSk7XG59XG5jb25zdCB6ZSA9IFwibGF1bmNoUGFyYW1zXCI7XG5mdW5jdGlvbiBYZSgpIHtcbiAgcmV0dXJuIHEoeGUoemUpIHx8IFwiXCIpO1xufVxuZnVuY3Rpb24gbGUoZSkge1xuICBXZShcImxhdW5jaFBhcmFtc1wiLCAvKiBAX19QVVJFX18gKi8gU2UoZSkpO1xufVxuZnVuY3Rpb24gYmUoZSkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlICsgKGUuY2F1c2UgPyBgXG4gICR7YmUoZS5jYXVzZSl9YCA6IFwiXCIpIDogSlNPTi5zdHJpbmdpZnkoZSk7XG59XG5mdW5jdGlvbiBZZSgpIHtcbiAgY29uc3QgZSA9IFtdO1xuICBmb3IgKGNvbnN0IHQgb2YgW1xuICAgIC8vIFRyeSB0byByZXRyaWV2ZSBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uLiBUaGlzIG1ldGhvZCBjYW4gcmV0dXJuXG4gICAgLy8gbm90aGluZyBpbiBjYXNlLCBsb2NhdGlvbiB3YXMgY2hhbmdlZCwgYW5kIHRoZW4gdGhlIHBhZ2Ugd2FzIHJlbG9hZGVkLlxuICAgIFZlLFxuICAgIC8vIFRoZW4sIHRyeSB1c2luZyB0aGUgbG93ZXIgbGV2ZWwgQVBJIC0gd2luZG93LnBlcmZvcm1hbmNlLlxuICAgIFplLFxuICAgIC8vIEZpbmFsbHksIHRyeSB0byBleHRyYWN0IGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gdGhlIHNlc3Npb24gc3RvcmFnZS5cbiAgICBYZVxuICBdKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCByID0gdCgpO1xuICAgICAgcmV0dXJuIGxlKHIpLCByO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIGUucHVzaChyKTtcbiAgICB9XG4gIHRocm93IG5ldyBiKEJlLCBbXG4gICAgXCJVbmFibGUgdG8gcmV0cmlldmUgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSBhbnkga25vd24gc291cmNlLiBQZXJoYXBzLCB5b3UgaGF2ZSBvcGVuZWQgeW91ciBhcHAgb3V0c2lkZSBUZWxlZ3JhbT9cIixcbiAgICBcIvCfk5YgUmVmZXIgdG8gZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbjpcIixcbiAgICBcImh0dHBzOi8vZG9jcy50ZWxlZ3JhbS1taW5pLWFwcHMuY29tL3BhY2thZ2VzL3RlbGVncmFtLWFwcHMtYnJpZGdlL2Vudmlyb25tZW50XCIsXG4gICAgXCJDb2xsZWN0ZWQgZXJyb3JzOlwiLFxuICAgIC4uLmUubWFwKCh0KSA9PiBg4oCUICR7YmUodCl9YClcbiAgXS5qb2luKGBcbmApKTtcbn1cbmZ1bmN0aW9uIF90KGUpIHtcbiAgaWYgKGUgPT09IFwic2ltcGxlXCIpXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBZZSgpLCAhMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIHJldHVybiB3LndpdGhGbihhc3luYyAoKSA9PiB7XG4gICAgaWYgKFEod2luZG93KSlcbiAgICAgIHJldHVybiAhMDtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZlKFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsIFwidGhlbWVfY2hhbmdlZFwiLCB7IHRpbWVvdXQ6IDEwMCB9KSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9LCBlKTtcbn1cbmZ1bmN0aW9uIHgoZSwgdCkge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgTWVzc2FnZUV2ZW50KFwibWVzc2FnZVwiLCB7XG4gICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9KSxcbiAgICAvLyBXZSBzcGVjaWZ5IHdpbmRvdy5wYXJlbnQgdG8gaW1pdGF0ZSB0aGUgY2FzZSwgdGhlIHBhcmVudCBpZnJhbWUgc2VudCB1cyB0aGlzIGV2ZW50LlxuICAgIHNvdXJjZTogd2luZG93LnBhcmVudFxuICB9KSk7XG59XG5mdW5jdGlvbiBRZShlLCB0KSB7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGV2ZW50VHlwZTogciB9ID0gWCgpKHQpO1xuICAgICAgciA9PT0gXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIiAmJiB4KFwidGhlbWVfY2hhbmdlZFwiLCB7XG4gICAgICAgIHRoZW1lX3BhcmFtczogSlNPTi5wYXJzZSgvKiBAX19QVVJFX18gKi8gVyhlKSlcbiAgICAgIH0pLCByID09PSBcIndlYl9hcHBfcmVxdWVzdF92aWV3cG9ydFwiICYmIHgoXCJ2aWV3cG9ydF9jaGFuZ2VkXCIsIHtcbiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgaXNfc3RhdGVfc3RhYmxlOiAhMCxcbiAgICAgICAgaXNfZXhwYW5kZWQ6ICEwXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG59XG5mdW5jdGlvbiBsdChlKSB7XG4gIHZhciBuO1xuICBjb25zdCB0ID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IHEoZSkgOiBlO1xuICBsZSh0KTtcbiAgY29uc3QgciA9IChuID0gd2luZG93LlRlbGVncmFtV2Vidmlld1Byb3h5KSA9PSBudWxsID8gdm9pZCAwIDogbi5wb3N0RXZlbnQ7XG4gIHdpbmRvdy5UZWxlZ3JhbVdlYnZpZXdQcm94eSA9IHtcbiAgICBwb3N0RXZlbnQobywgcykge1xuICAgICAgUWUodC50aGVtZVBhcmFtcywgSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IG8sIGV2ZW50RGF0YTogcyB9KSksIHIgPT0gbnVsbCB8fCByKG8sIHMpO1xuICAgIH1cbiAgfSwgTyhcIkVudmlyb25tZW50IHdhcyBtb2NrZWQgYnkgdGhlIG1vY2tUZWxlZ3JhbUVudiBmdW5jdGlvblwiKTtcbn1cbmZ1bmN0aW9uIGJ0KCkge1xuICBbXG4gICAgW1wiVGVsZWdyYW1HYW1lUHJveHlfcmVjZWl2ZUV2ZW50XCJdLFxuICAgIC8vIFdpbmRvd3MgUGhvbmUuXG4gICAgW1wiVGVsZWdyYW1HYW1lUHJveHlcIiwgXCJyZWNlaXZlRXZlbnRcIl0sXG4gICAgLy8gRGVza3RvcC5cbiAgICBbXCJUZWxlZ3JhbVwiLCBcIldlYlZpZXdcIiwgXCJyZWNlaXZlRXZlbnRcIl1cbiAgICAvLyBBbmRyb2lkIGFuZCBpT1MuXG4gIF0uZm9yRWFjaCgoZSkgPT4ge1xuICAgIGxldCB0ID0gd2luZG93O1xuICAgIGUuZm9yRWFjaCgociwgbiwgbykgPT4ge1xuICAgICAgaWYgKG4gPT09IG8ubGVuZ3RoIC0gMSkge1xuICAgICAgICB0W3JdID0geDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgciBpbiB0IHx8ICh0W3JdID0ge30pLCB0ID0gdFtyXTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBndCgpIHtcbiAgW1wiVGVsZWdyYW1HYW1lUHJveHlfcmVjZWl2ZUV2ZW50XCIsIFwiVGVsZWdyYW1HYW1lUHJveHlcIiwgXCJUZWxlZ3JhbVwiXS5mb3JFYWNoKChlKSA9PiB7XG4gICAgZGVsZXRlIHdpbmRvd1tlXTtcbiAgfSk7XG59XG5mdW5jdGlvbiB3dChlLCB0LCByKSB7XG4gIGllKGUpLnVuc3ViKHQsIHIpO1xufVxuZnVuY3Rpb24gaHQoZSwgdCkge1xuICByZXR1cm4gY2UoKS5zdWIoZSwgdCk7XG59XG5mdW5jdGlvbiBtdChlLCB0KSB7XG4gIEMudW5zdWIoZSwgdCk7XG59XG5mdW5jdGlvbiBldChlKSB7XG4gIHJldHVybiAoeyByZXFfaWQ6IHQgfSkgPT4gdCA9PT0gZTtcbn1cbmZ1bmN0aW9uIEIoZSkge1xuICByZXR1cm4gZS5zcGxpdChcIi5cIikubWFwKE51bWJlcik7XG59XG5mdW5jdGlvbiB0dChlLCB0KSB7XG4gIGNvbnN0IHIgPSBCKGUpLCBuID0gQih0KSwgbyA9IE1hdGgubWF4KHIubGVuZ3RoLCBuLmxlbmd0aCk7XG4gIGZvciAobGV0IHMgPSAwOyBzIDwgbzsgcyArPSAxKSB7XG4gICAgY29uc3QgYSA9IHJbc10gfHwgMCwgYyA9IG5bc10gfHwgMDtcbiAgICBpZiAoYSAhPT0gYylcbiAgICAgIHJldHVybiBhID4gYyA/IDEgOiAtMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIHAoZSwgdCkge1xuICByZXR1cm4gdHQoZSwgdCkgPD0gMDtcbn1cbmZ1bmN0aW9uIEgoZSwgdCwgcikge1xuICBpZiAodHlwZW9mIHIgPT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfb3Blbl9saW5rXCIpIHtcbiAgICAgIGlmICh0ID09PSBcInRyeV9pbnN0YW50X3ZpZXdcIilcbiAgICAgICAgcmV0dXJuIHAoXCI2LjRcIiwgcik7XG4gICAgICBpZiAodCA9PT0gXCJ0cnlfYnJvd3NlclwiKVxuICAgICAgICByZXR1cm4gcChcIjcuNlwiLCByKTtcbiAgICB9XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCIgJiYgdCA9PT0gXCJjb2xvclwiKVxuICAgICAgcmV0dXJuIHAoXCI2LjlcIiwgcik7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9jbG9zZVwiICYmIHQgPT09IFwicmV0dXJuX2JhY2tcIilcbiAgICAgIHJldHVybiBwKFwiNy42XCIsIHIpO1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfc2V0dXBfbWFpbl9idXR0b25cIiAmJiB0ID09PSBcImhhc19zaGluZV9lZmZlY3RcIilcbiAgICAgIHJldHVybiBwKFwiNy4xMFwiLCByKTtcbiAgfVxuICBzd2l0Y2ggKGUpIHtcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3RnX2xpbmtcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX2ludm9pY2VcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9iYWNrX2J1dHRvblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9iYWNrZ3JvdW5kX2NvbG9yXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3RyaWdnZXJfaGFwdGljX2ZlZWRiYWNrXCI6XG4gICAgICByZXR1cm4gcChcIjYuMVwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3BvcHVwXCI6XG4gICAgICByZXR1cm4gcChcIjYuMlwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9jbG9zZV9zY2FuX3FyX3BvcHVwXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9zY2FuX3FyX3BvcHVwXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVhZF90ZXh0X2Zyb21fY2xpcGJvYXJkXCI6XG4gICAgICByZXR1cm4gcChcIjYuNFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zd2l0Y2hfaW5saW5lX3F1ZXJ5XCI6XG4gICAgICByZXR1cm4gcChcIjYuN1wiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9pbnZva2VfY3VzdG9tX21ldGhvZFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3Rfd3JpdGVfYWNjZXNzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9waG9uZVwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjlcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc2V0dGluZ3NfYnV0dG9uXCI6XG4gICAgICByZXR1cm4gcChcIjYuMTBcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfZ2V0X2luZm9cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9vcGVuX3NldHRpbmdzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfcmVxdWVzdF9hY2Nlc3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9yZXF1ZXN0X2F1dGhcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV91cGRhdGVfdG9rZW5cIjpcbiAgICAgIHJldHVybiBwKFwiNy4yXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3N3aXBlX2JlaGF2aW9yXCI6XG4gICAgICByZXR1cm4gcChcIjcuN1wiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zaGFyZV90b19zdG9yeVwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjhcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc2Vjb25kYXJ5X2J1dHRvblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9ib3R0b21fYmFyX2NvbG9yXCI6XG4gICAgICByZXR1cm4gcChcIjcuMTBcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9zYWZlX2FyZWFcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X2NvbnRlbnRfc2FmZV9hcmVhXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9mdWxsc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfZXhpdF9mdWxsc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2Vtb2ppX3N0YXR1c1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2FkZF90b19ob21lX3NjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2NoZWNrX2hvbWVfc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9lbW9qaV9zdGF0dXNfYWNjZXNzXCI6XG4gICAgICByZXR1cm4gcChcIjguMFwiLCB0KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgXCJpZnJhbWVfcmVhZHlcIixcbiAgICAgICAgXCJpZnJhbWVfd2lsbF9yZWxvYWRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2Nsb3NlXCIsXG4gICAgICAgIFwid2ViX2FwcF9kYXRhX3NlbmRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2V4cGFuZFwiLFxuICAgICAgICBcIndlYl9hcHBfb3Blbl9saW5rXCIsXG4gICAgICAgIFwid2ViX2FwcF9yZWFkeVwiLFxuICAgICAgICBcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiLFxuICAgICAgICBcIndlYl9hcHBfcmVxdWVzdF92aWV3cG9ydFwiLFxuICAgICAgICBcIndlYl9hcHBfc2V0dXBfbWFpbl9idXR0b25cIixcbiAgICAgICAgXCJ3ZWJfYXBwX3NldHVwX2Nsb3NpbmdfYmVoYXZpb3JcIlxuICAgICAgXS5pbmNsdWRlcyhlKTtcbiAgfVxufVxuZnVuY3Rpb24gZHQoZSwgdCkge1xuICB0IHx8ICh0ID0gXCJzdHJpY3RcIik7XG4gIGNvbnN0IHIgPSB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyB0IDogKG4pID0+IHtcbiAgICBjb25zdCB7IG1ldGhvZDogbywgdmVyc2lvbjogcyB9ID0gbjtcbiAgICBsZXQgYSwgYztcbiAgICBpZiAoXCJwYXJhbVwiIGluIG4gPyAoYSA9IGBQYXJhbWV0ZXIgXCIke24ucGFyYW19XCIgb2YgXCIke299XCIgbWV0aG9kIGlzIHVuc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7c31gLCBjID0gSGUpIDogKGEgPSBgTWV0aG9kIFwiJHtvfVwiIGlzIHVuc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7c31gLCBjID0gSmUpLCB0ID09PSBcInN0cmljdFwiKVxuICAgICAgdGhyb3cgbmV3IGIoYywgYSk7XG4gICAgcmV0dXJuIGNvbnNvbGUud2FybihhKTtcbiAgfTtcbiAgcmV0dXJuIChuLCBvKSA9PiBIKG4sIGUpID8gJGUobykgJiYgbiA9PT0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiAmJiBcImNvbG9yXCIgaW4gbyAmJiAhSChuLCBcImNvbG9yXCIsIGUpID8gcih7IHZlcnNpb246IGUsIG1ldGhvZDogbiwgcGFyYW06IFwiY29sb3JcIiB9KSA6IHBlKG4sIG8pIDogcih7IHZlcnNpb246IGUsIG1ldGhvZDogbiB9KTtcbn1cbmZ1bmN0aW9uIEV0KGUsIHQsIHIsIG4pIHtcbiAgcmV0dXJuIGZlKFwid2ViX2FwcF9pbnZva2VfY3VzdG9tX21ldGhvZFwiLCBcImN1c3RvbV9tZXRob2RfaW52b2tlZFwiLCB7XG4gICAgLi4ubiB8fCB7fSxcbiAgICBwYXJhbXM6IHsgbWV0aG9kOiBlLCBwYXJhbXM6IHQsIHJlcV9pZDogciB9LFxuICAgIGNhcHR1cmU6IGV0KHIpXG4gIH0pLnRoZW4oKHsgcmVzdWx0OiBvLCBlcnJvcjogcyB9KSA9PiB7XG4gICAgaWYgKHMpXG4gICAgICB0aHJvdyBuZXcgYihLZSwgcyk7XG4gICAgcmV0dXJuIG87XG4gIH0pO1xufVxuZnVuY3Rpb24gcnQoZSkge1xuICBlLnVuc3ViQWxsKCksIGUucmVzZXQoKTtcbn1cbmZ1bmN0aW9uIHl0KCkge1xuICB2YXIgZTtcbiAgKGUgPSBOKCkpID09IG51bGwgfHwgZSgpLCBbXG4gICAgLi4uT2JqZWN0LnZhbHVlcyh2KCkpLFxuICAgIHYsXG4gICAgQyxcbiAgICBOLFxuICAgIHVlLFxuICAgIGFlXG4gIF0uZm9yRWFjaChydCk7XG59XG5leHBvcnQge1xuICBhZSBhcyAkZGVidWcsXG4gIHVlIGFzICR0YXJnZXRPcmlnaW4sXG4gIHcgYXMgQ2FuY2VsYWJsZVByb21pc2UsXG4gIHJlIGFzIEVSUl9BQk9SVEVELFxuICBuZSBhcyBFUlJfQ0FOQ0VMRUQsXG4gIEtlIGFzIEVSUl9DVVNUT01fTUVUSE9EX0VSUl9SRVNQT05TRSxcbiAgSGUgYXMgRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURUQsXG4gIEplIGFzIEVSUl9NRVRIT0RfVU5TVVBQT1JURUQsXG4gIEJlIGFzIEVSUl9SRVRSSUVWRV9MUF9GQUlMRUQsXG4gIG9lIGFzIEVSUl9USU1FRF9PVVQsXG4gIEdlIGFzIEVSUl9VTktOT1dOX0VOVixcbiAgUyBhcyBFbmhhbmNlZFByb21pc2UsXG4gIGIgYXMgVHlwZWRFcnJvcixcbiAgdGUgYXMgYWRkRXZlbnRMaXN0ZW5lcixcbiAgY3QgYXMgY2FtZWxUb0tlYmFiLFxuICBpdCBhcyBjYW1lbFRvU25ha2UsXG4gIGV0IGFzIGNhcHR1cmVTYW1lUmVxLFxuICB0dCBhcyBjb21wYXJlVmVyc2lvbnMsXG4gIE0gYXMgY3JlYXRlQWJvcnRFcnJvcixcbiAgayBhcyBjcmVhdGVDYkNvbGxlY3RvcixcbiAga2UgYXMgY3JlYXRlTG9nZ2VyLFxuICBkdCBhcyBjcmVhdGVQb3N0RXZlbnQsXG4gIEwgYXMgY3JlYXRlVHlwZWRFcnJvclByZWRpY2F0ZSxcbiAgYnQgYXMgZGVmaW5lRXZlbnRIYW5kbGVycyxcbiAgZnQgYXMgZGVsZXRlQ3NzVmFyLFxuICB4IGFzIGVtaXRNaW5pQXBwc0V2ZW50LFxuICB4ZSBhcyBnZXRTdG9yYWdlVmFsdWUsXG4gIFEgYXMgaGFzV2Vidmlld1Byb3h5LFxuICBFdCBhcyBpbnZva2VDdXN0b21NZXRob2QsXG4gIG90IGFzIGlzQWJvcnRFcnJvcixcbiAgc3QgYXMgaXNDYW5jZWxlZEVycm9yLFxuICBOZSBhcyBpc0lmcmFtZSxcbiAgX3QgYXMgaXNUTUEsXG4gIG50IGFzIGlzVGltZW91dEVycm9yLFxuICBsdCBhcyBtb2NrVGVsZWdyYW1FbnYsXG4gIHd0IGFzIG9mZixcbiAgRmUgYXMgb24sXG4gIHBlIGFzIHBvc3RFdmVudCxcbiAgZ3QgYXMgcmVtb3ZlRXZlbnRIYW5kbGVycyxcbiAgZmUgYXMgcmVxdWVzdCxcbiAgeXQgYXMgcmVzZXRQYWNrYWdlU3RhdGUsXG4gIFllIGFzIHJldHJpZXZlTGF1bmNoUGFyYW1zLFxuICBwdCBhcyBzZXRDc3NWYXIsXG4gIFdlIGFzIHNldFN0b3JhZ2VWYWx1ZSxcbiAgYXQgYXMgc2xlZXAsXG4gIHV0IGFzIHNuYWtlVG9DYW1lbCxcbiAgaHQgYXMgc3Vic2NyaWJlLFxuICBIIGFzIHN1cHBvcnRzLFxuICBtdCBhcyB1bnN1YnNjcmliZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ })

};
;